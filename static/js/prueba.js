(this.webpackJsonpfrontend = this.webpackJsonpfrontend || []).push([[0], 
    { 104: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAATCAYAAAB2pebxAAAAAXNSR0IArs4c6QAAANdJREFUOBHtlOERgjAMhVvPAXADR2ADXcFJ1A1wAtmIMoGM4Cb6PSh39UzpHedPcxfSviQvDQ24V1kehOzdgnhx4O/RkIm7gCvm5L23Y+JBGoJMwV+jQ4yrraCNBaYY1Qf2Oo2kmszn0yShahMrj4aULqZ1CX6eqbbzImNvGVxttRDKXhdJaKXJkDgI1OId3Znt5BJTnAIte91qtZokJfyTpG9jWs/fzrcHhBvwpiOCXHPQUnNiDdQR/ICuFyqMY19i0EmkP7nixbGniv4jJelzJKGUmfifb3poixQJytHZAAAAAElFTkSuQmCC" }, 154: function (e, t, a) { e.exports = a.p + "static/media/landing_page_controller.aed7cd8b.svg" }, 155: function (e, t, a) { e.exports = a.p + "static/media/Logo.a55cff11.svg" }, 156: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAiCAYAAAA3WXuFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAlBJREFUeNrcWO1Rg0AQDRn/SwlYgViBdCAdiBWYDowVkA4wFWAqACsIHZAOoAPczezpejlgF3DGcWfeMJPz9t7u3n6cq9UfE0+7oes6Hz4R4B4QAgICSgVoAR+A0vO88tcIARE89AUQA3z62RyIBK6JoE9flBNgD9gBuXYRF6JHAGn3LTkgFuxJAAXtaQCbJciEgCMpLchLWh0RoGbG+HPINIRkAeOMl49qUhaZcKkMojDqSFH8j0uTcZDKtK5NFN7c0EGBcE9GZ0SjqW0usNCTRXcpqXAvRqCWMg8ESg2ZLRkSUhadf1OELhn6I2SdC8PkPJiINsLQXZy3ZoumAu8FuuxKzeWA68L79I6Vn2fcmi2GA4dopKKvhNDBOvsHIWyW1QI9xxCR6DHGRy5CUiWu0HG5PXdtz6tGO7vD+PXMsDw7RpOYrUuknU2ILNuhq03dITI5hex1ppe/0rWQamHFzZZCY5xdPq4s14VCJXgJH8i6kgY0lEfUQbNPOXaPWK9sXYvbsSpN1ZV7peA1hApmzdbroQbNqnU0VH03A4OWGR3iEeIhI9/0jRrUapohF9Z9DY+NJL7ifkR9DZc18qx3yCfv4OYniP+bNeDXlM4HZVJiaWhB343dyOGDjfWu965R5tQE32HpZOm5HrnEzbFqopv2ijHhD6SbsqELPpNQrplI7UssGrYUnimkU+WYgunvqcv3XTrXspS9PrfKtA9Y+Bd53/Es48/irO+VwV4hOUuybMqrV0osF2Z6M4WIN4cc+28HlxNNntXqP8inAAMA4tK89GzxqHsAAAAASUVORK5CYII=" }, 157: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAZCAYAAAAv3j5gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZpJREFUeNq8VgttxDAMbU8DEAiFEAYrhELoGHQMjkHHoBqCQugY3IYgNwQ5Bp2tvZwsK+mlH50lq0ocx479bLconkRl7sF5ni19erH1XZbl++EekaGWeCKuwfMRlzZ4gdw7M4v1HNHriM0azwN12DPEozLk+KyQX4g9vibXCH+tUPQIW6W8d2CWDzA4PDSGA5NYG4SsehDmRqwrONssGTLwrt2Y2xDCPgvG8KjaYKiXEZF0SujcqEauEUQ5AZRRI5PoJ/fZNS7oI9DmkNYqd14B5B76iBP/NQGaIugKybWJUA2Rl0/i9ediqfiErE7FHU74Bd17kZ+e1VRfhHX2mgHwS/xBYLhBxHuMRCP2AnEZfOm64vPEr8Scgk8dnhrxvYTWI+Sh2qtIF9E90SF3De6slirdJRI/i0Q7Xf0p3WIhwSmUhRKwCV1++XhsC9nTwuDRpOGdEQEbaWH20ZjwOCxnjEeOjALQGJldQ7gjZyZ5NWMsQNCpkdILuZxNds2UbdeMcjGF7a7KRo2NW39O9vxuXalTvOXq/wkwAAjQ5NtEZV58AAAAAElFTkSuQmCC" }, 158: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBBUXNBfv0wEkAAACoElEQVQ4y31US08TURT+7mUK0yLhUVN2UjQxEdEVKA9dQnSBGBNxYVwYE+PKlX9Ad+LKCAhxI4mJkRD/ADHRTbVCUl42Cia0EEtCePUxbZmZe46LaekznMW9mfOd757vnHvuCORsDgNgYTZql8QIutCmPDItojyPGV6tiQsmyFykcDYbGna92sO6xy6WQQQQ5aRoQBv1cQ9BTLnei70CCYAJIHVxJRwLZYeUDyVGvuwtFaIlbgco77QB2J1b1tabjM5OWAmJQTqN2wZ15JAgAKNj0/r9EicajZqpRDtwAABx78qvzTEAsCoyUNFqj+0vczMAFofPtkKG7lTkgOqROWcGzdfc5Mh2/EpPhdJPANhN2bXsEBeUC+uDIjukviojaWTP5UkAIzb8N7zeCPu6+ccq6pI9aDE9AAC+nFIbs8UylW9/zejX7BH1o37nOIdUvRL8kQCIZWut4QzXCyOP1uxwkEckd9F3pw4AYJbToksoAQnSas7XHxQIAMABdMGOmTeqNZXd9IV2+UppD+km/dPIjUzFHQA6v0M3hsTPkjGBSNtuTWagl1MkaAD3MSi/lRIAeJCRMkJnq+i6gwDmKwjgdmxIXrB7q1SyQrMiLSv8u33GAjLXEmvsq6C0sFdVMOKtsfW9PplaTWK7h8tA9Yk+y6ayY2D16OQOy9Pxoyn9OetlAxlBhFTpeLLueYFJ9yGAtDe7ZE8UvxO7LKfzbU3EF/dbAEQBqHbDMF+d/F72RxMp0w9E8mdTR8JIjrPO1eYArG+/TaboQpF4BSDjP1qkkBou755qVbczSweLh34n7vgPQ5DgZrpnPzU0d7AugKhI8Sm0JftdV2sVTbqmxUH+YkWhRA1AutHqrLtb281+8si0iFjzPKOFaw5FDgeA/4v/VwqKJ60lAAAAAElFTkSuQmCC" }, 159: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAYhJREFUOBHNUzFSwlAQ3f2TH52xEGfspbEGagthxkQ7uQG5gd5AOII34AgpISkIMx7AI+DYWmBJErK+BQpIUkDnFsn83bcvb/++MNVEFj91heSNSNpE3AAkIaHQ9afvNXDicnJHMAPBLwmPhWUJogDAGxCPzrxoWO6pkKSRnwhz03VWbe4lINiG5on53jqrq/28Vs0WsvcEECrGZSCzGSoqz88x4mFUSQ7rR53+M4nIHFsZlOcQKQLNWW+S6Hs/KuPoBTJTM4t9+GQbunZsZgCvHOcTbUsj74PY3JHIJ5qXaO4SFT/WZrflrSm+ogQEWCFfQP43/PIFIhYupiC9XudnWH81NmaTWbeR5+5LIXAmRlG3GqbAeYhCbdF6lrlqthZOUMahtTzi3mSh9Q0J3KiyW/jqXI0G2WGd7J3KV2Bx8bK0julsiFAI0vhRVrE/VNZjQi9ae/DxseIdYdNXOUZklkVe7cwKPAhZC4aAenrWPKexj5+MLw9Apxyk6DhMpn9KTxnr2GzxB4Fdo5q059ySAAAAAElFTkSuQmCC" }, 160: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAARCAYAAAA2cze9AAAAAXNSR0IArs4c6QAAAeZJREFUOBG1ks0rhFEUxr1jKMpXNop8jCQlikaxsMDGYlZSLMmasrQUG7ExEguTzyT+A9lKFrKZ2NmwFDFlSPg9r3tf7+ujZjFOPZ5zfvfMMefOdd6JnP+JibCZO4ons/g/Epplhycdxzm1w1mG0vmxETwEf7N91r/3U6d0FrIN1jmYJt/Amy2TUy9ga3i95eQhtEidwCss9xyo6BDAp9EgKkWrqNPwOfJ+VIY0qMXwFfIuVI62UJ3hJ+Tj3jencDioRoesfo+foQg8D69CR/A7/BLVwQvxMtgxuiW/QhHkhb3zHBrof5/jZB4/x9thI+o0PI5fUFbC1Se+hOKk1+gVfiTuBYcK91oEyaNoyGswCaz7D94LH/T3UwevxXeo1VM06Jr88UKR9gOTiz//woOvhYHaYB3ppexT6761TRM2hhrJZ8UU5FFsGLWST4oFAqjoQLr0TVSpBnwS6eXkox1UYPgUeUw1OrDDyGdQj+kJXot+UA70+AdoKsb70BVca+s1dML1QhrQDfwJf4S1oSLyGqQf9is4UNh3nke+jnZR7KvL3WQRto0aLSfPRctIG+u5ukHufnOtr/Bei06pw59twb+Zcvrc4XZILeDBP4raX3p5htz9fezwPe/TWUw0vCSL8/yj0h/Yo4tDHMe5NQAAAABJRU5ErkJggg==" }, 161: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB4AAAAeABBeqfSQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGzSURBVEiJ1ZU7axVRFEbXiVeJmtogogRRBCGBaOWDIJgiReoUwcbCR2cRhaSKRRCFFJJOf0DAxsJSC0sLRcEuQSGlIOaBaB6Ky2LOhEuYO3Pmem/hB1PM8O299t5zHtABqQtqoxO5yiCnzXS/26CZCPqlnm/lCzUS9gPjwCBwENgBvgKTwJloewtcDCH8bqfiIXVR3TZN0+1A7qhbiYBcW+rZOpCFmoBmfVD3N+cr/EfqDeBpfF0DXgBvgFWgDxgARoArJbXeCyHMl3VyQv2uflZvq4db+BrqakE3m+oT9VRJEbsje6QeqvBd3gP4ps6Zrc5yqQfUS5XGzPsgAlbMFk1fSlxtxfFM2u2j5/+XOqxOtRvfkwAYVV8C74EjiUWdS6Kr+9QJ9d2eJTxaEdcwO83nqgC9cZN+KtiIP9TeFnFBHYuFratHq0DXCgC5fqoP1RH1ZHwuqFPqxybf9aqJ5bDnJbAqzSZBIui4ulETsB07S75Ic9jNRMCO+kwdrsrZ6poIwCvgavy0BCwC+UG7CSwDr0MIX2p1UQA7pq7Fyu/+U7IE2C31jzrQbVCP+rgTuf4CTJzX6TZ0JX4AAAAASUVORK5CYII=" }, 162: function (e, t, a) { e.exports = a.p + "static/media/Value_to_color.3b188875.png" }, 163: function (e, t, a) { e.exports = a.p + "static/media/sync_on.0b696919.svg" }, 164: function (e, t, a) { e.exports = a.p + "static/media/sync_off.f36b717b.svg" }, 165: function (e, t, a) { e.exports = a.p + "static/media/link_on.73baf8cf.svg" }, 166: function (e, t, a) { e.exports = a.p + "static/media/link_off.a8a24b54.svg" }, 167: function (e, t, a) { e.exports = a.p + "static/media/search.76ad0792.png" }, 168: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AEbFAo0Ow0diQAAALRJREFUKM+tkUERg1AMRN9nEICEOuiX0DqohEqohDoABwwKkMBUAa0CcAAKsr18ZgIDPTW3zCabzS78o0y6mNTtYZkbKk2KO8uFSbVJBUDusA/QmXQFIjCadALaX1JuJvUmdYlVnn1v4WlS6/q7SYOfCUl3mfoZeGUhVIt+YAKqJLPZXngkSYUzYuVW7t0AzsAIDCbNCRpNilkI7y17b1LtcijdH1NybB3WUXAeO3IrLhe29QWdoZ/jKJQLkwAAAABJRU5ErkJggg==" }, 169: function (e, t, a) { e.exports = a.p + "static/media/SyncDisabled.a99eb5ce.svg" }, 170: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4woeASASwY3EXAAAAGZJREFUOMvtktEJgDAMRF+Kk9SZ3MWZdKZmBUeIPy2IlJJa/fM+A/eSOwJfyMw2c0oq5ggk77Iweu1029ytUDLnsxMQuwHA8jTCcAc/oA6IwO4FSP4Du8wOYAW04dMWwKNZRPSVDk7VZUV6cxspjQAAAABJRU5ErkJggg==" }, 171: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAARCAYAAAAyhueAAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4woeARkXv2O9aQAAAN9JREFUOMvNk9ENgjAURY+EBVihjsAGRDaojqAjyAqOIDOwgaQTwAh2BVbw55HU2lbgR19CUpLX03tv++DXVXW2WNK3Wwl8AiNwMlpNsd5shdBCvgPwSKnONiZRAkPV2XKx/aqzShSVgHJUKq91kij6KFQs3YHjSuUXo1X7YV+AwwYgIiSY6TVgb7FS9yd31ufIhlGymwIugpnm3pNxqwHa+T3K5blQK8DRV5FH1DVGq1vC7gjUsQHIvJPn6gO9cwR9CuhD29RNCGRvtEoC36Bi1zoTEwN/LX9MawEr/q1e2YFFoX0I/tUAAAAASUVORK5CYII=" }, 173: function (e, t, a) { e.exports = a.p + "static/media/config.60b1337f.svg" }, 174: function (e, t, a) { e.exports = a.p + "static/media/config-hover.d4770bdb.svg" }, 175: function (e, t, a) { e.exports = a.p + "static/media/banks-hover.94c01763.svg" }, 184: function (e, t, a) { e.exports = a(406) }, 201: function (e, t, a) { }, 212: function (e, t, a) { }, 213: function (e, t, a) { }, 214: function (e, t, a) { }, 215: function (e, t, a) { }, 216: function (e, t, a) { }, 217: function (e, t, a) { }, 218: function (e, t, a) { }, 219: function (e, t, a) { }, 220: function (e, t, a) { }, 221: function (e, t, a) { }, 222: function (e, t, a) { }, 32: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAYAAAAcP/9qAAAAAXNSR0IArs4c6QAAArJJREFUSA3lVTuvEkEUnr28FuQVwAQKjSExxtj5B7w/xAJLCkos4UpCCdzYkNBoayi0sDE2t6IxMcTGYMOl0USIiDwEefl9G4eMGxZ2jYmFJ/l2zsw5c76ZOWdnhPhHoh3hlXbZqu5bdIg/khOLWSSizQ3oQAAIlkql22ivAH6A47TvWxSGD8u+SRxjQG8+n7+ZTqefj8fja5PJxMVQ2+1WJJPJz5vNpp7L5c4x9B1YAhvAtpiJ2fcCgXq9Xh4MBtn1er03GIhFKpV6n81mT+EwBhaAbXKVWO40WC6X7y8Wi8cnJ1aZAMUvicfjotfrCZ/PJ1wul7CYc6lp2tNisfhIzlMjy92GEKBmEUDO27X9fl/4/X6xWq2MNOwMvys3kKIzyBM5LIlJyhzq1Wq1MJ/PjXxKp0MtF5hIJMRyuRQ8fuKAZECeoV0SU2dB+Twez112nAgWKlgLR0hlyAwVScwdU/dg8nUanMh0OrVLyrD3+JHE1EmOGtC+sONEcEpO3Ht0VomNychVx0kU+oZCIa7Y7rQLOqrExhXY6XReut1Mt33Br2fXeQTHMzpLYpKyHJeNRuNNMBh8R6MdCQQCAou1+n/VEDziU1T1JQfl+bDlNsPAVaJWqz0bjUYp6Jai6/q22+2+Gg6HvVgsNgmHw3Ov17vac2JtEL5QA0lijnH3vPxjAMljlUrlfDab3TFfm7yvo9Hop2az+bDVan2A7wBgUU6AFXBUVGLqLE++PiQneAJ6oVB4EIlEbkHX8M9+bLfbr0H6Fn3e0UPgK/AN+AEwbUdFJaYz+z6A5BGAxOwzDdKXgbkrVhTJSM6dsn/w2oJ9J+byZVC5aj5LfPL4WpFUJZZ+tP+VZxFxDCEJ72sePXO/j9j4C2DjAm0dL/x2InexGzApKqHJZJA5JjQH+X/6PwENzN1aRE4OPgAAAABJRU5ErkJggg==" }, 33: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAYAAADtaU2/AAAAAXNSR0IArs4c6QAAA1FJREFUSA3lVk1oE0EU3tnN7qa/NiWttR5atWDBg2L9oV5MwUNBLSLipXgQEYp60YMHUfBiQUTsyYMezK3gwYsERcFWQS1FsbRWqG0thVZSbPqfZDfZ7Pi+mI3dZJuf3sQHHzP75r353pt58xJB+MeFUfxAwVKUccauFplEejG1ZtKYIPAUUursYTPE8AGZTFC/Bm6dqamSji6uGt8/Ds88P3/dP0X6GCFOsIKgqV2KJUZmICwNfbgRqAh/brVvJwimWq99CXqvtZ6910trUQICwEnYxEa8FvDVSaLbbbNIfcz9WmBjM1HVUJuafAdremV9utzJztLNyy2v633dnfS9RtAJNvIkMe/zVWlx9ymRCY1kkCWGYQhhzZRm53V1Z/PeyyXaZGmWkYNiZHVfd8vpuz20tELA8ePukyIRqTtmKFcYY15LmTnG4gkWWjGUiu372zyJ8cbM9Y2+vWWxI2JlQ+Dd4PgC2RiEdNZiLKG0U1E6Hi82RLZRjUtLkZirUtH3QFeoSMaCdOzQrg6yLyGgNtJXK1Lyzbk2MjlnMUI0yiXFXMQGRUm9Vz5ADgoBhbmOOEe2FgM3TaYnBFFOLKcdrbV8o4uZW8jGRgofkQt8KZ8zboYKj+tiDd5lUaLHOaoaAduCJmI2lHcnipeRm85KUZlFycRs2HF/0e3SBhjnwVy7MVHksiTwqaDuuMlGvlHBGzvR9fgprWe1UJG19WuyrPsFZjpuKjLGFYKqMHP829BwML4DTyOvcM4Ff3+0hwytzpV+w3C2nTsU0RftjRgt0TRN+PFzxTUwulr+aSJS7amt2321s+X2Vtd0rWWTORpUxH2T3mfHu548pLUQYY6wRNAIyQCyiGnBSVCVeErVBDQaz8tHFy4dboicLBFCdCCkIYlzVQgltgUv3nl789X7sWlSLRNAjFNCkaGJJKVQYti5COjPeB6e1BzBuHvvn+sYHJmdeOB/M0rf6Mv4cQgTQIxMQWprmYUSk1/yWtAI0KcRQFlqDh1+JiF4biCIEEAMQgQBXbpd0jz7jqHMIVbmIEObVQnrWyHuD8WErHGfmAO2wqLvooktHwSALHH867sSCJAZ7tL6E5BFSmubIoYfxLoma/yj/ZudI6Fl9P+NvwHhdRKV0JgRNgAAAABJRU5ErkJggg==" }, 385: function (e, t, a) { }, 386: function (e, t, a) { }, 387: function (e, t, a) { }, 388: function (e, t, a) { }, 390: function (e, t, a) { }, 391: function (e, t, a) { }, 392: function (e, t, a) { }, 393: function (e, t, a) { }, 394: function (e, t, a) { }, 395: function (e, t, a) { }, 396: function (e, t, a) { }, 397: function (e, t, a) { }, 398: function (e, t, a) { }, 399: function (e, t, a) { }, 400: function (e, t, a) { }, 401: function (e, t, a) { }, 404: function (e, t, a) { }, 406: function (e, t, a) { "use strict"; a.r(t); var n = a(0), s = a.n(n), r = a(14), i = a.n(r), o = a(8), l = a(38), c = (a(201), a(49)), d = a(5), p = a(31), m = a(9), h = a.n(m), u = a(18), g = a(77), b = a(2), f = a.n(b); const k = function (e, t, a, n, s, r, i, o, l) { return function (e) { for (const t in e) { let a = e[t]; for (const e in a.analogs) { let t = a.analogs[e]; void 0 === t.message_config.split_mode && (delete t.message_config.joystick_mode, t.message_config.split_mode = 0) } } }(o), function (e) { for (const t in e) { let a = e[t]; for (const e in a.digitals) { let t = a.digitals[e]; void 0 === t.feedback_config.low_intensity_off_mode && (t.feedback_config.low_intensity_off_mode = 0) } for (const e in a.encoders) { let t = a.encoders[e]; void 0 === t.switch_feedback.low_intensity_off_mode && (t.switch_feedback.low_intensity_off_mode = 0) } } }(o), function (e) { for (const t in e) { let a = e[t]; for (const e in a.encoders) { let t = a.encoders[e]; void 0 === t.rotation_feedback.color_range_enable && (t.rotation_feedback.color_range_enable = 0) } } }(o), function (e) { void 0 === e.dumpStateOnStartup && (e.dumpStateOnStartup = !1), void 0 === e.rememberState && (e.rememberState = !0) }(e), { hwconfig: e, fwVersion: [e.fw_version_major, e.fw_version_minor], hwVersion: [e.hw_version_major, e.hw_version_minor], hwConfigDeviceName: e.device_name, banksButtonsId: e.banksIds, rainbow: e.rainbow, takeover: e.takeover, dumpStateOnStartup: e.dumpStateOnStartup, rememberState: e.rememberState, midiMergeOption: e.midiMergeOption, bankButtonsInUse: t, shifterIdBank: a, shifterIdColor: n, banksModes: e.banksModes, defaultBank: f.a.cloneDeep(s), componentsCount: r, banksNumber: i, banks: o, currentBank: l, currentSerialNumber: e.usb_serial, loading: !1, onHardwareConfig: !1, configLoaded: !0 } }, E = [0, 16], C = function (e) { return void 0 === e || null === e || S(E[0], E[1], e) }, S = function (e, t, a) { return 2 === (null === a || void 0 === a ? void 0 : a.length) && parseInt(a[0], 10) >= e && parseInt(a[1], 10) >= t }, v = () => s.a.createElement("span", { style: { color: "#EEB244", fontWeight: "bold", cursor: "default", margin: "0 15px" } }, "NEW"), y = function (e, t, a) { let n = [e.fw_version_major, e.fw_version_minor]; !C(n) && t(s.a.createElement("span", { className: "snackbarPersistentError" }, "A new firmware is available!", s.a.createElement("br", null), "Please\xa0", s.a.createElement("a", { href: "https://forum.yaeltex.com/t/how-to-update-firmware-for-v2-controllers-using-the-desktop-loader/", target: "_blank", rel: "noopener noreferrer" }, "install it"), " to get the latest features."), { variant: "error", persist: !0, action: e => s.a.createElement("button", { className: "snackbarPersistentErrorDismissButton", onClick: () => { a(e) } }, "Dismiss") }) }, N = (e, t, a) => { let n = t.encoders, s = t.digitals; return "encoders" === e || ("digitals" === e ? a += Object.keys(n).length : "analogs" === e ? a += Object.keys(n).length + Object.keys(s).length : console.log("Unknown element type: ".concat(e))), a.toString().padStart(2, "0") }; var w = window.console || { log: function () { } }; function _(e) { w.log("Could not access midi devices!", e) } function x(e) { navigator.requestMIDIAccess ? navigator.requestMIDIAccess({ sysex: !0 }).then(t => { !function (e, t) { w.log(e); let a = Array.from(e.inputs.values()), n = Array.from(e.outputs.values()); w.log(a), w.log(n), t(a, n, e) }(t, e) }, _) : alert("WebMidiAPI not enabled on this browser!") } var A = a(153), I = a.n(A); window.console; function P(e, t) { const a = URL.createObjectURL(e), n = document.createElement("a"); n.href = a, n.download = t || "download"; const s = () => { setTimeout(() => { URL.revokeObjectURL(a), n.removeEventListener("click", s) }, 150) }; n.addEventListener("click", s, !1), n.click() } var B = window.console || { log: function () { } }; const O = e => 98 === e, M = e => 99 === e, R = e => 100 === e, D = e => 101 === e, T = e => 38 === e, L = e => 6 === e, H = ("".concat(null, " id is already in use by bank ").concat(null, ". Please select another one"), "A device must be selected in preferences menu"), U = "Connection with Server is closed, reconnecting... Please try again later!", F = "Could not send handshake request to device. Select a device from preferences menu."; var V = a(58), j = a.n(V), q = (a(212), a(154)), W = a.n(q); window.console; class K extends s.a.Component { render() { return s.a.createElement("div", { className: "user-landing-page" }, s.a.createElement("div", { id: "user-landing-page-controller-icon-wrapper" }, s.a.createElement("img", { src: W.a, id: "user-landing-page-controller-icon", height: "400px", width: "auto" })), s.a.createElement("div", { id: "user-landing-page-message" }, s.a.createElement("span", null, "Please connect your Yaeltex device or "), s.a.createElement("button", { onClick: () => this.props.onClick(), id: "user-landing-page-load-button" }, "Load from desktop"))) } } var G = K, J = a(155), Q = a.n(J), Y = a(156), X = a.n(Y), Z = a(157), z = a.n(Z), $ = a(158), ee = a.n($), te = (a(213), a(214), a(104)), ae = a.n(te), ne = a(159), se = a.n(ne), re = a(160), ie = a.n(re); window.console; class oe extends s.a.Component { constructor(...e) { super(...e), this.toggleShow = () => { let e = document.getElementById("toolbar__navigation-menu"), t = document.getElementById("controller-menu"); e.classList.contains("show") && (e.classList.toggle("show"), t.classList.toggle("show")) }, this.loadFromAccount = () => { this.toggleShow(), this.props.loadFromAccount() }, this.loadFromController = () => { this.toggleShow(), this.props.loadFromController() }, this.loadFromDesktop = () => { this.toggleShow(), this.props.loadFromDesktop() }, this.loadDefaultConfig = () => { this.toggleShow(), this.props.loadDefaultConfig() }, this.saveToAccount = () => { this.toggleShow(), this.props.saveToAccount() }, this.saveToDesktop = () => { this.toggleShow(), this.props.saveToDesktop() }, this.resetEeprom = () => { this.props.resetEeprom() } } render() { return s.a.createElement("div", { id: "controller-menu", className: "menu-container" }, s.a.createElement("div", { className: "load-config-container" }, s.a.createElement("span", { id: "load-config-label" }, "Load from:"), s.a.createElement("br", null), s.a.createElement("button", { onClick: this.loadFromDesktop }, s.a.createElement("div", { className: "menu-img-container" }, s.a.createElement("img", { src: ae.a, alt: "load-from-desktop" })), "Desktop"), s.a.createElement("button", { onClick: this.loadDefaultConfig }, s.a.createElement("div", { className: "menu-img-container" }, s.a.createElement("img", { src: se.a, alt: "load-default-config" })), "Default Config"), s.a.createElement("button", { onClick: this.loadFromController }, s.a.createElement("div", { className: "menu-img-container" }, s.a.createElement("img", { src: ie.a, alt: "load-from-controller" })), "Controller")), s.a.createElement("div", { className: "save-config-container" }, s.a.createElement("span", { id: "save-config-label" }, "Save to:"), s.a.createElement("br", null), s.a.createElement("button", { onClick: this.saveToDesktop }, s.a.createElement("div", { className: "menu-img-container" }, s.a.createElement("img", { src: ae.a, alt: "save-to-desktop" })), "Desktop")), s.a.createElement("span", { className: "versions" }, this.props.fwVersion && s.a.createElement("span", null, "Firmware v: ", "".concat(this.props.fwVersion[0], ".").concat(this.props.fwVersion[1])), this.props.hwVersion && s.a.createElement("span", null, "Hardware v: ", "".concat(this.props.hwVersion[0], ".").concat(this.props.hwVersion[1]))), C(this.props.fwVersion) || s.a.createElement("span", { className: "newFirmware" }, "A new firmware is available!", s.a.createElement("br", null), "Please\xa0", s.a.createElement("a", { href: "https://forum.yaeltex.com/t/how-to-update-firmware-for-v2-controllers-using-the-desktop-loader/", target: "_blank" }, "install it"), " to get the latest features."), !1, !1) } } var le = oe; a(215), window.console; class ce extends s.a.Component { render() { let e = this.props, t = e.radioGroupName, a = e.id, n = e.label, r = e.value, i = e.radioPos, o = "ytx-radio " + (i && "left" === i ? "left" : "right"); return s.a.createElement("div", { className: o }, s.a.createElement("input", { type: "radio", name: t, id: a, value: r, onChange: this.props.onChange, onClick: this.props.onClick }), s.a.createElement("label", { htmlFor: a }, n)) } } var de = ce; a(216); window.console; class pe extends s.a.Component { constructor(e) { var t; super(e), this.mapDivs = (t = e => e.map((e, t) => { let a = this.props, n = a.radio, r = a.radioGroupName, i = a.radioPos; return n ? s.a.createElement(de, { id: "filter-" + e, radioGroupName: r, key: t, label: e, value: t, onChange: this.handleRadioChange, radioPos: i }) : s.a.createElement("div", { value: e, onClick: a => this.handleSelectItem(a, e, t), key: t }, e) }), function () { var e = Array.prototype.slice.call(arguments); return t.cache = t.cache || {}, t.cache[e] ? t.cache[e] : t.cache[e] = t.apply(this, e) }), this.handleRadioChange = e => { this.toggleShow(), this.props.onChange(e) }, this.handleClick = e => { this.customSelectRef && !this.customSelectRef.contains(e.target) && this.customSelectRef.classList.contains("show-open") && (this.customSelectRef.classList.toggle("show-open"), this.customSelectRef.parentNode.classList.contains("show-open") && this.customSelectRef.parentNode.classList.toggle("show-open"), this.itemsContainerRef.classList.toggle("show-open"), this.itemsRef.classList.toggle("select-hide")) }, this.toggleShow = () => { this.customSelectRef.classList.toggle("show-open"), this.customSelectRef.parentNode.classList.contains("show-open") && this.customSelectRef.parentNode.classList.toggle("show-open"), this.itemsContainerRef.classList.toggle("show-open"), this.itemsRef.classList.toggle("select-hide") }, this.state = { enabled: e.enabled, selectedValue: null, value: this.props.inputNumber ? e.value : null, startEditing: !1, optionsLarge: f.a.range(0, 16384), optionsLargeNegative: f.a.range(-8192, 8192), optionsSmall: f.a.range(0, 128) }, this.handleSelectItem = this.handleSelectItem.bind(this), this.handleShow = this.handleShow.bind(this), this.handleChange = this.handleChange.bind(this), this.handleKeyDown = this.handleKeyDown.bind(this), this.startEditing = this.startEditing.bind(this), this.handleFocusLost = this.handleFocusLost.bind(this), this.renderCategories = this.renderCategories.bind(this) } componentDidMount() { document.addEventListener("mousedown", this.handleClick, !1) } componentWillUnmount() { document.removeEventListener("mousedown", this.handleClick, !1) } fillSelectOptions() { if (this.props.categories) return this.props.categories.map((e, t) => s.a.createElement("div", { value: e.value, key: t }, e.value)); return this.props.options.map((e, t) => { let a = this.props.hiddenIdxs && this.props.hiddenIdxs.includes(t); return s.a.createElement("div", { value: e, onClick: a => this.handleSelectItem(a, e, t), key: t, hidden: a }, e) }) } renderCategories(e, t) { return "divider" === e.category ? s.a.createElement("div", { className: "horizontalDivider" }) : "buttonType" === e.category ? s.a.createElement("div", { className: "ytx-dropdown-category" }, e.value) : s.a.createElement("div", { value: e.value, onClick: a => this.handleSelectItem(a, e.value, t), key: t }, e.value) } fillCustomItems() { if (this.props.categories) return this.props.categories.map((e, t) => this.renderCategories(e, t)); let e = []; return this.props.min || this.props.max ? this.props.min < 0 ? e = [] : (e = this.props.max < 128 ? this.state.optionsSmall : this.state.optionsLarge, e = f.a.slice(e, this.props.min, this.props.max + 1)) : e = this.props.options, this.mapDivs(e) } handleShow(e) { if (this.state.enabled && this.customSelectRef.contains(e.target)) { this.customSelectRef.classList.toggle("show-open"), this.customSelectRef.parentNode.classList.toggle("show-open"); let e = this.customSelectRef.children; if (e[0].classList.toggle("show-open"), e[1].classList.toggle("select-hide"), this.itemsRef) { var t = this.itemsRef.getBoundingClientRect(); t.top >= 0 && t.bottom >= (window.innerHeight || document.documentElement.clientHeight) ? this.itemsRef.classList.add("show-upwards") : this.itemsRef.classList.remove("show-upwards") } } } handleSelectItem(e, t, a) { e.target.parentNode.classList.toggle("select-hide"); let n = e.target.parentNode.previousSibling; this.props.inputNumber ? (n.childNodes[0].value = t, this.setState({ value: t })) : n.innerHTML = t, n.classList.toggle("show-open"), n.parentNode.classList.toggle("show-open"), n.parentNode.parentNode.classList.contains("show-open") && n.parentNode.parentNode.classList.toggle("show-open"), this.props.selectItem && this.props.selectItem(e, t, a), this.setState(() => ({ selectedValue: t })) } handleChange(e) { if ("" === e.target.value) e.target.value = "", this.startEditing(e); else { let t = parseInt(e.target.value); t = this.props.min <= t && t <= this.props.max ? t : t < this.props.min ? this.props.min : this.props.max, e.target.value = t, this.setState({ value: t }), this.props.selectItem && this.props.selectItem(e, t, t) } } handleKeyDown(e) { 13 === e.keyCode && (e.target.blur(), this.handleShow(e)) } startEditing(e) { e.currentTarget.value = "" } handleFocusLost(e) { "" === e.target.value && (e.target.value = this.props.value, "" === this.state.value && (this.setState({ value: this.props.min }), this.props.selectItem && this.props.selectItem(e, this.props.min, this.props.min))) } shouldComponentUpdate(e, t) { return t.selectedValue !== this.state.selectedValue || void 0 !== t.value && t.value !== this.state.value || t.startEditing !== this.state.startEditing || (void 0 !== e.min && e.min !== this.props.min || void 0 !== e.max && e.max !== this.props.max || (void 0 !== e.options && e.options !== this.props.options || (void 0 !== e.placeHolder && e.placeHolder !== this.props.placeHolder || (void 0 !== e.inputNumber && e.inputNumber !== this.props.inputNumber || (void 0 !== e.categories && e.categories !== this.props.categories || void 0 !== e.hiddenIdxs))))) } render() { return s.a.createElement("div", { className: "customm-select", ref: e => this.customSelectRef = e }, s.a.createElement("div", { className: "customm-select-placeholder", onClick: this.handleShow, ref: e => this.itemsContainerRef = e }, this.props.inputNumber && s.a.createElement("input", { type: "number", min: this.props.min, max: this.props.max, step: this.props.step, value: this.props.value, onChange: this.handleChange, onKeyDown: this.handleKeyDown, onClick: this.startEditing, onBlur: this.handleFocusLost }) || this.props.placeHolder), s.a.createElement("div", { className: "select-items select-hide", ref: e => this.itemsRef = e }, this.props.hiddenIdxs ? this.fillSelectOptions() : this.fillCustomItems())) } } var me = pe, he = (a(217), a(161)), ue = a.n(he), ge = a(32), be = a.n(ge), fe = a(33), ke = a.n(fe), Ee = window.console || { log: function () { } }; class Ce extends s.a.Component { constructor(e, t) { super(e, t), this.handleRadioClick = e => { let t = e.target.id; this.setState(e => { let a = this.getRadioStateVar(t); return Ee.log(a + ":" + e[a]), { [a]: !e[a] } }) }, this.onMonitorSwitchClick = () => { let e = document.getElementById("monitor-switch-off-icon"), t = document.getElementById("monitor-switch-on-icon"); e.classList.toggle("monitor-icon-hidden"), t.classList.toggle("monitor-icon-hidden"), this.props.onMidiMonitorToggle() }, this.onRainbowSwitchClick = () => { let e = document.getElementById("rainbow-switch-off-icon"), t = document.getElementById("rainbow-switch-on-icon"); e.classList.toggle("rainbow-icon-hidden"), t.classList.toggle("rainbow-icon-hidden"), this.props.onRainbowToggle() }, this.onRemoteBanksSwitchClick = () => { let e = document.getElementById("remote-banks-switch-off-icon"), t = document.getElementById("remote-banks-switch-on-icon"); e.classList.toggle("remote-banks-icon-hidden"), t.classList.toggle("remote-banks-icon-hidden"), this.props.onRemoteBanksToggle() }, this.onRememberStateSwitchClick = () => { let e = document.getElementById("remember-state-switch-off-icon"), t = document.getElementById("remember-state-switch-on-icon"); e.classList.toggle("remember-state-icon-hidden"), t.classList.toggle("remember-state-icon-hidden"), this.props.onRememberStateToggle() }, this.onDumpStateOnStartupSwitchClick = () => { let e = document.getElementById("dump-state-on-startup-switch-off-icon"), t = document.getElementById("dump-state-on-startup-switch-on-icon"); e.classList.toggle("dump-state-on-startup-icon-hidden"), t.classList.toggle("dump-state-on-startup-icon-hidden"), this.props.onDumpStateOnStartupToggle() }, this.onCaptureSwitchClick = e => { let t = document.getElementById("capture-switch-off-icon"), a = document.getElementById("capture-switch-on-icon"); t.classList.toggle("capture-icon-hidden"), a.classList.toggle("capture-icon-hidden"); let n = !a.classList.contains("capture-icon-hidden"); this.props.onCapture(e, n) }, this.onMidiMergeSwitchClick = (e, t) => { let a = document.getElementById(e.target.id); if (!a) return; let n = a.parentNode.querySelector(".merge-icon-hidden"), s = a.parentNode.querySelector(".merge-icon-show"); n.classList.toggle("merge-icon-hidden"), n.classList.toggle("merge-icon-show"), s.classList.toggle("merge-icon-show"), s.classList.toggle("merge-icon-hidden"), this.props.updateMidiMerge(t) }, this.getMergeSwitchOnClass = e => e ? "merge-icon-show" : "merge-icon-hidden", this.getMergeSwitchOffClass = e => e ? "merge-icon-hidden" : "merge-icon-show", this.state = { inputs: e.inputs, outputs: e.outputs, refreshPorts: !1, midiMonitor: !1, help: !1, activity: !1, input: null, output: null, inputIdx: -1, outputIdx: -1 } } componentWillReceiveProps(e) { this.props.inputs !== e.inputs && this.setState(() => ({ inputs: e.inputs })), this.props.outputs !== e.outputs && this.setState(() => { this.setState(() => ({ outputs: e.outputs })) }) } getRadioStateVar(e) { let t; return "refresh-ports-label" === e || "refresh-ports-radio" === e ? t = "refreshPorts" : "midi-monitor-label" === e || "midi-monitor-radio" === e ? t = "midiMonitor" : "midi-help-label" === e || "midi-help-radio" === e ? t = "help" : "midi-activity-label" !== e && "midi-activity-radio" !== e || (t = "activity"), t } handleInputSelection(e, t) { this.setState({ input: e, inputIdx: t }), Ee.log("input idx:", t), this.props.updateInput(t - 1) } handleOutputSelection(e, t) { this.setState({ output: e, outputIdx: t }), Ee.log("output idx:", t), this.props.updateOutput(t) } render() { let e = this.props, t = e.selectedDevice, a = e.takeoverMode, n = e.takeoverOptions, r = e.rainbow, i = e.remoteBanks, o = e.rememberState, l = e.dumpStateOnStartup, d = e.midiMergeOption, p = e.hiddenDevices, m = Object(c.a)(d, 4), h = m[0], u = m[1], g = m[2], b = m[3]; return p = f.a.map(p, e => e + 1), s.a.createElement("div", { id: "preferences-panel", className: "hardware-preferences-panel" }, s.a.createElement("div", { className: "preferences-body" }, s.a.createElement("div", { className: "preferences-section-container preferences-body-midi_input" }, s.a.createElement("p", { className: "section-title" }, "DEVICES"), s.a.createElement("div", { className: "preferences-body-input-output-container" }, s.a.createElement("div", { className: "preferences-body-input-output-container__input" }, s.a.createElement(me, { selectItem: (e, t, a) => this.handleInputSelection(t, a), options: ["NONE"].concat(this.state.inputs), hiddenIdxs: p, placeHolder: t || "Device Name", value: t || "Device Name", enabled: !0 })), s.a.createElement("span", { id: "refresh-ports-label" }, "Refresh ports   ", s.a.createElement("img", { id: "refresh-ports-icon", src: ue.a, width: "16px", height: "16px", alt: "refresh-ports", onClick: this.props.refreshPorts })))), s.a.createElement("div", { className: "horizontalDivider" }), s.a.createElement("div", { className: "preferences-section-container preferences-body-midi_options" }, s.a.createElement("p", { className: "section-title" }, "CONTROLLER OPTIONS"), s.a.createElement("p", { id: "midi-merge-label", className: "preferences-subsection-label" }, "MIDI MERGE"), s.a.createElement("div", { className: "preferences-subsection-container midi-merge-container" }, s.a.createElement("div", { className: "midi-merge-option-container", onClick: e => this.onMidiMergeSwitchClick(e, 0) }, s.a.createElement("span", { id: "midi-in-midi-out-label", className: "midi-merge-selector" }, "MIDI IN to MIDI OUT"), s.a.createElement("img", { src: ke.a, alt: "midi-in-to-midi-out on", id: "midi-in-midi-out-on-icon", className: "midi-merge-selector merge-on-icon " + this.getMergeSwitchOnClass(h) }), s.a.createElement("img", { src: be.a, alt: "midi-in-to-midi-out off", id: "midi-in-midi-out-off-icon", className: "midi-merge-selector " + this.getMergeSwitchOffClass(h) })), s.a.createElement("div", { className: "midi-merge-option-container", onClick: e => this.onMidiMergeSwitchClick(e, 1) }, s.a.createElement("span", { id: "midi-in-usb-out-label", className: "midi-merge-selector" }, "MIDI IN to USB  OUT"), s.a.createElement("img", { src: ke.a, alt: "midi-in-to-usb-out on", id: "midi-in-usb-out-on-icon", className: "midi-merge-selector merge-on-icon " + this.getMergeSwitchOnClass(u) }), s.a.createElement("img", { src: be.a, alt: "midi-in-to-usb-out off", id: "midi-in-usb-out-off-icon", className: "midi-merge-selector " + this.getMergeSwitchOffClass(u) })), s.a.createElement("div", { className: "midi-merge-option-container", onClick: e => this.onMidiMergeSwitchClick(e, 2) }, s.a.createElement("span", { id: "usb-in-midi-out-label", className: "midi-merge-selector" }, "USB  IN to MIDI OUT"), s.a.createElement("img", { src: ke.a, alt: "usb-in-to-midi-out on", id: "usb-in-midi-out-on-icon", className: "midi-merge-selector merge-on-icon " + this.getMergeSwitchOnClass(g) }), s.a.createElement("img", { src: be.a, alt: "usb-in-to-midi-out off", id: "usb-in-midi-out-off-icon", className: "midi-merge-selector " + this.getMergeSwitchOffClass(g) })), s.a.createElement("div", { className: "midi-merge-option-container", onClick: e => this.onMidiMergeSwitchClick(e, 3) }, s.a.createElement("span", { id: "usb-in-usb-out-label", className: "midi-merge-selector" }, "USB  IN to USB  OUT"), s.a.createElement("img", { src: ke.a, alt: "usb-in-to-usb-out on", id: "usb-in-usb-out-on-icon", className: "midi-merge-selector merge-on-icon " + this.getMergeSwitchOnClass(b) }), s.a.createElement("img", { src: be.a, alt: "usb-in-to-usb-out off", id: "usb-in-usb-out-off-icon", className: "midi-merge-selector " + this.getMergeSwitchOffClass(b) }))), s.a.createElement("div", { className: "preferences-subsection-container" }, s.a.createElement("div", { className: "takeover-container" }, s.a.createElement("span", null, "TAKEOVER MODE"), s.a.createElement(me, { selectItem: (e, t, a) => this.props.onTakeoverSelect(a), options: n, placeHolder: n[a], value: a, enabled: !0 }))), s.a.createElement("div", { className: "preferences-subsection-container" }, s.a.createElement("div", { className: "rainbow-container", onClick: this.onRainbowSwitchClick }, s.a.createElement("span", null, "RAINBOW ON START"), s.a.createElement("img", { src: ke.a, alt: "rainbow on", id: "rainbow-switch-on-icon", className: r ? "" : "rainbow-icon-hidden" }), s.a.createElement("img", { src: be.a, alt: "rainbow off", id: "rainbow-switch-off-icon", className: r ? "rainbow-icon-hidden" : "" }))), S(0, 16, this.props.fwVersion) && s.a.createElement("div", { className: "preferences-subsection-container", id: "remember-state" }, s.a.createElement("div", { className: "remember-state-container", onClick: this.onRememberStateSwitchClick }, s.a.createElement("span", null, "REMEMBER STATE"), v(), s.a.createElement("img", { src: ke.a, alt: "remember state on", id: "remember-state-switch-on-icon", className: o ? "" : "remember-state-icon-hidden" }), s.a.createElement("img", { src: be.a, alt: "remember state off", id: "remember-state-switch-off-icon", className: o ? "remember-state-icon-hidden" : "" }))), S(0, 16, this.props.fwVersion) && s.a.createElement("div", { className: "preferences-subsection-container", id: "dump-state-on-startup" }, s.a.createElement("div", { className: "dump-state-on-startup-container", onClick: this.onDumpStateOnStartupSwitchClick }, s.a.createElement("span", null, "DUMP STATE ON START"), v(), s.a.createElement("img", { src: ke.a, alt: "remember state on", id: "dump-state-on-startup-switch-on-icon", className: l ? "" : "dump-state-on-startup-icon-hidden" }), s.a.createElement("img", { src: be.a, alt: "remember state off", id: "dump-state-on-startup-switch-off-icon", className: l ? "dump-state-on-startup-icon-hidden" : "" }))), s.a.createElement("div", { className: "preferences-subsection-container", id: "remote-banks" }, s.a.createElement("div", { className: "remote-banks-container", onClick: this.onRemoteBanksSwitchClick }, s.a.createElement("span", null, "REMOTE BANKS"), s.a.createElement("img", { src: ke.a, alt: "remote banks on", id: "remote-banks-switch-on-icon", className: i ? "" : "remote-banks-icon-hidden" }), s.a.createElement("img", { src: be.a, alt: "remote banks off", id: "remote-banks-switch-off-icon", className: i ? "remote-banks-icon-hidden" : "" })))), s.a.createElement("div", { className: "horizontalDivider" }), s.a.createElement("div", { className: "preferences-section-container preferences-body-monitor preferences-body-kilowhat-options" }, s.a.createElement("p", { className: "section-title" }, "KILOWHAT OPTIONS"), s.a.createElement("div", { className: "midi-monitor-container", onClick: this.onMonitorSwitchClick }, s.a.createElement("span", { id: "midi-monitor-label" }, "MIDI MONITOR"), s.a.createElement("img", { src: ke.a, alt: "monitor on", id: "monitor-switch-on-icon", className: "monitor-icon-hidden" }), s.a.createElement("img", { src: be.a, alt: "monitor off", id: "monitor-switch-off-icon" })), s.a.createElement("div", { className: "midi-capture-container", onClick: this.onCaptureSwitchClick }, s.a.createElement("span", { id: "midi-capture-label" }, "AUTO SELECT CARD"), s.a.createElement("img", { src: ke.a, alt: "capture on", id: "capture-switch-on-icon", className: "capture-icon-hidden" }), s.a.createElement("img", { src: be.a, alt: "capture off", id: "capture-switch-off-icon" }))))) } } var Se = Ce, ve = (a(218), a(455)), ye = a(162), Ne = a.n(ye); class we extends s.a.Component { constructor(e) { super(e), this.state = { showValueToColorHelp: !1 } } toggle() { this.setState({ showValueToColorHelp: !this.state.showValueToColorHelp }) } render() { return s.a.createElement(ve.a, { open: this.state.showValueToColorHelp, maxWidth: "md", onClose: () => this.toggle() }, s.a.createElement("img", { alt: "Value to color", src: Ne.a })) } } var _e = we; class xe extends s.a.Component { constructor(e) { super(e), this.colorMappingHelp = s.a.createRef() } render() { return s.a.createElement("div", { id: "help-menu" }, s.a.createElement(_e, { ref: this.colorMappingHelp }), s.a.createElement("ul", { id: "help-links-container" }, s.a.createElement("li", { id: "help-manual", className: "help-links" }, s.a.createElement("a", { id: "help-manual-link", className: "help-link", href: "http://docs.google.com/document/d/13jk2V8_aGEV3KC9KqYWe2OicseXhESRUln3eTYHGY6o/", target: "_blank", rel: "noopener noreferrer" }, "Manual")), s.a.createElement("li", { className: "help-links" }, s.a.createElement("a", { href: "#", className: "help-link", onClick: () => { var e; return null === (e = this.colorMappingHelp.current) || void 0 === e ? void 0 : e.toggle() } }, "Color mapping")), s.a.createElement("li", { id: "help-manual", className: "help-links" }, s.a.createElement("button", { id: "help-video-button", className: "help-link", onClick: this.props.onShowIntroVideo }, "Video Intro")))) } } var Ae = xe; window.console; class Ie extends n.Component { constructor(...e) { super(...e), this.handleClick = e => { let t = document.getElementById("preferences"), a = document.getElementById("help"), n = document.getElementById("help-menu"), s = document.getElementById("preferences-panel"), r = document.getElementById("config-panel"), i = document.getElementById("toolbar__navigation-menu"), o = document.getElementById("controller-menu"), l = document.getElementById("filter-select"); this.prefsButtonRef.contains(e.target) || this.prefsPanelRef.contains(e.target) || (t.classList.contains("show") && (t.classList.toggle("show"), r && r.classList.toggle("no-overlap"), l && l.classList.toggle("no-overlap")), s.classList.contains("show") && s.classList.toggle("show")), this.helpButtonRef.contains(e.target) || this.prefsPanelRef.contains(e.target) || (a.classList.contains("show") && (a.classList.toggle("show"), n.classList.toggle("show"), t.classList.toggle("hidden"), r && r.classList.toggle("no-overlap"), l && l.classList.toggle("no-overlap")), s.classList.contains("show") && s.classList.toggle("show")), this.menuButtonRef.contains(e.target) || this.menuPanelRef.contains(e.target) || i.classList.contains("show") && (i.classList.toggle("show"), o.classList.toggle("show")) } } componentWillMount() { document.addEventListener("mousedown", this.handleClick, !1) } componentWillUnmount() { document.removeEventListener("mousedown", this.handleClick, !1) } handleShow(e) { let t = document.getElementById("config-panel"), a = document.getElementById("filter-select"); t && t.classList.toggle("no-overlap"), a && a.classList.toggle("no-overlap"), document.getElementById("preferences").classList.toggle("show"), document.getElementById("preferences-panel").classList.toggle("show") } handleShowHelp(e) { let t = document.getElementById("config-panel"), a = document.getElementById("filter-select"); t && t.classList.toggle("no-overlap"), a && a.classList.toggle("no-overlap"), document.getElementById("help").classList.toggle("show"), document.getElementById("help-menu").classList.toggle("show"), document.getElementById("preferences").classList.toggle("hidden") } handleShowMenu(e) { document.getElementById("toolbar__navigation-menu").classList.toggle("show"), document.getElementById("controller-menu").classList.toggle("show") } render() { let e = this.props.selectedDevice; return s.a.createElement("header", { className: "toolbar" }, s.a.createElement("nav", { className: "toolbar__navigation" }, s.a.createElement("div", null), s.a.createElement("div", { className: "toolbar__logo" }, s.a.createElement("a", { href: "/" }, s.a.createElement("img", { src: Q.a, alt: "LOGO", width: "169", height: "auto" }))), s.a.createElement("div", { className: "dividerContainer" }, s.a.createElement("div", { className: "verticalDivider" })), s.a.createElement("div", { id: "toolbar__navigation-menu", className: "toolbar__navigation-items", ref: e => this.menuPanelRef = e }, s.a.createElement("a", { id: "controller-menu-btn", onClick: this.handleShowMenu, ref: e => this.menuButtonRef = e }, s.a.createElement("img", { src: X.a, alt: "Usuario" }), s.a.createElement("span", null, " ", e || "Device Name", " ", s.a.createElement("i", { className: "chevron-arrow downn" }))), s.a.createElement(le, { clickHardwareConfig: this.props.clickHardwareConfig, loadFromDesktop: this.props.loadFromDesktop, loadDefaultConfig: this.props.loadDefaultConfig, loadFromController: this.props.loadFromController, resetEeprom: this.props.resetEeprom, saveToDesktop: this.props.saveToDesktop, fwVersion: this.props.fwVersion, hwVersion: this.props.hwVersion })), s.a.createElement("div", { className: "spacer" }), s.a.createElement("div", { className: "right-nav", ref: e => this.prefsPanelRef = e }, s.a.createElement("a", { id: "preferences", onClick: this.handleShow, ref: e => this.prefsButtonRef = e }, s.a.createElement("img", { src: z.a, alt: "PREFERENCES" }), s.a.createElement("span", null, " Preferences ", s.a.createElement("i", { className: "chevron-arrow downn" }))), s.a.createElement(Se, { fwVersion: this.props.fwVersion, inputs: this.props.inputs, hiddenDevices: this.props.hiddenDevices, selectedDevice: e, outputs: this.props.outputs, updateInput: this.props.updateInput, updateOutput: this.props.updateOutput, refreshPorts: this.props.refreshPorts, updateMidiMerge: this.props.updateMidiMerge, onCapture: this.props.onCapture, onMidiMonitorToggle: this.props.onMidiMonitorToggle, onTakeoverSelect: this.props.onTakeoverSelect, onRainbowToggle: this.props.onRainbowToggle, onRemoteBanksToggle: this.props.onRemoteBanksToggle, takeoverOptions: this.props.takeoverOptions, takeoverMode: this.props.takeoverMode, rainbow: this.props.rainbow, remoteBanks: this.props.remoteBanks, rememberState: this.props.rememberState, onRememberStateToggle: this.props.onRememberStateToggle, dumpStateOnStartup: this.props.dumpStateOnStartup, onDumpStateOnStartupToggle: this.props.onDumpStateOnStartupToggle, midiMergeOption: this.props.midiMergeOption }), s.a.createElement("a", { id: "help", onClick: this.handleShowHelp, ref: e => this.helpButtonRef = e }, s.a.createElement("img", { src: ee.a, alt: "HELP" }), s.a.createElement("span", null, "Help", s.a.createElement("i", { className: "chevron-arrow downn" }))), s.a.createElement(Ae, { onShowIntroVideo: this.props.onShowIntroVideo })))) } } var Pe = Ie, Be = a(447), Oe = a(450), Me = a(445), Re = a(446), De = a(448), Te = a(449), Le = a(412); const He = Object(o.a)(e => ({ head: { fontFamily: ["Karla", "sans-serif"].join(","), fontWeight: "bolder", fontSize: 15, color: e.palette.common.white, textAlign: "center", paddingTop: 0, paddingBottom: 0, backgroundColor: "#4d4d4d" }, body: { border: "none", fontFamily: ["Karla", "sans-serif"].join(","), fontSize: 14, color: e.palette.common.white, paddingTop: "0.5em", paddingBottom: "0.5em" } }))(Me.a); window.console; class Ue extends s.a.Component { render() { let e = this.props, t = e.rows, a = e.classes; return s.a.createElement(Re.a, { component: Le.a, className: a.rounded }, s.a.createElement(Be.a, { stickyHeader: !0, className: a.table, "aria-label": "customized table" }, s.a.createElement(De.a, null, s.a.createElement(Te.a, null, s.a.createElement(He, null, "TIMESTAMP"), s.a.createElement(He, null, "SOURCE"), s.a.createElement(He, null, "CH"), s.a.createElement(He, null, "MESSAGE"), s.a.createElement(He, null, "PARAM"), s.a.createElement(He, null, "VALUE"))), s.a.createElement(Oe.a, { className: a.bodyRoot }, t.map((e, t) => s.a.createElement(Te.a, { key: e.name + t }, s.a.createElement(He, { align: "left" }, e.timestamp), s.a.createElement(He, { component: "th", scope: "row", align: "left" }, e.name), s.a.createElement(He, { align: "center" }, e.channel), s.a.createElement(He, { align: "center" }, e.type), s.a.createElement(He, { align: "center" }, e.param), s.a.createElement(He, { align: "center" }, e.value)))))) } } var Fe = Object(o.a)({ table: { width: "100%", backgroundColor: "#4d4d4d", paddingRight: "0.5em", paddingLeft: "0.5em" }, rounded: { borderRadius: 0, borderBottom: "5px solid #EEB244", maxHeight: "300px" }, bodyRoot: { maxHeight: "300px" } })(Ue), Ve = a(163), je = a.n(Ve), qe = a(164), We = a.n(qe), Ke = a(165), Ge = a.n(Ke), Je = a(166), Qe = a.n(Je); a(219); const Ye = "PB"; window.console; class Xe extends s.a.Component { constructor(...e) { super(...e), this.onOpenMidiMonitor = () => { let e = document.getElementById("monitor-toggle"), t = document.getElementById("monitor-table-container"); e.classList.toggle("arrow-right"), e.classList.toggle("arrow-up"), t.classList.toggle("monitor-closed") } } render() { let e = this.props.monitorData[0], t = this.props, a = t.deviceLinked, n = t.configInSync, r = ["-", Ye].includes(e.type) ? "" : e.param, i = "PC" !== e.type ? "/ " + e.value.toString() : ""; return s.a.createElement("footer", null, s.a.createElement("div", { className: "footer-container" }, s.a.createElement("div", { className: "footer-status-monitor", onClick: this.onOpenMidiMonitor }, s.a.createElement("div", { id: "monitor-table-container", className: "monitor-closed" }, s.a.createElement(Fe, { rows: this.props.monitorData })), s.a.createElement("span", { id: "monitor-toggle", className: "arrow-right" }), s.a.createElement("span", { id: "monitor-device-name" }, e.name, " / "), s.a.createElement("span", { id: "monitor-device-channel" }, "CH ", e.channel, " / "), s.a.createElement("span", { id: "monitor-device-note" }, e.type + " " + r.toString(), " "), s.a.createElement("span", { id: "monitor-device-note-value" }, i, " ")), s.a.createElement("div", { className: "footer-connectivity-container" }, n ? s.a.createElement("img", { className: "controller-footer-icon", src: je.a, width: "35px", height: "auto", alt: "sync on" }) : s.a.createElement("img", { className: "controller-footer-icon", src: We.a, width: "35px", height: "auto", alt: "sync off" }), a ? s.a.createElement("img", { className: "controller-footer-icon", src: Ge.a, width: "35px", height: "auto", alt: "link on" }) : s.a.createElement("img", { className: "controller-footer-icon", src: Qe.a, width: "35px", height: "auto", alt: "link off" })), s.a.createElement("a", { className: "footer-send-button", onClick: this.props.sendToDevice }, "Send to device >"))) } } var Ze = Xe; a(220); const ze = e => /^[\x00-\x1f]*$/.test(e); var $e = window.console || { log: function () { } }; class et extends s.a.Component { constructor(e, t) { super(e, t), this.state = { value: e.placeHolder, maxLength: e.maxLength }, this.changeValue = this.changeValue.bind(this) } static getDerivedStateFromProps(e, t) { return e.placeHolder !== t.value && e.ks || e.placeHolder !== t.value && e.comment ? { value: e.placeHolder, maxLength: e.maxLength } : { value: t.value, maxLength: e.maxLength } } changeValue(e) { var t; ($e.log("max length:", this.state.maxLength), e.target.value.length > this.state.maxLength) || (!this.props.enforce_ascii || (t = e.target.value, /^[\x00-\x7F]*$/.test(t)) ? (this.props.enforce_ascii && "" === e.target.value && (e.target.value = "\0"), this.setState({ value: e.target.value }), this.props.selectItem && this.props.selectItem(e, e.target.value, e.target.value)) : alert("Only ascii is allowed for Keystroke inputs")) } render() { return s.a.createElement("div", { className: "custom-text-field" }, s.a.createElement("input", { type: "text", placeholder: this.props.ks && ze(this.state.value) ? "NONE" : this.state.value, onChange: this.changeValue, value: this.props.ks && ze(this.state.value) ? "" : this.state.value })) } } var tt = et, at = (a(221), window.console || { log: function () { } }); class nt extends s.a.Component { constructor(e) { super(e), this.digitalOptions = ["NONE", "RB41", "RB42", "RB82", "ARC30_41"], this.encoderOptions = ["NONE", "ENC41H", "ENC41V", "ENC41H_D", "ENC41V_D"], this.analogOptions = ["NONE", "F41", "P41", "JAL", "JAF"], this.feedbackOptions = ["NONE", "A1-1", "A1-2", "A1-3", "A1-4", "A1-5", "A1-6", "A1-7", "A1-8", "A2-1", "A2-2", "A2-3", "A2-4", "A2-5", "A2-6", "A2-7", "A2-8", "A3-1", "A3-2", "A3-3", "A3-4", "A3-5", "A3-6", "A3-7", "A3-8", "A4-1", "A4-2", "A4-3", "A4-4", "A4-5", "A4-6", "A4-7", "A4-8"], this.numberOfCards = { ENC41H: 4, ENC41V: 4, ENC41H_D: 4, ENC41V_D: 4, RB41: 4, RB42: 8, RB82: 16, ARC30_41: 4, F41: 4, P41: 4, JAL: 2, JAF: 2 }, this.optionsMap = { digital: this.digitalOptions, encoder: this.encoderOptions, analog: this.analogOptions, feedback: this.feedbackOptions }, this.state = { configHwMapping: { digital1: Array.apply("RB41", { length: 8 }).map((e, t) => "NONE"), digital2: Array.apply("RB41", { length: 8 }).map((e, t) => "NONE"), encoders: Array.apply("ENC41V", { length: 8 }).map((e, t) => "NONE"), analog1: Array.apply(null, { length: 8 }).map((e, t) => "NONE"), analog2: Array.apply(null, { length: 8 }).map((e, t) => "NONE"), analog_exp1: Array.apply(null, { length: 8 }).map((e, t) => "NONE"), analog_exp2: Array.apply(null, { length: 8 }).map((e, t) => "NONE"), feedbacks: Array.apply("A1-1", { length: 8 }).map((e, t) => "NONE"), device_name: "", usb_pid: "", usb_serial: "" }, digital1: [!0, !0, !0, !0, !0, !0, !0, !0], digital2: [!0, !0, !0, !0, !0, !0, !0, !0], encoders: [!0, !0, !0, !0, !0, !0, !0, !0], analog1: [!0, !0, !0, !0, !0, !0, !0, !0], analog2: [!0, !0, !0, !0, !0, !0, !0, !0], analog_exp1: [!0, !0, !0, !0, !0, !0, !0, !0], analog_exp2: [!0, !0, !0, !0, !0, !0, !0, !0], feedbacks: [!0, !0, !0, !0, !0, !0, !0, !0] }, this.maxSlotsPerAnalogColumn = 2, this.slotsNumber = 8, this.handleItemSelect = this.handleItemSelect.bind(this), this.updateProperty = this.updateProperty.bind(this) } fillGridRow(e, t) { let a = this.optionsMap[e]; return Array.apply(null, { length: this.slotsNumber }).map((e, n) => s.a.createElement("td", null, s.a.createElement(me, { options: a, placeHolder: a[0], key: n, selectItem: (e, a, s) => this.handleItemSelect(e, a, n, s, t), enabled: this.state[t][n] }))) } handleItemSelect(e, t, a, n, s) { at.log(t), at.log(a), at.log(n), at.log(s), this.analogOptions.includes(t) && (at.log(this.state.analog1), a < 7 && this.setState(e => ({ [s]: e[s].map((e, n) => a + 1 === n ? 4 !== this.numberOfCards[t] : e) }))), this.setState(e => { let n = Object(d.a)({}, e.configHwMapping); return n[s][a] = t, { configHwMapping: n } }) } updateProperty(e, t, a, n) { if ("usb_pid" === n) { parseInt(t, 16) } this.setState(e => { let a = Object(d.a)({}, e.configHwMapping); return a[n] = t, { configHwMapping: a } }) } render() { let e = this.props, t = e.deviceName, a = e.devicePid, n = e.deviceSerial; return s.a.createElement("div", { className: "hw-wrapper" }, s.a.createElement("table", null, s.a.createElement("caption", null, "HARDWARE CONFIGURATION", s.a.createElement("div", { id: "ytx-device-name-input", className: "config-input-element" }, s.a.createElement("span", null, "NAME"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: t, selectItem: (e, t, a) => this.updateProperty(e, t, a, "device_name"), maxLength: 15 })), s.a.createElement("div", { id: "ytx-usb-pid-input", className: "config-input-element" }, s.a.createElement("span", null, "PID"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: a, selectItem: (e, t, a) => this.updateProperty(e, t, a, "usb_pid"), maxLength: 4 })), s.a.createElement("div", { id: "ytx-usb-serial-input", className: "config-input-element" }, s.a.createElement("span", null, "SERIAL"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: n, selectItem: (e, t, a) => this.updateProperty(e, t, a, "usb_serial"), maxLength: 9 })), s.a.createElement("i", { id: "exit-hardware-config", onClick: this.props.click }, "X")), s.a.createElement("tbody", null, s.a.createElement("tr", { className: "hw-table-headers" }, s.a.createElement("th", null, "Position"), s.a.createElement("td", null, "1"), s.a.createElement("td", null, "2"), s.a.createElement("td", null, "3"), s.a.createElement("td", null, "4"), s.a.createElement("td", null, "5"), s.a.createElement("td", null, "6"), s.a.createElement("td", null, "7"), s.a.createElement("td", null, "8")), s.a.createElement("tr", { className: "hw-io" }, s.a.createElement("th", null, "DIGITAL 1"), this.fillGridRow("digital", "digital1")), s.a.createElement("tr", { className: "hw-io" }, s.a.createElement("th", null, "DIGITAL 2"), this.fillGridRow("digital", "digital2")), s.a.createElement("tr", { className: "hw-io" }, s.a.createElement("th", null, "ENCODERS"), this.fillGridRow("encoder", "encoders")), s.a.createElement("tr", { className: "hw-io" }, s.a.createElement("th", { rowSpan: 2 }, "ANALOG"), this.fillGridRow("analog", "analog1")), s.a.createElement("tr", { className: "hw-io" }, this.fillGridRow("analog", "analog2")), s.a.createElement("tr", { className: "hw-io disabled" }, s.a.createElement("th", { rowSpan: 2 }, "ANALOG EXP"), this.fillGridRow("analog", "analog_exp1")), s.a.createElement("tr", { className: "hw-io disabled" }, this.fillGridRow("analog", "analog_exp2")), s.a.createElement("tr", { className: "hw-io" }, s.a.createElement("th", null, "FEEDBACK"), this.fillGridRow("feedback", "feedbacks")))), s.a.createElement("div", { id: "hardware-config-apply-container" }, s.a.createElement("a", { id: "hardware-config-button", onClick: e => this.props.configHW(e, this.state.configHwMapping) }, "CONFIGURE"))) } } var st = nt, rt = (a(222), a(167)), it = a.n(rt), ot = a(168), lt = a.n(ot), ct = a(169), dt = a.n(ct); const pt = { 0: "NONE", 1: "NOTE", 2: "CC", 3: "VU CC", 4: "PC +/-", 5: "NRPN", 6: "RPN", 7: "PB", 8: "KS" }, mt = { 0: "NOTE", 1: "CC", 2: "PC #", 3: "PC +", 4: "PC -", 5: "NRPN", 6: "RPN", 7: "PB", 8: "KS" }, ht = { 0: "NONE", 1: "NOTE", 2: "CC", 3: "PC #", 4: "PC -", 5: "PC +", 6: "NRPN", 7: "RPN", 8: "PB", 9: "KS" }, ut = { 0: "NONE", 1: "NOTE", 2: "CC", 3: "PC #", 4: "PC -", 5: "PC +", 6: "NRPN", 7: "RPN", 8: "PB", 9: "KS" }, gt = { 0: "NONE", 1: "USB", 2: "MIDI", 3: "MIDI+USB" }, bt = { NONE: "NONE", "MIDI+USB": "MIDI+USB", "M|U": "MIDI+USB", "M|": "MIDI+USB", USB: "USB", MIDI: "MIDI" }, ft = { KS: "KEY STROKE", PB: "PITCH BEND" }; var kt = window.console || { log: function () { } }; class Et extends s.a.Component { constructor(e) { super(e), this.toggleElementSelection = (e, t) => { document.getElementById(e + t.toString()).classList.toggle("element-selected") }, this.getComponentStruct = e => "encoder" === e ? this.state.encodersSelected : "analog" === e ? this.state.analogsSelected : "digital" === e ? this.state.digitalsSelected : new Set([]), this.getSelectedElementsStateKey = e => e ? e + "sSelected" : "encodersSelected", this.unselectComponents = e => { let t = this.getComponentStruct(e); if (0 !== t.size) { var a, n = Object(p.a)(t.entries()); try { for (n.s(); !(a = n.n()).done;) { let t = Object(c.a)(a.value, 2), n = (t[0], t[1]); this.toggleElementSelection(e, n) } } catch (s) { n.e(s) } finally { n.f() } } }, this.isElementedSelected = (e, t) => document.getElementById(e + t.toString()).classList.contains("element-selected"), this.selectElementsBetween = (e, t, a) => { let n = new Set([]); if (null === t && (t = 0), a < t) { var s = [a, t]; t = s[0], a = s[1] } let r = f.a.range(t, a + 1); var i, o = Object(p.a)(r); try { for (o.s(); !(i = o.n()).done;) { let t = i.value; this.isElementedSelected(e, t) || (this.toggleElementSelection(e, t), n.add(t)) } } catch (l) { o.e(l) } finally { o.f() } return new Set(r) }, this.getHardwareId = e => e.toString().padStart(2, "0"), this.handleExpandCollapse = this.handleExpandCollapse.bind(this), this.state = { hwconfig: e.hwconfig, maxBanksNumber: e.maxBanksNumber, banksNumber: Object.keys(e.banks).length, banks: e.banks, currentBank: e.currentBank, encoders: Object.keys(e.banks).length ? e.banks[e.currentBank].encoders : null, analogs: Object.keys(e.banks).length ? e.banks[e.currentBank].analogs : null, digitals: Object.keys(e.banks).length ? e.banks[e.currentBank].digitals : null, feedbacks: Object.keys(e.banks).length ? e.banks[e.currentBank].feedbacks : null, currentIdx: null, lastSelectedIdx: null, componentSelectedType: null, encodersSelected: new Set, digitalsSelected: new Set, analogsSelected: new Set, loading: e.loading }, this.midiPortMap = { 0: "None", 1: "USB", 2: "MIDI", 3: "M|U" }, this.handleElementClick = this.handleElementClick.bind(this) } handleElementClick(e, t, a, n) { e && (e.persist(), e.stopPropagation()); let s = this.state.componentSelectedType, r = new Set([]), i = !1, o = !1, l = s === a ? this.state.lastSelectedIdx : 0, c = 0 === this.getComponentStruct(a).size || !e || !(e.ctrlKey || e.metaKey) && !e.shiftKey; e && (e.ctrlKey || e.metaKey || e.shiftKey) ? !e.ctrlKey && !e.metaKey || e.shiftKey ? e.ctrlKey || e.metaKey || !e.shiftKey ? (s && s !== a && this.unselectComponents(s), this.isElementedSelected(a, t) && (o = !0), r = this.selectElementsBetween(a, l, t), o && (this.toggleElementSelection(a, t), r.delete(t))) : (i = !0, this.unselectComponents(s), r = this.selectElementsBetween(a, l, t)) : (s && s !== a && this.unselectComponents(s), this.isElementedSelected(a, t) ? o = !0 : r.add(t), this.toggleElementSelection(a, t)) : (this.unselectComponents(s), this.toggleElementSelection(a, t), r.add(t), i = !0), kt.log("ctrl?", (null === e || void 0 === e ? void 0 : e.ctrlKey) || (null === e || void 0 === e ? void 0 : e.metaKey)), kt.log("shift?", null === e || void 0 === e ? void 0 : e.shiftKey), kt.log("previous Component type:", s), kt.log("current Component type:", a), kt.log("lastIdx:", l), kt.log("idx:", t), kt.log("clear previous selection:", i), kt.log("clear current idx:", o), kt.log("previous selected components:", this.state[this.getSelectedElementsStateKey(s)]), kt.log("selected idxs:", r), kt.log("----------------------------------------"), this.setState(n => { let l = this.getSelectedElementsStateKey(s), d = n[l], p = this.getSelectedElementsStateKey(a); s !== a && (d = new Set([])), (null === e || void 0 === e ? void 0 : e.shiftKey) || (n.lastSelectedIdx = o ? null : t); let m = i ? r : [...n[p], ...r]; n.currentIdx = t, n.componentSelectedType = a, n[l] = d, n[p] = new Set(m), o && n[p].delete(t), r = new Set(n[p]); let h = c && (null === e || void 0 === e ? void 0 : e.shiftKey) ? 0 : t; return this.props.elementSelected(r, a, this.getHardwareId(h), !1, c), n }) } populateEncoders(e, t, a, n) { let r = this.props.banks[this.props.currentBank].encoders; return Array.apply(null, { length: Object.keys(r).length }).map((i, o) => { let l = N("encoders", this.props.banks[this.props.currentBank], o), c = r[o], d = !0; if (null !== e && "" !== e.search) { let t = e.search.trim(); switch (e.type) { case "comment": t = t.toUpperCase(), d = c.rotary_config.comment.toUpperCase().includes(t); break; case "midi_port": t = t.toUpperCase(), d = !1; let e = gt[c.rotary_config.midi_port], a = gt[c.switch_config.midi_port]; Object.keys(bt).includes(t) && (t = bt[t]), d = e.includes(t) || a.includes(t); break; case "channel": let n = c.switch_config.mode; t = (parseInt(t) - 1).toString(), d = c.rotary_config.channel.toString().includes(t) || 0 !== n && c.switch_config.channel.toString().includes(t); break; case "parameter": let s = this.getCardParameter(c.rotary_config, "encoder", c.rotary_config.message), r = this.getCardParameter(c.switch_config, "switch", c.switch_config.message); d = ("" !== s.toString() || "" !== r.toString()) && (s.toString().includes(t) || r.toString().includes(t)); break; case "message": t = t.toUpperCase(); let i = pt[c.rotary_config.message], o = 1 === c.switch_config.mode ? mt[c.switch_config.message] : ""; Object.keys(ft).includes(i) && (i = ft[i]), Object.keys(ft).includes(o) && (o = ft[o]), Object.keys(ft).includes(t) && (t = ft[t]), d = i.includes(t) || o.includes(t) } } return d || this.state.currentIdx !== o || this.setState({ currentIdx: null }), s.a.createElement(Ct, { elementType: "element encoder", hardwareId: l, comment: r[o].rotary_config.comment, port: this.midiPortMap[r[o].rotary_config.midi_port], midiChannel: "CH " + (r[o].rotary_config.channel + 1).toString(), midiMessage: pt[r[o].rotary_config.message] + this.getCardParameter(r[o].rotary_config, "encoder", r[o].rotary_config.message), midiValueMin: this.getCardMin(r[o].rotary_config, "encoder", r[o].rotary_config.message), midiValueMax: this.getCardMax(r[o].rotary_config, "encoder", r[o].rotary_config.message), click: this.handleElementClick, key: o.toString(), idx: o, visible: d, outOfSync: t.includes(o.toString().padStart(2, "0")), blink: a === o && "encoders" === n || void 0, blinked: this.props.lastBlinkIdx === o && "encoders" === this.props.lastBlinkType, hasFeedback: !0 }) }) } populateDigitals(e, t, a, n) { let r = this.props.banks[this.props.currentBank].digitals; return Array.apply(null, { length: Object.keys(r).length }).map((i, o) => { let l = N("digitals", this.props.banks[this.props.currentBank], o), c = !0, d = r[o]; if (null !== e && "" !== e.search) { let t = e.search.trim(); switch (e.type) { case "comment": t = t.toUpperCase(), c = d.action_config.comment.toUpperCase().includes(t); break; case "midi_port": t = t.toUpperCase(), c = !1; let e = gt[d.action_config.midi_port]; Object.keys(bt).includes(t) && (t = bt[t]), c = e.includes(t); break; case "channel": t = (parseInt(t) - 1).toString(), c = d.action_config.channel.toString().includes(t); break; case "parameter": c = this.getCardParameter(d.action_config, "digital", d.action_config.message).toString().includes(t); break; case "message": t = t.toUpperCase(); let a = ht[d.action_config.message]; Object.keys(ft).includes(a) && (a = ft[a]), c = a.includes(t) } } return c || this.state.currentIdx !== o || this.setState({ currentIdx: null }), s.a.createElement(Ct, { elementType: "element digital", hardwareId: l, comment: r[o].action_config.comment, port: this.midiPortMap[r[o].action_config.midi_port], midiChannel: "CH " + (r[o].action_config.channel + 1), midiMessage: ht[r[o].action_config.message] + this.getCardParameter(r[o].action_config, "digital", r[o].action_config.message), midiValueMin: this.getCardMin(r[o].action_config, "digital", r[o].action_config.message), midiValueMax: this.getCardMax(r[o].action_config, "digital", r[o].action_config.message), click: this.handleElementClick, key: o.toString(), idx: o, disabled: r[o].disabled, bank_num: r[o].bank_num, visible: c, outOfSync: t.includes(l), blink: a === o && "digitals" === n || void 0, blinked: this.props.lastBlinkIdx === o && "digitals" === this.props.lastBlinkType, hasFeedback: !0 }) }) } populateAnalogs(e, t, a, n) { let r = this.props.banks[this.props.currentBank].analogs; return Array.apply(null, { length: Object.keys(r).length }).map((i, o) => { let l = N("analogs", this.props.banks[this.props.currentBank], o), c = !0, d = r[o]; if (null !== e && "" !== e.search) { let t = e.search.trim(); switch (e.type) { case "comment": t = t.toUpperCase(), c = d.message_config.comment.toUpperCase().includes(t); break; case "midi_port": t = t.toUpperCase(), c = !1; let e = gt[d.message_config.midi_port]; Object.keys(bt).includes(t) && (t = bt[t]), c = e.includes(t); break; case "channel": t = (parseInt(t) - 1).toString(), c = d.message_config.channel.toString().includes(t); break; case "parameter": c = this.getCardParameter(d.message_config, "analog", d.message_config.message).toString().includes(t); break; case "message": t = t.toUpperCase(); let a = ut[d.message_config.message]; Object.keys(ft).includes(a) && (a = ft[a]), c = a.includes(t) } } return c || this.state.currentIdx !== o || this.setState({ currentIdx: null }), s.a.createElement(Ct, { elementType: "element analog", hardwareId: l, comment: r[o].message_config.comment, port: this.midiPortMap[r[o].message_config.midi_port], midiChannel: "CH " + (r[o].message_config.channel + 1), midiMessage: ut[r[o].message_config.message] + this.getCardParameter(r[o].message_config, "analog", r[o].message_config.message), midiValueMin: this.getCardMin(r[o].message_config, "analog", r[o].message_config.message), midiValueMax: this.getCardMax(r[o].message_config, "analog", r[o].message_config.message), click: this.handleElementClick, key: o.toString(), idx: o, visible: c, outOfSync: t.includes(l), blink: a === o && "analogs" === n || void 0, blinked: this.props.lastBlinkIdx === o && "analogs" === this.props.lastBlinkType, hasFeedback: r[o].has_feedback }) }) } handleExpandCollapse(e) { let t = this.encNavCollapsible.contains(e.target) ? this.encNavCollapsible : this.digNavCollapsible.contains(e.target) ? this.digNavCollapsible : this.anaNavCollapsible; t.classList.toggle("expanded"), t.classList.toggle("collapsed"), t.children[0].classList.toggle("downn"), t.children[0].classList.toggle("right"), t.nextSibling.classList.toggle("collapse"); let a = t.id.split("-")[0]; document.getElementById("element-" + a).classList.toggle("inactive") } static getDerivedStateFromProps(e, t) { return t.banksNumber === Object.keys(e.banks).length && t.loading === e.loading ? null : { currentBank: e.currentBank, encoders: e.banks[e.currentBank].encoders, digitals: e.banks[e.currentBank].digitals, analogs: e.banks[e.currentBank].encoders, feedbacks: e.banks[e.currentBank].feedbacks, loading: e.loading } } getCardParameter(e, t, a) { let n = "encoder" === t ? pt : "digital" === t ? ht : "analog" === t ? ut : "switch" === t ? mt : null; if (null !== n) { let t = n[a]; if (["NOTE", "CC", "VU CC", "PC #"].includes(t)) return e.parameter; if (["NRPN", "RPN"].includes(t)) return e.parameter_msb << 7 | e.parameter_lsb } return "" } getCardMin(e, t, a) { let n = "encoder" === t ? pt : "digital" === t ? ht : "analog" === t ? ut : "switch" === t ? mt : null; if (null !== n) { let t = n[a]; if (["NOTE", "CC", "VU CC", "PC #"].includes(t)) return e.parameter_min; if (["NRPN", "RPN"].includes(t)) return e.parameter_min_msb << 7 | e.parameter_min_lsb } return "" } getCardMax(e, t, a) { let n = "encoder" === t ? pt : "digital" === t ? ht : "analog" === t ? ut : "switch" === t ? mt : null; if (null !== n) { let t = n[a]; if (["NOTE", "CC", "VU CC", "PC #"].includes(t)) return e.parameter_max; if (["NRPN", "RPN"].includes(t)) return e.parameter_max_msb << 7 | e.parameter_max_lsb } return "" } render() { let e = this.props, t = e.filter, a = e.blinkIdx, n = e.blinkType; return s.a.createElement("div", { className: "elements-container" }, s.a.createElement(St, { selectBank: this.props.selectBank, currentBank: this.props.currentBank, banksNumber: this.props.banksNumber, maxBanksNumber: this.state.maxBanksNumber, onChange: this.props.onChange, onSearch: this.props.onSearch }), s.a.createElement("div", { id: "elements-cards-container" }, s.a.createElement("button", { className: "elements-collapsible expanded encoder-collapsible", id: "encoder-clp-btn", onClick: this.handleExpandCollapse, ref: e => this.encNavCollapsible = e }, "Encoders ", s.a.createElement("i", { className: "chevron-arrow downn" })), s.a.createElement("div", { className: "encoders-container" }, Object.keys(this.props.banks).length && this.populateEncoders(t, this.props.outOfSync, a, n)), s.a.createElement("button", { className: "elements-collapsible expanded digital-collapsible", id: "digital-clp-btn", onClick: this.handleExpandCollapse, ref: e => this.digNavCollapsible = e }, "Digitals ", s.a.createElement("i", { className: "chevron-arrow downn" })), s.a.createElement("div", { className: "digitals-container" }, Object.keys(this.props.banks).length && this.populateDigitals(t, this.props.outOfSync, a, n)), s.a.createElement("button", { className: "elements-collapsible expanded analog-collapsible", id: "analog-clp-btn", onClick: this.handleExpandCollapse, ref: e => this.anaNavCollapsible = e }, "Analogs ", s.a.createElement("i", { className: "chevron-arrow downn" })), s.a.createElement("div", { className: "analogs-container" }, Object.keys(this.props.banks).length && this.populateAnalogs(t, this.props.outOfSync, a, n)))) } } class Ct extends s.a.Component { constructor(e) { super(e), this.elementType = e.elementType, this.componentType = e.elementType.split(" ")[1] } render() { let e = "digital" === this.componentType && this.props.disabled, t = this.props.bank_num, a = this.elementType, n = this.props.blink ? "hid blinking" : "hid"; return this.props.visible || (a += " hidden"), this.props.blink && !this.props.blinked && this.props.click(null, this.props.idx, this.componentType, this.props.hardwareId), s.a.createElement("div", { id: this.componentType + this.props.idx.toString(), className: a, onClick: e => this.props.click(e, this.props.idx, this.componentType, this.props.hardwareId) }, s.a.createElement("div", { className: "element-header" }, s.a.createElement("span", { className: n }, this.props.hardwareId), " ", s.a.createElement("span", { className: "element-comment" }, this.props.comment), s.a.createElement("img", { src: dt.a, alt: "Out of Sync", className: "element-sync-icon " + (this.props.outOfSync ? "out-of-sync" : "") })), s.a.createElement("p", { className: "element-midi-message", title: e ? null : this.props.midiMessage }, e ? "BANK" : this.props.midiMessage), s.a.createElement("p", { className: "element-midi-value" }, e ? t : this.props.midiValueMin.toString() + "-" + this.props.midiValueMax.toString()), s.a.createElement("div", { className: "element-port-midi", title: this.props.port }, s.a.createElement("span", { className: "element-port" }, this.props.port), this.props.hasFeedback && s.a.createElement("img", { height: "12px", width: "12px", src: lt.a, alt: "Feedback", className: "element-feedback-icon" }), s.a.createElement("span", { className: "element-midi-channel" }, this.props.midiChannel))) } } class St extends s.a.Component { constructor(e) { super(e), this.state = { currentBank: "bank-" + e.currentBank.toString(), banksNumber: e.banksNumber, maxBanksNumber: e.maxBanksNumber }, this.filterMap = ["channel", "midi_port", "message", "parameter", "comment"], this.handleBankChange = this.handleBankChange.bind(this), this.handleElementToggle = this.handleElementToggle.bind(this) } static getDerivedStateFromProps(e, t) { return t.currentBank === "bank-" + e.currentBank.toString() ? null : { currentBank: "bank-" + e.currentBank.toString() } } handleElementToggle(e, t) { let a = document.getElementById(t); a.classList.toggle("expanded"), a.classList.toggle("collapsed"), a.children[0].classList.toggle("downn"), a.children[0].classList.toggle("right"), a.nextSibling.classList.toggle("collapse"), e.target.classList.toggle("inactive") } handleBankChange(e) { e.currentTarget.classList.toggle("selected"); let t = e.currentTarget.id; document.getElementById(this.state.currentBank).classList.toggle("selected"), this.setState(e => ({ currentBank: t })), this.props.selectBank(t.split("-")[1]) } render() { return s.a.createElement("div", { className: "elements-nav" }, s.a.createElement("div", { className: "elements-nav__banks-container" }, s.a.createElement("span", null, "Banks:"), s.a.createElement("div", { className: "elements-nav__banks-container_banks-nav" }, Array.apply(null, { length: this.props.banksNumber }).map((e, t) => s.a.createElement("a", { key: t, id: "bank-" + t.toString(), className: "bank-btn" + (t === this.props.currentBank ? " selected" : ""), onClick: e => this.handleBankChange(e, t) }, (t + 1).toString())))), s.a.createElement("div", { className: "spacer" }), s.a.createElement("div", { className: "elements-nav__elements-filter-container" }, s.a.createElement("div", { className: "elements-nav__elements-filter-container_elements-nav" }, s.a.createElement("a", { id: "element-encoder", className: "element-btn", onClick: e => this.handleElementToggle(e, "encoder-clp-btn") }, "E"), s.a.createElement("a", { id: "element-digital", className: "element-btn", onClick: e => this.handleElementToggle(e, "digital-clp-btn") }, "D"), s.a.createElement("a", { id: "element-analog", className: "element-btn", onClick: e => this.handleElementToggle(e, "analog-clp-btn") }, "A")), s.a.createElement("div", { id: "filter-select", className: "elements-nav__filter-select" }, s.a.createElement(me, { placeHolder: "Filter", options: ["Midi channel", "Midi port", "Message type", "Parameter", "Comment"], radioGroupName: "filter-components", enabled: !0, onChange: e => this.props.onChange(this.filterMap[e.target.value]), radio: !0, radioPos: "left" })), s.a.createElement("div", { className: "elements-nav__search-container" }, s.a.createElement("input", { type: "text", placeholder: "Search", onChange: e => this.props.onSearch(e.target.value) }), s.a.createElement("img", { src: it.a, height: "15px", width: "15px", alt: "SEARCH" })))) } } var vt = Et, yt = a(170), Nt = a.n(yt), wt = a(171), _t = a.n(wt), xt = a(172); a(385), window.console; class At extends s.a.Component { constructor(e) { super(e), this.handleColorListPick = (e, t, a) => { this.setState({ currentColor: t, currentColorName: e }), this.handleShow(), this.props.handleColorChange(a) }, this.populateColorList = (e, t) => Object.keys(this.props.options).map((a, n) => { let r = f.a.cloneDeep(e), i = this.props.showHex ? "#" + this.props.options[a] : a, o = this.props.options[a]; return r["background-color"] = "#" + o, s.a.createElement("div", { onClick: e => this.handleColorListPick(e, o, n) }, s.a.createElement("span", { className: "ytx-color-picker-color " + this.props.type, style: r }), s.a.createElement("span", { className: "ytx-color-picker-hex", style: t }, i)) }), this.handleColorClick = e => { this.colorPickerContainerRef && !this.colorPickerContainerRef.contains(e.target) && this.colorPickerContainerRef.classList.contains("show-open") && this.handleShow(e) }, this.state = { currentColor: "None", currentColorName: "OFF", defaultPickerColor: "FFFFFF", presetColors: [] }, this.handleColorPick = this.handleColorPick.bind(this), this.handleShow = this.handleShow.bind(this) } static getDerivedStateFromProps(e, t) { if (!e.picker && e.options) { let t = Object.keys(e.options)[e.color]; return { currentColor: e.options[t], currentColorName: t } } let a = []; e.picker && e.options && (a = Object.keys(e.options).map(t => ({ title: t, color: "#" + e.options[t] }))); let n = function (e) { if (!e) return "ffffff"; let t = 0; var a, n = Object(p.a)(e); try { for (n.s(); !(a = n.n()).done;) { let e = a.value; t <<= 8, t |= e } } catch (s) { n.e(s) } finally { n.f() } return ("000000" + t.toString(16)).slice(-6) }(e.color); return n === t.currentColor ? null : { currentColor: n, presetColors: a } } handleColorPick(e) { let t = e.rgb; this.props.handleColorChange([t.r, t.g, t.b]) } handleShow(e) { if (!this.props.picker && this.props.options ? this.colorPickerListRef.classList.toggle("color-list-hidden") : this.colorPickerRef.classList.toggle("color-picker-hidden"), this.colorPickerContainerRef.classList.toggle("show-open"), this.colorPickerContainerRef.parentNode.classList.toggle("show-open"), this.colorPlacerholderRef.classList.toggle("show-open"), this.colorPickerRef) { var t = this.colorPickerRef.getBoundingClientRect(); t.top >= 0 && t.bottom >= (window.innerHeight || document.documentElement.clientHeight) ? this.colorPickerRef.classList.add("show-upwards") : this.colorPickerRef.classList.remove("show-upwards") } } componentDidMount() { document.addEventListener("mousedown", this.handleColorClick, !1) } componentWillUnmount() { document.removeEventListener("mousedown", this.handleColorClick, !1) } render() { const e = "circular" === this.props.type ? { height: "0.8em", width: "0.8em", backgroundColor: "#" + this.state.currentColor, borderRadius: "50%", display: "inline-block" } : "squared" === this.props.type ? { position: "absolute", top: "25%", left: "10%", width: "1.5em", height: "1.5em", backgroundColor: "#" + this.state.currentColor, display: "inline-block" } : {}, t = { position: "absolute", top: "24%" }; let a = this.props.showHex ? "#" + this.state.currentColor : this.state.currentColorName; return s.a.createElement("div", { className: "ytx-color-picker-container", id: this.props.id, ref: e => this.colorPickerContainerRef = e }, s.a.createElement("div", { className: "ytx-color-picker-placeholder", onClick: this.handleShow, ref: e => this.colorPlacerholderRef = e }, "None" !== this.state.currentColor && s.a.createElement("span", { className: "ytx-color-picker-color " + this.props.type, style: e }), this.props.showName && s.a.createElement("span", { className: "ytx-color-picker-hex", style: t }, a)), this.props.picker && s.a.createElement("div", { className: "ytx-color-picker color-picker-hidden", ref: e => this.colorPickerRef = e }, s.a.createElement(xt.SketchPicker, { color: "None" !== this.state.currentColor ? this.state.currentColor : this.state.defaultPickerColor, onChangeComplete: this.handleColorPick, presetColors: this.state.presetColors, disableAlpha: !0 })), !this.props.picker && this.props.options && s.a.createElement("div", { className: "ytx-color-picker-list color-list-hidden", ref: e => this.colorPickerListRef = e }, this.populateColorList(e, t))) } } var It = At; a(386), window.console; class Pt extends s.a.Component { constructor(e) { super(e), this.state = { bank_selected: -1, selected_class: "", on_capture: !1, on_pass_data: !1, on_duplicate: !1, banks: e.banks, maxBanks: 8 }, this.fillBanks = this.fillBanks.bind(this), this.selectBankConfigPanel = this.selectBankConfigPanel.bind(this), this.addBank = this.addBank.bind(this), this.deleteBank = this.deleteBank.bind(this), this.duplicateBank = this.duplicateBank.bind(this), this.passDataToBank = this.passDataToBank.bind(this) } selectBankConfigPanel(e, t) { this.setState(e => { let a = -1; return -1 !== e.bank_selected && (a = e.bank_selected - 1, document.getElementById("ytx-bank-panel-" + a).classList.toggle("selected")), document.getElementById("ytx-bank-panel-" + t).classList.toggle("selected"), this.state.on_pass_data && this.props.passDataToBank(a, t), { bank_selected: t + 1, on_pass_data: !1 } }) } fillBanks() { return Array.apply(null, { length: Object.keys(this.props.banks).length }).map((e, t) => s.a.createElement(Bt, { bank_id: "B" + (t + 1).toString(), bank_num: t, button: this.props.banks[t].button, mode: this.props.banks[t].mode, midi_ch: this.props.banks[t].midi_ch, color: this.props.banks[t].color, buttonOptions: this.props.buttonOptions, selectButton: this.props.bankButtonSelect, selectMidiCh: this.props.bankMidiChSelect, selectColor: this.props.bankColorSelect, selectMode: this.props.bankModeSelect, bankColorOptions: this.props.bankColorOptions, click: e => this.selectBankConfigPanel(e, t), key: t.toString(), idx: t })) } addBank() { Object.keys(this.props.banks).length !== this.state.maxBanks ? this.props.addBank() : alert("Max Banks Reached. Delete other banks if you want to add a new one.") } deleteBank() { -1 !== this.state.bank_selected ? 1 !== Object.keys(this.props.banks).length ? (this.state.bank_selected === Object.keys(this.props.banks).length && this.setState({ bank_selected: -1 }), this.props.deleteBank(this.state.bank_selected)) : alert("Can't delete bank. There must be at least one.") : alert("A bank must be selected first.") } duplicateBank() { -1 !== this.state.bank_selected ? Object.keys(this.props.banks).length !== this.state.maxBanks ? this.props.duplicateBank(this.state.bank_selected) : alert("Can't duplicate bank, maximum number of banks allowed already reached.") : alert("A bank must be selected first.") } passDataToBank() { -1 !== this.state.bank_selected ? (alert("Please select target bank."), this.setState({ on_pass_data: !0 })) : alert("Please select source bank first.") } render() { return s.a.createElement("div", { className: "hardware-banks-panel" }, s.a.createElement("span", { className: "sidepanel-title" }, "BANKS    ", s.a.createElement("i", { className: "right" })), s.a.createElement("div", { className: "banks-body" }, s.a.createElement("div", { id: "banks-toolbar" }, s.a.createElement("span", { id: "bank-add", onClick: this.addBank }, "+"), s.a.createElement("a", { id: "bank-copy", onClick: this.duplicateBank }, s.a.createElement("img", { id: "bank-copy-icon", src: Nt.a })), s.a.createElement("a", { id: "bank-copy-to", onClick: this.passDataToBank }, s.a.createElement("img", { id: "bank-copy-to-icon", src: _t.a })), s.a.createElement("div", { className: "spacer" }), s.a.createElement("span", { id: "bank-delete", onClick: this.deleteBank }, "\xd7")), this.fillBanks())) } } class Bt extends s.a.Component { constructor(e) { super(e), this.state = { bank_num: e.bank_num, bank_id: e.bank_id, button: e.button, midi_ch: e.midi_ch, mode: e.mode, color: e.color, on_capture: !1, on_pass_data: !1 }, this.selectButton = this.selectButton.bind(this), this.selectMode = this.selectMode.bind(this), this.selectMidiCh = this.selectMidiCh.bind(this), this.handleColorChange = this.handleColorChange.bind(this) } selectButton(e) { this.setState({ on_capture: "Capture" === e, button: e }), this.props.selectButton(e, this.state.bank_num) } selectMode(e, t) { this.setState({ mode: e }), this.props.selectMode(e, t, this.state.bank_num) } selectMidiCh(e, t) { this.setState({ midi_ch: e }), this.props.selectMidiCh(e, t, this.state.bank_num) } handleColorChange(e) { this.setState({ color: e }), this.props.selectColor(e, this.state.bank_num) } render() { return s.a.createElement("div", { id: "ytx-bank-panel-" + this.props.idx, className: "bank-container", onClick: e => this.props.click(e) }, s.a.createElement("span", { className: "bank-id", onClick: e => this.props.click(e) }, this.state.bank_id), s.a.createElement("div", { className: "bank-panel" }, s.a.createElement("div", { className: "bank-panel-top" }, s.a.createElement("div", { className: "bank-select-button" }, s.a.createElement("span", null, "Button:"), " ", s.a.createElement(me, { categories: this.props.buttonOptions, placeHolder: this.props.button, value: this.props.button, selectItem: (e, t, a) => this.selectButton(t), enabled: !0 })), s.a.createElement("div", { className: "spacer" }), s.a.createElement("div", { className: "bank-select-mode" }, s.a.createElement("span", null, "Mode:"), " ", s.a.createElement(me, { options: ["Momentary", "Toggle"], placeHolder: this.props.mode, value: this.props.mode, selectItem: (e, t, a) => this.selectMode(t, a), enabled: !0 }))), s.a.createElement("div", { className: "bank-panel-divider" }), s.a.createElement("div", { className: "bank-panel-bottom" }, s.a.createElement("div", { className: "bank-select-color" }, s.a.createElement("span", null, "Color:"), s.a.createElement(It, { type: "circular", color: this.props.color ? this.props.color : void 0, picker: !0, options: this.props.bankColorOptions, handleColorChange: this.handleColorChange })), s.a.createElement("div", { className: "spacer" }), s.a.createElement("div", { className: "bank-select-midich" }, s.a.createElement("span", null, "Midi CH:"), " ", s.a.createElement(me, { options: ["None", ...f.a.range(1, 17)], placeHolder: this.props.midi_ch, value: this.props.midi_ch, selectItem: (e, t, a) => this.selectMidiCh(t, a), enabled: !0 }))))) } } var Ot = Pt; a(387), a(388), a(389); const Mt = ["NONE", "NOTE", "CC", "VUMETER CC", "PROGRAM CHANGE +/-", "NRPN", "RPN", "PITCH BEND", "KEYSTROKE"], Rt = ["NONE", "USB", "MIDI", "MIDI+USB"]; window.console; class Dt extends s.a.Component { constructor(e) { super(e), this.state = { idx: e.idx, parameter: e.rotaryConfig.parameter, parameterMin: e.rotaryConfig.parameter_min, parameterMax: e.rotaryConfig.parameter_max, parameterMSBMin: e.rotaryConfig.parameter_min_msb, parameterMSBMax: e.rotaryConfig.parameter_max_msb, parameterLSBMin: e.rotaryConfig.parameter_min_lsb, parameterLSBMax: e.rotaryConfig.parameter_max_lsb, parameterMSB: e.rotaryConfig.parameter_msb, parameterLSB: e.rotaryConfig.parameter_lsb, midiChannelOptions: f.a.range(1, 17), midiChannel: e.rotaryConfig.channel, midiChannelMin: 1, midiChannelMax: 16, midiPort: e.rotaryConfig.midi_port, comment: e.rotaryConfig.comment, modifierLeftOptions: ["NONE", "ALT", "CTRL/CMD", "SHIFT"], modifierLeft: e.rotaryConfig.modifier_left, modifierRightOptions: ["NONE", "ALT", "CTRL/CMD", "SHIFT"], modifierRight: e.rotaryConfig.modifier_right, keyLeftOptions: [], keyLeft: e.rotaryConfig.key_left, keyRightOptions: [], keyRight: e.rotaryConfig.key_right, currentMessage: e.rotaryConfig.message, renderByMessage: { port: ["NOTE", "CC", "VUMETER CC", "PROGRAM CHANGE +/-", "NRPN", "RPN", "PITCH BEND"], channel: ["NOTE", "CC", "VUMETER CC", "PROGRAM CHANGE +/-", "NRPN", "RPN", "PITCH BEND"], parameter: ["NOTE", "CC", "VUMETER CC"], parameter_min_max: ["NOTE", "CC", "VUMETER CC", "PITCH BEND", "PROGRAM CHANGE +/-"], parameter_bytes: ["NRPN", "RPN"], parameter_bytes_min_max: ["NRPN", "RPN"], modifier_left: ["KEYSTROKE"], key_left: ["KEYSTROKE"], modifier_right: ["KEYSTROKE"], key_right: ["KEYSTROKE"], comment: ["NOTE", "CC", "VUMETER CC", "PROGRAM CHANGE +/-", "NRPN", "RPN", "PITCH BEND", "KEYSTROKE"] } }, this.handleCollapse = this.handleCollapse.bind(this), this.handleMessageType = this.handleMessageType.bind(this), this.updateProperty = this.updateProperty.bind(this) } canRender(e) { let t = Mt[this.props.rotaryConfig.message]; return "none" !== t.toLowerCase() && this.state.renderByMessage[e].includes(t) } handleCollapse(e) { e.target.classList.toggle("expanded"), e.target.classList.toggle("collapsed"); let t = e.target.childNodes.length; e.target.childNodes[t - 1].classList.toggle("downn"), e.target.childNodes[t - 1].classList.toggle("right"), e.target.nextSibling.classList.toggle("collapse") } handleMessageType(e, t, a, n) { this.setState(() => ({ [n]: Mt.indexOf(t) })) } updateProperty(e, t, a, n, s) { let r = Mt[this.props.rotaryConfig.message], i = t; if ("currentMessage" === n && (i = Mt.indexOf(t)), ("parameter_min" === s || "parameter_max" === s) && "PITCH BEND" === r) { let a = 0, n = 0; return a = t + 8192 & 127, n = (t + 8192 & 16256) >> 7, void ("parameter_min" === s ? (this.props.handlePropertyUpdate(e, a, a, this.props.propId, "parameter_min_lsb", "encoders"), this.props.handlePropertyUpdate(e, n, n, this.props.propId, "parameter_min_msb", "encoders")) : "parameter_max" === s && (this.props.handlePropertyUpdate(e, a, a, this.props.propId, "parameter_max_lsb", "encoders"), this.props.handlePropertyUpdate(e, n, n, this.props.propId, "parameter_max_msb", "encoders"))) } this.props.handlePropertyUpdate(e, t, a, this.props.propId, s, "encoders") } render() { let e = this.state, t = (e.portOptions, e.midiChannelOptions), a = e.midiChannelMin, n = e.midiChannelMax, r = e.modifierLeftOptions, i = e.modifierRightOptions, o = (e.keyLeftOptions, e.keyRightOptions, this.props.rotaryConfig.parameter), l = this.props.rotaryConfig.parameter_min, c = this.props.rotaryConfig.parameter_max, d = this.props.rotaryConfig.parameter_min_msb, p = this.props.rotaryConfig.parameter_max_msb, m = this.props.rotaryConfig.parameter_min_lsb, h = this.props.rotaryConfig.parameter_max_lsb, u = this.props.rotaryConfig.parameter_msb, g = this.props.rotaryConfig.parameter_lsb, b = this.props.rotaryConfig.channel, k = this.props.rotaryConfig.midi_port, E = this.props.rotaryConfig.comment, C = this.props.rotaryConfig.modifier_left, S = this.props.rotaryConfig.modifier_right, v = this.props.rotaryConfig.key_left, y = this.props.rotaryConfig.key_right, N = this.props.rotaryConfig.message, w = f.a.range(0, 128), _ = (f.a.range(0, 128), f.a.range(0, 128), f.a.range(0, 128)), x = f.a.range(0, 128), A = f.a.range(0, 128), I = f.a.range(0, 128), P = f.a.range(0, 128), B = f.a.range(0, 128), O = { display: "none" }; var M = e => this.canRender(e) ? {} : O; let R = "PITCH BEND" === Mt[N], D = R ? d << 7 | m : l, T = R ? p << 7 | h : c; return s.a.createElement("div", { id: this.props.id || "ytx-config-encoder_rotation", className: "ytx-config-container ytx-config-encoder_rotation-container" }, s.a.createElement("div", { className: "ytx-config-message_type-container config-input-element ytx-sra" }, s.a.createElement("span", null, "Message Type"), s.a.createElement("br", null), s.a.createElement(me, { options: Mt, placeHolder: Mt[N], selectItem: (e, t, a) => this.updateProperty(e, a, a, "currentMessage", "message"), enabled: !0 })), s.a.createElement("div", { className: "ytx-config-port-container config-input-element", style: M("port") }, s.a.createElement("span", null, "Port"), s.a.createElement("br", null), s.a.createElement(me, { options: Rt, placeHolder: Rt[k], selectItem: (e, t, a) => this.updateProperty(e, a, a, "midiPort", "midi_port"), enabled: !0 })), s.a.createElement("div", { className: "ytx-config-midi_channel-container config-input-element", style: M("channel") }, s.a.createElement("span", null, "Midi CH"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: t, placeHolder: b + 1 || "Midi CH", value: b + 1, min: a, max: n, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t - 1, t - 1, "midiChannel", "channel") })), s.a.createElement("div", { className: "ytx-config-parameter-container config-input-element", style: M("parameter") }, s.a.createElement("span", null, "Parameter"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: w, placeHolder: o, value: o, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter", "parameter") })), s.a.createElement("div", { className: "ytx-config-parameter_msb-container config-input-element", style: M("parameter_bytes") }, s.a.createElement("span", null, "Parameter (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: P, placeHolder: u, min: 0, max: 127, step: 1, value: u, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameterMSB", "parameter_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb-container config-input-element", style: M("parameter_bytes") }, s.a.createElement("span", null, "Parameter (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: B, placeHolder: g, value: g, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameterLSB", "parameter_lsb") })), s.a.createElement("div", { className: "ytx-config-parameter_min-container config-input-element", style: M("parameter_min_max") }, s.a.createElement("span", null, "Min Val"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: R ? D - 8192 : D, value: R ? D - 8192 : D, min: R ? -8192 : 0, max: R ? 8191 : 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameterMin", "parameter_min") })), s.a.createElement("div", { className: "ytx-config-parameter_max-container config-input-element", style: M("parameter_min_max") }, s.a.createElement("span", null, "Max Val"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: R ? T - 8192 : T, value: R ? T - 8192 : T, min: R ? -8192 : 0, max: R ? 8191 : 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameterMax", "parameter_max") })), s.a.createElement("div", { className: "ytx-config-parameter_msb_min-container config-input-element", style: M("parameter_bytes_min_max") }, s.a.createElement("span", null, "Min (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: A, placeHolder: d, value: d, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameterMSBMin", "parameter_min_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb_min-container config-input-element", style: M("parameter_bytes_min_max") }, s.a.createElement("span", null, "Min (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: _, placeHolder: m, value: m, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameterLSBMin", "parameter_min_lsb") })), s.a.createElement("div", { className: "ytx-config-parameter_msb_max-container config-input-element", style: M("parameter_bytes_min_max") }, s.a.createElement("span", null, "Max (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: I, placeHolder: p, value: p, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameterMSBMax", "parameter_max_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb_max-container config-input-element", style: M("parameter_bytes_min_max") }, s.a.createElement("span", null, "Max (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: x, placeHolder: h, value: h, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameterLSBMax", "parameter_max_lsb") })), s.a.createElement("div", { className: "ytx-config-modifier_left-container config-input-element", style: M("modifier_left") }, s.a.createElement("span", null, "Modifier Left"), s.a.createElement("br", null), s.a.createElement(me, { options: r, placeHolder: C > 3 ? "NONE" : r[C], enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, a, a, "modifierLeft", "modifier_left") })), s.a.createElement("div", { className: "ytx-config-key_left-container config-input-element", style: M("key_left") }, s.a.createElement("span", null, "Key Left"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: v, enforce_ascii: !0, maxLength: 1, ks: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "keyLeft", "key_left") })), s.a.createElement("div", { className: "ytx-config-modifier_right-container config-input-element", style: M("modifier_right") }, s.a.createElement("span", null, "Modifier Right"), s.a.createElement("br", null), s.a.createElement(me, { options: i, placeHolder: S > 3 ? "NONE" : i[S], enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, a, a, "modifierRight", "modifier_right") })), s.a.createElement("div", { className: "ytx-config-key_right-container config-input-element", style: M("key_right") }, s.a.createElement("span", null, "Key Right"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: y, enforce_ascii: !0, maxLength: 1, ks: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "keyRight", "key_right") })), !this.props.sra && s.a.createElement("div", { className: "ytx-config-comment-container config-input-element", style: M("comment") }, s.a.createElement("span", null, "Comment"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: E, selectItem: (e, t, a) => this.updateProperty(e, t, a, "comment", "comment"), maxLength: 8, comment: !0 }))) } } var Tt = Dt; a(390); const Lt = ["NONE", "MIDI MESSAGE", "Shift Rotary Action", "Fine Adjust", "Double CC", "Quick Shift To Bank", "Quick Shift To Bank + NOTE"], Ht = ["NOTE", "CC", "PC #", "PC -", "PC +", "NRPN", "RPN", "PITCH BEND", "KEY STROKE"], Ut = ["NONE", "USB", "MIDI", "MIDI+USB"], Ft = ["NONE", "ALT", "CTRL/CMD", "SHIFT"], Vt = "Quick Shift To Bank", jt = "Quick Shift To Bank + NOTE", qt = { port: ["NOTE", "CC", "PC #", "PC -", "PC +", "NRPN", "RPN", "PITCH BEND", "Double CC", "Quick Shift To Bank + NOTE"], channel: ["NOTE", "CC", "PC #", "PC -", "PC +", "NRPN", "RPN", "PITCH BEND", "Double CC", "Quick Shift To Bank + NOTE"], parameter: ["NOTE", "CC", "PC #", "Double CC"], parameter_bank: ["Quick Shift To Bank", "Quick Shift To Bank + NOTE"], parameter_min_max: ["NOTE", "CC", "PITCH BEND", "Double CC", "Quick Shift To Bank + NOTE", "PC -", "PC +"], parameter_bytes: ["NRPN", "RPN"], parameter_qstbn: ["Quick Shift To Bank + NOTE"], parameter_bytes_min_max: ["NRPN", "RPN"], modifier_left: ["KEY STROKE"], key_left: ["KEY STROKE"], modifier_right: ["KEY STROKE"], key_right: ["KEY STROKE"], comment: ["NOTE", "CC", "PC #", "PC -", "PC +", "NRPN", "RPN", "PITCH BEND"], encoder_rot: ["Shift Rotary Action"] }; window.console; class Wt extends s.a.Component { constructor(e) { super(e), this.state = { parameterMin: 0, parameterMax: 127, midiChannelMin: 1, midiChannelMax: 16, currentMessage: "NONE" }, this.handleCollapse = this.handleCollapse.bind(this), this.updateProperty = this.updateProperty.bind(this) } updateProperty(e, t, a, n) { let s = Ht[this.props.switchConfig.message], r = Lt[this.props.switchConfig.mode]; if ([Vt, jt].includes(r) && "qstb_bank" === n && t === this.props.currentBank && this.props.enqueueSnackbar(r + ": Selected bank is equal to current bank", { variant: "warning" }), "message" !== n && "MIDI MESSAGE" === r && "PITCH BEND" === s) { let a = 0, s = 0; return a = t + 8192 & 127, s = (t + 8192 & 16256) >> 7, void ("parameter_min" === n ? (this.props.handlePropertyUpdate(e, a, a, this.props.propId, "parameter_min_lsb", "encoders"), this.props.handlePropertyUpdate(e, s, s, this.props.propId, "parameter_min_msb", "encoders")) : "parameter_max" === n && (this.props.handlePropertyUpdate(e, a, a, this.props.propId, "parameter_max_lsb", "encoders"), this.props.handlePropertyUpdate(e, s, s, this.props.propId, "parameter_max_msb", "encoders"))) } if (this.props.handlePropertyUpdate(e, t, a, this.props.propId, n, "encoders"), "mode" === n && (5 === a || 6 === a)) { let t = this.props.switchConfig.qstb_bank; t === this.props.currentBank && this.props.enqueueSnackbar(Lt[a] + ": Selected bank is equal to current bank", { variant: "warning" }), this.props.handlePropertyUpdate(e, t, t, this.props.propId, "parameter_lsb", "encoders") } } canRender(e) { let t = Ht[this.props.switchConfig.message], a = Lt[this.props.switchConfig.mode]; if ("none" === a.toLowerCase()) return !1; if ("message_type" === e) return "MIDI MESSAGE" === a; let n = "MIDI MESSAGE" === a ? t : a; return qt[e].includes(n) } getInputCaption(e, t, a) { let n = Lt[a]; if (5 === n || 6 === n) { if ("parameter" === e) return "Bank"; if ("parameter_msb" === e) return "Parameter" } else { if ("Double CC" === n) return "Parameter"; if ("parameter" === e) return "PC #" === Ht[t] ? "Program Change #" : "Parameter" } } handleCollapse(e) { e.target.classList.toggle("expanded"), e.target.classList.toggle("collapsed"); let t = e.target.childNodes.length; e.target.childNodes[t - 1].classList.toggle("downn"), e.target.childNodes[t - 1].classList.toggle("right"), e.target.nextSibling.nextSibling.classList.toggle("collapse") } handleMessageType(e, t, a) { this.setState(() => ({ currentMessage: t })) } render() { let e = this.props.switchConfig, t = e.mode, a = e.message, n = e.channel, r = e.midi_port, i = e.parameter, o = e.parameter_min, l = e.parameter_max, c = e.parameter_lsb, d = e.parameter_msb, p = e.parameter_min_lsb, m = e.parameter_max_lsb, h = e.parameter_min_msb, u = e.parameter_max_msb, g = e.modifier, b = e.key, f = e.qstb_bank, k = e.qstbn_note, E = (e.comment, "PITCH BEND" === Ht[a]), C = E ? h << 7 | p : o, S = E ? u << 7 | m : l, v = [], y = { display: "none" }; var N = e => this.canRender(e) ? {} : y; return 1 === this.props.banksNumber && (v.push(Lt.indexOf("Quick Shift To Bank")), v.push(Lt.indexOf("Quick Shift To Bank + NOTE"))), s.a.createElement("div", { id: "ytx-config-switch", className: "ytx-config-container  collapse" }, s.a.createElement("div", { className: "ytx-config-switch_mode-container config-input-element" }, s.a.createElement("span", null, "Switch Mode"), s.a.createElement("br", null), s.a.createElement(me, { options: Lt, placeHolder: Lt[t], selectItem: (e, t, a) => this.updateProperty(e, a, a, "mode"), hiddenIdxs: v, value: t, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_bank-container config-input-element", style: N("parameter_bank") }, s.a.createElement("span", null, "Bank"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: f + 1, selectItem: (e, t, a) => this.updateProperty(e, t - 1, a, "qstb_bank"), min: 1, max: this.props.banksNumber, step: 1, value: f + 1, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-message_type-container config-input-element", style: N("message_type") }, s.a.createElement("span", null, "Message Type"), s.a.createElement("br", null), s.a.createElement(me, { options: Ht, placeHolder: Ht[a], selectItem: (e, t, a) => this.updateProperty(e, a, a, "message"), value: a, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-port-container config-input-element", style: N("port") }, s.a.createElement("span", null, "Port"), s.a.createElement("br", null), s.a.createElement(me, { options: Ut, placeHolder: Ut[r], selectItem: (e, t, a) => this.updateProperty(e, a, a, "midi_port"), value: Ut[r], enabled: !0 })), s.a.createElement("div", { className: "ytx-config-midi_channel-container config-input-element", style: N("channel") }, s.a.createElement("span", null, "Midi CH"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: n + 1, selectItem: (e, t, a) => this.updateProperty(e, t - 1, t - 1, "channel"), min: this.state.midiChannelMin, max: this.state.midiChannelMax, value: n + 1, step: 1, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_msb-container config-input-element", style: N("parameter_bytes") }, s.a.createElement("span", null, "Parameter MSB"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: d, min: 0, max: 127, step: 1, value: d, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_msb-container config-input-element", style: N("parameter_qstbn") }, s.a.createElement("span", null, "Parameter"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: k, min: 0, max: 127, step: 1, value: k, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "qstbn_note") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb-container config-input-element", style: N("parameter_bytes") }, s.a.createElement("span", null, "Parameter (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: c, value: c, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_lsb") })), s.a.createElement("div", { className: "ytx-config-parameter-container config-input-element", style: N("parameter") }, s.a.createElement("span", null, this.getInputCaption("parameter", a, t)), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: i, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter"), min: 0, max: 127, step: 1, value: i, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_min-container config-input-element", style: N("parameter_min_max") }, s.a.createElement("span", null, "Min Val"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: E ? C - 8192 : C, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min"), min: E ? -8192 : 0, max: E ? 8191 : 127, step: 1, value: E ? C - 8192 : C, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_max-container config-input-element", style: N("parameter_min_max") }, s.a.createElement("span", null, "Max Val"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: E ? S - 8192 : S, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max"), min: E ? -8192 : 0, max: E ? 8191 : 127, step: 1, value: E ? S - 8192 : S, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_msb_min-container config-input-element", style: N("parameter_bytes_min_max") }, s.a.createElement("span", null, "Min (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: h, value: h, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb_min-container config-input-element", style: N("parameter_bytes_min_max") }, s.a.createElement("span", null, "Min (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: p, value: p, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min_lsb") })), s.a.createElement("div", { className: "ytx-config-parameter_msb_max-container config-input-element", style: N("parameter_bytes_min_max") }, s.a.createElement("span", null, "Max (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: u, value: u, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb_max-container config-input-element", style: N("parameter_bytes_min_max") }, s.a.createElement("span", null, "Max (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: m, value: m, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max_lsb") })), s.a.createElement("div", { className: "ytx-config-modifier_left-container config-input-element", style: N("modifier_left") }, s.a.createElement("span", null, "Modifier"), s.a.createElement("br", null), s.a.createElement(me, { options: Ft, placeHolder: Ft[g], selectItem: (e, t, a) => this.updateProperty(e, a, a, "modifier"), value: Ft[g], enabled: !0 })), s.a.createElement("div", { className: "ytx-config-key_left-container config-input-element", style: N("key_left") }, s.a.createElement("span", null, "Key"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: b, selectItem: (e, t, a) => this.updateProperty(e, t, a, "key"), maxLength: 1, enforce_ascii: !0, ks: !0 })), s.a.createElement("div", { className: "ytx-config-switch_encoder_rot-container config-input-element", style: N("encoder_rot") }, s.a.createElement("span", { className: "ytx-config-title config-collapsible collapsible", onClick: this.handleCollapse }, "Shifted Action for Rotary Encoder ", s.a.createElement("i", { className: "chevron-arrow right" })), s.a.createElement("br", null), s.a.createElement(Tt, { id: "ytx-config-switch_encoder_rotation", rotaryConfig: this.props.switchConfig, handlePropertyUpdate: this.props.handlePropertyUpdate, idx: this.props.idx, propId: "switch_config", sra: !0 }))) } } var Kt = Object(l.withSnackbar)(Wt); a(391); const Gt = ["Absolute", "Binary Offset", "2 component", "Signed Bit", "Signed Bit 2", "Single Value"], Jt = ["Acceleration", "Speed 1", "Speed 2", "Speed 3"]; window.console; class Qt extends s.a.Component { constructor(e) { super(e), this.state = {}, this.updateProperty = this.updateProperty.bind(this) } updateProperty(e, t, a, n) { this.props.handlePropertyUpdate(e, t, a, this.props.propId, n, "encoders") } render() { let e = this.props.encoderBehaviourConfig, t = e.hw_mode, a = e.speed_value; return s.a.createElement("div", { id: "ytx-config-encoder_behaviour", className: "ytx-config-container collapse" }, s.a.createElement("div", { className: "ytx-config-hw_mode-container config-input-element" }, s.a.createElement("span", null, "HW Mode"), s.a.createElement("br", null), s.a.createElement(me, { options: Gt, placeHolder: Gt[t], value: t, selectItem: (e, t, a) => this.updateProperty(e, a, a, "hw_mode"), enabled: !0 })), s.a.createElement("div", { className: "ytx-config-encoder_speed-container config-input-element" }, s.a.createElement("span", null, "Speed"), s.a.createElement("br", null), s.a.createElement(me, { options: Jt, placeHolder: Jt[a], value: a, selectItem: (e, t, a) => this.updateProperty(e, a, a, "speed_value"), enabled: !0 }))) } } var Yt = Qt; a(392); const Xt = ["None", "Jump to MIN", "Jump to CENTER", "Jump to MAX"], Zt = ["Momentary", "Toggle"]; window.console; class zt extends s.a.Component { constructor(e) { super(e), this.state = {}, this.updateProperty = this.updateProperty.bind(this) } updateProperty(e, t, a, n) { this.props.handlePropertyUpdate(e, t, a, this.props.propId, n, "encoders") } render() { let e = this.props.switchBehaviourConfig, t = e.double_click, a = e.type; return s.a.createElement("div", { id: "ytx-config-switch_behaviour", className: "ytx-config-container  collapse" }, s.a.createElement("div", { className: "ytx-config-double_click_behaviour-container config-input-element" }, s.a.createElement("span", null, "Double click behaviour"), s.a.createElement("br", null), s.a.createElement(me, { options: Xt, placeHolder: Xt[t], value: t, selectItem: (e, t, a) => this.updateProperty(e, a, a, "double_click"), enabled: !0 })), !this.props.disableMode && s.a.createElement("div", { className: "ytx-config-switch_mode-container config-input-element" }, s.a.createElement("span", null, "Switch mode"), s.a.createElement("br", null), s.a.createElement(me, { options: Zt, placeHolder: Zt[a], value: a, selectItem: (e, t, a) => this.updateProperty(e, a, a, "type"), enabled: !0 }))) } } var $t = zt; a(393), a(394); const ea = ["NONE", "NOTE", "CC", "VUMETER CC", "Program Change #", "NRPN", "RPN", "PITCH BEND"], ta = ["NONE", "NOTE", "CC", "VUMETER CC", "Program Change +/-", "NRPN", "RPN", "PITCH BEND"], aa = ["NOTE", "CC", "Program Change #", "Program Change -", "Program Change +", "NRPN", "RPN", "PITCH BEND"], na = ["NONE", "NOTE", "CC", "Program Change #", "Program Change -", "Program Change +", "NRPN", "RPN", "PITCH BEND"], sa = ["Local", "USB", "MIDI", "MIDI+USB"], ra = ["On with press", "Always on"], ia = f.a.range(1, 17), oa = f.a.range(0, 128), la = f.a.range(0, 128), ca = f.a.range(0, 128), da = ["SPOT", "MIRROR", "FILL", "PIVOT"], pa = ["Fixed", "Value to color"], ma = ["LED Off", "Low intensity"], ha = { local: [1, 2, 4, 5, 6], mode: [1, 2, 4, 5, 6], source: [1, 2, 4, 5, 6], message: [1, 2], parameter_bytes: [1, 2], parameter_bytes_rotation: [2], parameter: [1, 2, 4], qstb_bank: [5, 6], qstb_note: [6], channel: [1, 2, 3, 4, 5, 6], channel_rotation: [2], fixed: [1, 2], range: [1, 2], color: [1, 2], low_intensity_off_mode: [1] }, ua = { local: ["Local"], channel: ["USB", "MIDI", "MIDI+USB"] }, ga = { mode: ["NOTE", "CC", "VUMETER CC", "Program Change #", "Program Change +/-", "Program Change -", "Program Change +", "NRPN", "RPN", "PITCH BEND"], color: ["NOTE", "CC", "VUMETER CC", "Program Change #", "Program Change +/-", "Program Change -", "Program Change +", "NRPN", "RPN", "PITCH BEND"], source: ["NOTE", "CC", "VUMETER CC", "Program Change #", "Program Change +/-", "Program Change -", "Program Change +", "NRPN", "RPN", "PITCH BEND"], parameter: ["NOTE", "CC", "VUMETER CC", "Program Change #"], parameter_bytes: ["NRPN", "RPN"], parameter_bytes_rotation: ["NRPN", "RPN"], channel_rotation: ["NOTE", "CC", "VUMETER CC", "Program Change #", "Program Change +/-", "Program Change -", "Program Change +", "NRPN", "RPN", "PITCH BEND"], low_intensity_off_mode: ["NOTE", "CC", "VUMETER CC", "Program Change #", "Program Change +/-", "Program Change -", "Program Change +", "NRPN", "RPN", "PITCH BEND"] }, ba = { fixed: ["Fixed"], range: ["Value to color"], low_intensity_off_mode: ["Fixed"] }; window.console; class fa extends s.a.Component { constructor(e) { super(e), this.state = { message: 1, source: 3, color_range_enable: 0 }, this.handleMessageType = this.handleMessageType.bind(this), this.handleFeedbackSource = this.handleFeedbackSource.bind(this), this.handleColorMode = this.handleColorMode.bind(this), this.updateProperty = this.updateProperty.bind(this), this.handleColorChange = this.handleColorChange.bind(this), this.colorMappingHelp = s.a.createRef() } canRender(e) { if ("message" === e && void 0 === this.props.switchMode) return !0; let t = this.props.feedbackConfig, a = this.props.rotation_feedback ? ea[t.message] : this.props.sraMode ? ta[t.message] : this.props.switch_feedback ? aa[t.message] : na[t.message], n = sa[t.source], s = pa[t.color_range_enable], r = this.props.switchMode; if (void 0 !== r) { if (!ha[e].includes(r)) return !1; if ("message" === e) return !0 } let i = e in ua ? n : e in ba ? s : e in ga ? a : r; return (e in ua ? ua : e in ba ? ba : e in ga ? ga : ha)[e].includes(i) } getInputCaption(e, t) { if ("parameter" === e) { return "Program Change #" === (this.props.rotation_feedback ? ea : this.props.sraMode ? ta : 4 === this.props.switchMode ? ea : this.props.switch_feedback ? aa : na)[t] ? "Program Change #" : "Parameter" } } handleMessageType(e, t, a) { this.setState({ currentMessage: t }) } handleFeedbackSource(e, t, a) { this.setState({ currentSource: t }) } handleColorMode(e, t, a) { this.setState({ currentColorMode: t }) } updateProperty(e, t, a, n) { this.setState({ [n]: a }); let s = this.props.digitalFeedback ? "digitals" : this.props.analogFeedback ? "analogs" : "encoders"; this.props.handlePropertyUpdate(e, t, a, this.props.propId, n, s) } handleColorChange(e, t) { let a = this.props.digitalFeedback ? "digitals" : this.props.analogFeedback ? "analogs" : "encoders"; this.props.handlePropertyUpdate(null, e, null, this.props.propId, t, a) } mirrorComponentProperty(e, t) { if (null !== e && void 0 !== e) { if ("message" === e) { if (t >= (this.props.rotation_feedback ? ea : this.props.sraMode ? ta : this.props.switch_feedback ? aa : na).length) return } this.updateProperty(null, t, t, e) } } render() { let e = this.props.feedbackConfig, t = e.mode, a = e.channel, n = e.color, r = e.color_range_enable, i = e.local_behaviour, o = e.low_intensity_off_mode, l = e.message, c = e.parameter, d = e.parameter_lsb, p = e.parameter_msb, m = e.source, h = (e.type, { display: "none" }), u = this.props.rotation_feedback || this.props.sraMode ? "parameter_bytes_rotation" : "parameter_bytes", g = this.props.rotation_feedback || this.props.sraMode ? "channel_rotation" : "channel"; var b = e => { if ("NONE" === (this.props.rotation_feedback ? ea : this.props.sraMode ? ta : this.props.switch_feedback ? aa : na)[l]) return "message" !== e ? h : {}; if (this.props.rotation_feedback || this.props.sraMode) { if ("local" === e) return h; if ("channel" === e) return {} } return this.canRender(e) ? {} : h }; let f = this.props.rotation_feedback ? ea : this.props.sraMode ? ta : this.props.switch_feedback ? aa : na; return this.mirrorComponentProperty(this.props.componentMirrorProp, this.props.componentMirrorValue), s.a.createElement("div", { id: this.props.id || "ytx-config-feedback", className: "ytx-config-container ytx-config-feedback-container collapse" }, s.a.createElement(_e, { ref: this.colorMappingHelp }), s.a.createElement("div", { className: "ytx-config-feedback_local_behaviour-container config-input-element", style: b("local") }, s.a.createElement("span", null, "Local behaviour"), s.a.createElement("br", null), s.a.createElement(me, { options: ra, placeHolder: ra[i], selectItem: (e, t, a) => this.updateProperty(e, a, a, "local_behaviour"), enabled: !0 })), s.a.createElement("div", { className: "ytx-config-feedback_message_type-container config-input-element", style: b("message") }, s.a.createElement("span", null, "Message type"), s.a.createElement("br", null), s.a.createElement(me, { options: f, placeHolder: f[l], selectItem: (e, t, a) => this.updateProperty(e, a, a, "message"), enabled: !0 })), s.a.createElement("div", { className: "ytx-config-feedback_source-container config-input-element", style: b("source") }, s.a.createElement("span", null, "Feedback source"), s.a.createElement("br", null), s.a.createElement(me, { options: sa, placeHolder: sa[m], selectItem: (e, t, a) => this.updateProperty(e, a, a, "source"), enabled: !0 })), s.a.createElement("div", { className: "ytx-config-feedback_parameter-container config-input-element", style: b("parameter") }, s.a.createElement("span", null, this.getInputCaption("parameter", l)), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: ca, placeHolder: ca[c], min: 0, max: 127, step: 1, value: c, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter") })), s.a.createElement("div", { className: "ytx-config-feedback_parameter-container config-input-element", style: b("qstb_bank") }, s.a.createElement("span", null, "Bank"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: ca, placeHolder: ca[d + 1], min: 1, max: this.props.banksNumber, step: 1, value: d + 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t - 1, a, "parameter_lsb") })), s.a.createElement("div", { className: "ytx-config-feedback_midi_channel-container config-input-element", style: b(g) }, s.a.createElement("span", null, "Midi CH"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: ia, placeHolder: ia[a], min: 1, max: 16, step: 1, enabled: !0, value: a + 1, selectItem: (e, t, a) => this.updateProperty(e, t - 1, t - 1, "channel") })), s.a.createElement("div", { className: "ytx-config-feedback_parameter_msb-container config-input-element", style: b(u) }, s.a.createElement("span", null, "Parameter (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: oa, placeHolder: oa[p], min: 0, max: 127, step: 1, value: p, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_msb") })), s.a.createElement("div", { className: "ytx-config-feedback_parameter_msb-container config-input-element", style: b("qstb_note") }, s.a.createElement("span", null, "Note"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: oa, placeHolder: oa[p], min: 0, max: 127, step: 1, value: p, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_msb") })), s.a.createElement("div", { className: "ytx-config-feedback_parameter_lsb-container config-input-element", style: b(u) }, s.a.createElement("span", null, "Parameter (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: la, placeHolder: la[d], min: 0, max: 127, step: 1, value: d, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_lsb") })), S(0, 16, this.props.fwVersion) && s.a.createElement(s.a.Fragment, null, s.a.createElement("div", { className: "ytx-config-feedback_color_mode-container config-input-element", style: b("color") }, s.a.createElement("span", null, "Color mode"), this.props.rotation_feedback && v(), s.a.createElement("br", null), s.a.createElement(me, { options: pa, placeHolder: pa[r], selectItem: (e, t, a) => this.updateProperty(e, a, a, "color_range_enable"), enabled: !0 }), 1 === r && s.a.createElement("a", { href: "#", onClick: () => { var e; return null === (e = this.colorMappingHelp.current) || void 0 === e ? void 0 : e.toggle() } }, "See color mapping")), s.a.createElement("div", { className: "ytx-config-feedback_fixed_color-container config-input-element", style: b("fixed") }, s.a.createElement("br", null), s.a.createElement(It, { color: n, handleColorChange: e => this.handleColorChange(e, "color"), type: "squared", showName: !0, showHex: !0, picker: !0, id: "ytx-color-feedback-fixed" })), this.props.rotation_feedback && s.a.createElement("div", { className: "ytx-config-feedback_mode-container config-input-element", style: b("mode") }, s.a.createElement("span", null, "Feedback mode"), s.a.createElement("br", null), s.a.createElement(me, { options: da, placeHolder: da[t], enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, a, a, "mode") })), !this.props.rotation_feedback && s.a.createElement("div", { className: "ytx-config-feedback_color_mode-container config-input-element", style: b("low_intensity_off_mode") }, s.a.createElement("span", null, "Min Val behavior"), v(), s.a.createElement("br", null), s.a.createElement(me, { options: ma, placeHolder: ma[o], selectItem: (e, t, a) => this.updateProperty(e, a, a, "low_intensity_off_mode"), enabled: !0 }))), !S(0, 16, this.props.fwVersion) && s.a.createElement(s.a.Fragment, null, this.props.rotation_feedback && s.a.createElement(s.a.Fragment, null, s.a.createElement("div", { id: "rotation-feedback-color-picker", className: "ytx-config-feedback_color-container config-input-element", style: b("color") }, s.a.createElement("span", null, "Feedback color"), s.a.createElement("br", null), s.a.createElement(It, { color: n, handleColorChange: e => this.handleColorChange(e, "color"), type: "squared", showName: !0, picker: !0, showHex: !0 })), s.a.createElement("div", { className: "ytx-config-feedback_mode-legacy-container config-input-element", style: b("mode") }, s.a.createElement("span", null, "Feedback mode"), s.a.createElement("br", null), s.a.createElement(me, { options: da, placeHolder: da[t], enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, a, a, "mode") }))), !this.props.rotation_feedback && s.a.createElement("div", { className: "ytx-config-feedback_color_mode-container config-input-element", style: b("color") }, s.a.createElement("span", null, "Color mode"), this.props.rotation_feedback && S(0, 16, this.props.fwVersion) && v(), s.a.createElement("br", null), s.a.createElement(me, { options: pa, placeHolder: pa[r], selectItem: (e, t, a) => this.updateProperty(e, a, a, "color_range_enable"), enabled: !0 }), 1 === r && s.a.createElement("a", { href: "#", onClick: () => { var e; return null === (e = this.colorMappingHelp.current) || void 0 === e ? void 0 : e.toggle() } }, "See color mapping")), !this.props.rotation_feedback && s.a.createElement("div", { className: "ytx-config-feedback_fixed_color-container config-input-element", style: b("fixed") }, s.a.createElement("br", null), s.a.createElement(It, { color: n, handleColorChange: e => this.handleColorChange(e, "color"), type: "squared", showName: !0, showHex: !0, picker: !0, id: "ytx-color-feedback-fixed" })))) } } var ka = fa; window.console; class Ea extends s.a.Component { constructor(e) { super(e), this.handlePropertyUpdate = (e, t, a, n, s, r) => { "rotary_config" === n && this.sharedProperties.hasOwnProperty(s) ? this.setState({ rotaryFeedbackMirrorProp: this.sharedProperties[s], rotaryFeedbackMirrorValue: a, switchFeedbackMirrorProp: null, switchFeedbackMirrorValue: null }) : "switch_config" === n && this.sharedProperties.hasOwnProperty(s) ? this.setState({ switchFeedbackMirrorProp: this.sharedProperties[s], switchFeedbackMirrorValue: a, rotaryFeedbackMirrorProp: null, rotaryFeedbackMirrorValue: null }) : "switch_config" === n && "mode" === s && 4 === a ? this.setState({ switchFeedbackMirrorProp: "message", switchFeedbackMirrorValue: 2, rotaryFeedbackMirrorProp: null, rotaryFeedbackMirrorValue: null }) : this.setState({ switchFeedbackMirrorProp: null, switchFeedbackMirrorValue: null, rotaryFeedbackMirrorProp: null, rotaryFeedbackMirrorValue: null }), this.props.handlePropertyUpdate(e, t, a, n, s, r) }, this.state = { elementProps: e.elementProps, rotaryFeedbackMirrorProp: null, rotaryFeedbackMirrorValue: null, switchFeedbackMirrorProp: null, switchFeedbackMirrorValue: null, loading: e.loading }, this.handleCollapse = this.handleCollapse.bind(this), this.sharedProperties = { message: "message", parameter: "parameter", parameter_lsb: "parameter_lsb", parameter_msb: "parameter_msb", qstb_bank: "parameter_lsb", qstbn_note: "parameter_msb", channel: "channel", midi_port: "source" }, this.SRA_MODE = 2 } static getDerivedStateFromProps(e, t) { return e.loading !== t.loading ? { elementProps: e.elementProps, loading: e.loading } : null } handleCollapse(e) { var t, a, n, s, r; let i = (null === (t = this.erCollapsible) || void 0 === t ? void 0 : t.contains(e.target)) ? this.erCollapsible : (null === (a = this.erfbCollapsible) || void 0 === a ? void 0 : a.contains(e.target)) ? this.erfbCollapsible : !this.props.elementProps.switch_config.disabled && (null === (n = this.swCollapsible) || void 0 === n ? void 0 : n.contains(e.target)) ? this.swCollapsible : !this.props.elementProps.switch_config.disabled && (null === (s = this.swfbCollapsible) || void 0 === s ? void 0 : s.contains(e.target)) ? this.swfbCollapsible : (null === (r = this.ebCollapsible) || void 0 === r ? void 0 : r.contains(e.target)) ? this.ebCollapsible : this.swbCollapsible; i.classList.toggle("expanded"), i.classList.toggle("collapsed"), i.children[0].classList.toggle("downn"), i.children[0].classList.toggle("right"), i.nextSibling.classList.toggle("collapse") } render() { let e = this.props.elementProps.switch_config.mode === this.SRA_MODE ? "SHIFTED FEEDBACK FOR ROTARY ENCODER" : 4 === this.props.elementProps.switch_config.mode ? "2nd CC FEEDBACK" : "SWITCH FEEDBACK"; return s.a.createElement("div", { className: "ytx-component-config-container", id: "ytx-encoder-config-container" }, s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible expanded collapsed", onClick: this.handleCollapse, ref: e => this.erCollapsible = e }, "ENCODER ROTATION ", s.a.createElement("i", { className: "chevron-arrow downn" })), s.a.createElement(Tt, { rotaryConfig: this.props.elementProps.rotary_config, handlePropertyUpdate: this.handlePropertyUpdate, idx: this.props.idx, propId: "rotary_config" }), s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible", onClick: this.handleCollapse, ref: e => this.erfbCollapsible = e }, "ROTATION FEEDBACK ", s.a.createElement("i", { className: "chevron-arrow right" })), s.a.createElement(ka, { id: "ytx-config-rotation_feedback", rotation_feedback: !0, feedbackConfig: this.props.elementProps.rotation_feedback, handlePropertyUpdate: this.handlePropertyUpdate, componentMirrorProp: this.state.rotaryFeedbackMirrorProp, componentMirrorValue: this.state.rotaryFeedbackMirrorValue, idx: this.props.idx, propId: "rotation_feedback", fwVersion: this.props.fwVersion }), !this.props.elementProps.switch_config.disabled && s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible", onClick: this.handleCollapse, ref: e => this.swCollapsible = e }, "ENCODER SWITCH ", s.a.createElement("i", { className: "chevron-arrow right" })), !this.props.elementProps.switch_config.disabled && s.a.createElement(Kt, { switchConfig: this.props.elementProps.switch_config, handlePropertyUpdate: this.handlePropertyUpdate, maxBanksNumber: this.props.maxBanksNumber, banksNumber: this.props.banksNumber, currentBank: this.props.currentBank, idx: this.props.idx, propId: "switch_config" }), !this.props.elementProps.switch_feedback.disabled && 3 !== this.props.elementProps.switch_config.mode && 0 !== this.props.elementProps.switch_config.mode && s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible", onClick: this.handleCollapse, ref: e => this.swfbCollapsible = e }, e, " ", s.a.createElement("i", { className: "chevron-arrow right" })), !this.props.elementProps.switch_feedback.disabled && 3 !== this.props.elementProps.switch_config.mode && 0 !== this.props.elementProps.switch_config.mode && s.a.createElement(ka, { id: "ytx-config-switch_feedback", switch_feedback: !0, sraMode: this.props.elementProps.switch_config.mode === this.SRA_MODE, switchMode: this.props.elementProps.switch_config.mode, feedbackConfig: this.props.elementProps.switch_feedback, handlePropertyUpdate: this.handlePropertyUpdate, componentMirrorProp: this.state.switchFeedbackMirrorProp, componentMirrorValue: this.state.switchFeedbackMirrorValue, colorRangeList: this.props.switchColorRangeList, banksNumber: this.props.banksNumber, idx: this.props.idx, propId: "switch_feedback", fwVersion: this.props.fwVersion }), s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible", onClick: this.handleCollapse, ref: e => this.ebCollapsible = e }, "ROTARY BEHAVIOUR ", s.a.createElement("i", { className: "chevron-arrow right" })), s.a.createElement(Yt, { encoderBehaviourConfig: this.props.elementProps.encoder_mode, handlePropertyUpdate: this.props.handlePropertyUpdate, idx: this.props.idx, propId: "encoder_mode" }), s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible", onClick: this.handleCollapse, ref: e => this.swbCollapsible = e }, "SWITCH BEHAVIOUR ", s.a.createElement("i", { className: "chevron-arrow right" })), s.a.createElement($t, { switchBehaviourConfig: this.props.elementProps.switch_config, handlePropertyUpdate: this.props.handlePropertyUpdate, idx: this.props.idx, disableMode: this.props.elementProps.switch_config.disabled, propId: "switch_config" })) } } var Ca = Ea; a(395); const Sa = ["NONE", "Note", "CC", "PC #", "PC -", "PC +", "NRPN", "RPN", "Pitch Bend", "Keystroke"], va = f.a.range(1, 17), ya = ["NONE", "USB", "MIDI", "MIDI+USB"], Na = ["NONE", "ALT", "CTRL/CMD", "SHIFT"], wa = ["Momentary", "Toggle"], _a = { port: ["Note", "CC", "PC #", "PC -", "PC +", "NRPN", "RPN", "Pitch Bend"], channel: ["Note", "CC", "PC #", "PC -", "PC +", "NRPN", "RPN", "Pitch Bend"], parameter: ["Note", "CC", "PC #"], parameter_min_max: ["Note", "CC", "Pitch Bend", "PC -", "PC +"], parameter_bytes: ["NRPN", "RPN"], parameter_bytes_min_max: ["NRPN", "RPN"], modifier: ["Keystroke"], key: ["Keystroke"], comment: ["Note", "CC", "PC #", "PC -", "PC +", "NRPN", "RPN", "Pitch Bend", "Keystroke"], mode: ["Note", "CC", "NRPN", "RPN", "Pitch Bend"] }; window.console; class xa extends s.a.Component { constructor(e) { super(e), this.state = {}, this.updateProperty = this.updateProperty.bind(this) } updateProperty(e, t, a, n) { let s = Sa[this.props.actionConfig.message].toUpperCase(); if (("parameter_min" === n || "parameter_max" === n) && "PITCH BEND" === s) { let a = 0, s = 0; return a = t + 8192 & 127, s = (t + 8192 & 16256) >> 7, void ("parameter_min" === n ? (this.props.handlePropertyUpdate(e, a, a, this.props.propId, "parameter_min_lsb", "digitals"), this.props.handlePropertyUpdate(e, s, s, this.props.propId, "parameter_min_msb", "digitals")) : "parameter_max" === n && (this.props.handlePropertyUpdate(e, a, a, this.props.propId, "parameter_max_lsb", "digitals"), this.props.handlePropertyUpdate(e, s, s, this.props.propId, "parameter_max_msb", "digitals"))) } this.props.handlePropertyUpdate(e, t, a, this.props.propId, n, "digitals") } canRender(e) { let t = Sa[this.props.actionConfig.message]; return "none" !== t.toLowerCase() && _a[e].includes(t) } render() { let e = this.props.actionConfig, t = e.toggle_momentary, a = e.midi_port, n = e.message, r = e.channel, i = e.parameter, o = e.parameter_lsb, l = e.parameter_msb, c = e.parameter_min, d = e.parameter_min_lsb, p = e.parameter_min_msb, m = e.parameter_max, h = e.parameter_max_lsb, u = e.parameter_max_msb, g = e.key, b = e.modifier, k = e.comment, E = { display: "none" }; var C = e => this.canRender(e) ? {} : E; let S = f.a.range(0, 128), v = (f.a.range(0, 128), f.a.range(0, 128), f.a.range(0, 128)), y = f.a.range(0, 128), N = "PITCH BEND" === Sa[n].toUpperCase(), w = N ? p << 7 | d : c, _ = N ? u << 7 | h : m; return s.a.createElement("div", { id: "ytx-config-action_config", className: "ytx-config-container ytx-config-action_config-container" }, s.a.createElement("div", { className: "ytx-config-message_type-container config-input-element" }, s.a.createElement("span", null, "Message Type"), s.a.createElement("br", null), s.a.createElement(me, { options: Sa, placeHolder: Sa[n], selectItem: (e, t, a) => this.updateProperty(e, a, a, "message"), value: n, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-digital_mode-container config-input-element", style: C("mode") }, s.a.createElement("span", null, "Mode"), s.a.createElement("br", null), s.a.createElement(me, { options: wa, placeHolder: wa[t], selectItem: (e, t, a) => this.updateProperty(e, a, a, "toggle_momentary"), value: t, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-port-container config-input-element", style: C("port") }, s.a.createElement("span", null, "Port"), s.a.createElement("br", null), s.a.createElement(me, { options: ya, placeHolder: ya[a], selectItem: (e, t, a) => this.updateProperty(e, a, a, "midi_port"), value: ya[a], enabled: !0 })), s.a.createElement("div", { className: "ytx-config-midi_channel-container config-input-element", style: C("channel") }, s.a.createElement("span", null, "Midi CH"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: va, placeHolder: r + 1, selectItem: (e, t, a) => this.updateProperty(e, t - 1, t - 1, "channel"), min: va[0], max: va[15], value: r + 1, step: 1, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_msb-container config-input-element", style: C("parameter_bytes") }, s.a.createElement("span", null, "Parameter (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: v, placeHolder: l, min: 0, max: 127, step: 1, value: l, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb-container config-input-element", style: C("parameter_bytes") }, s.a.createElement("span", null, "Parameter (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: y, placeHolder: o, value: o, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_lsb") })), s.a.createElement("div", { className: "ytx-config-parameter-container config-input-element", style: C("parameter") }, s.a.createElement("span", null, "Parameter"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: S, placeHolder: i, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter"), min: 0, max: 127, step: 1, value: i, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_min-container config-input-element", style: C("parameter_min_max") }, s.a.createElement("span", null, "Min Val"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: N ? w - 8192 : w, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min"), min: N ? -8192 : 0, max: N ? 8191 : 127, step: 1, value: N ? w - 8192 : w, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_max-container config-input-element", style: C("parameter_min_max") }, s.a.createElement("span", null, "Max Val"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: N ? _ - 8192 : _, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max"), min: N ? -8192 : 0, max: N ? 8191 : 127, step: 1, value: N ? _ - 8192 : _, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_msb_min-container config-input-element", style: C("parameter_bytes_min_max") }, s.a.createElement("span", null, "Min (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: v, placeHolder: p, value: p, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb_min-container config-input-element", style: C("parameter_bytes_min_max") }, s.a.createElement("span", null, "Min (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: y, placeHolder: d, value: d, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min_lsb") })), s.a.createElement("div", { className: "ytx-config-parameter_msb_max-container config-input-element", style: C("parameter_bytes_min_max") }, s.a.createElement("span", null, "Max (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: v, placeHolder: u, value: u, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb_max-container config-input-element", style: C("parameter_bytes_min_max") }, s.a.createElement("span", null, "Max (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: y, placeHolder: h, value: h, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max_lsb") })), s.a.createElement("div", { className: "ytx-config-modifier_left-container config-input-element", style: C("modifier") }, s.a.createElement("span", null, "Modifier"), s.a.createElement("br", null), s.a.createElement(me, { options: Na, placeHolder: Na[b], selectItem: (e, t, a) => this.updateProperty(e, a, a, "modifier"), value: Na[b], enabled: !0 })), s.a.createElement("div", { className: "ytx-config-key_left-container config-input-element", style: C("key") }, s.a.createElement("span", null, "Key"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: g, selectItem: (e, t, a) => this.updateProperty(e, t, a, "key"), maxLength: 1, ks: !0, enforce_ascii: !0 })), s.a.createElement("div", { className: "ytx-config-comment-container config-input-element", style: C("comment") }, s.a.createElement("span", null, "Comment"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: k, selectItem: (e, t, a) => this.updateProperty(e, t, a, "comment"), maxLength: 8, comment: !0 }))) } } var Aa = xa, Ia = a(79), Pa = a.n(Ia); a(396), window.console; class Ba extends s.a.Component { constructor(e) { super(e), this.handlePropertyUpdate = (e, t, a, n, s, r) => { "action_config" === n && this.sharedProperties.hasOwnProperty(s) ? this.setState({ feedbackMirrorProp: this.sharedProperties[s], feedbackMirrorValue: a }) : this.setState({ feedbackMirrorProp: null, feedbackMirrorValue: null }), this.props.handlePropertyUpdate(e, t, a, n, s, r) }, this.state = { elementProps: e.elementProps, feedbackMirrorProp: null, feedbackMirrorValue: null }, this.handleCollapse = this.handleCollapse.bind(this), this.sharedProperties = { message: "message", parameter: "parameter", parameter_lsb: "parameter_lsb", parameter_msb: "parameter_msb", channel: "channel", midi_port: "source" } } handleCollapse(e) { let t = this.acCollapsible.contains(e.target) ? this.acCollapsible : this.fbCollapsible; t.classList.toggle("expanded"), t.classList.toggle("collapsed"), t.children[0].classList.toggle("downn"), t.children[0].classList.toggle("right"), t.nextSibling.classList.toggle("collapse") } render() { let e = this.props.elementProps.disabled; return s.a.createElement("div", { className: "ytx-component-config-container", id: "ytx-digital-config-container" }, e ? s.a.createElement("p", { className: "ytx-info-message" }, "This component is configured as a bank selector.", s.a.createElement("br", null), "Please see", s.a.createElement("img", { src: Pa.a, alt: "banks-no-hover", width: "50px", height: "auto" }), "Configure Banks") : s.a.createElement(s.a.Fragment, null, s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible expanded collapsed", onClick: this.handleCollapse, ref: e => this.acCollapsible = e }, "MESSAGE CONFIG ", s.a.createElement("i", { className: "chevron-arrow downn" })), s.a.createElement(Aa, { actionConfig: this.props.elementProps.action_config, handlePropertyUpdate: this.handlePropertyUpdate, idx: this.props.idx, propId: "action_config" }), s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible", onClick: this.handleCollapse, ref: e => this.fbCollapsible = e }, "FEEDBACK CONFIG ", s.a.createElement("i", { className: "chevron-arrow right" })), s.a.createElement(ka, { feedbackConfig: this.props.elementProps.feedback_config, digitalFeedback: !0, handlePropertyUpdate: this.handlePropertyUpdate, componentMirrorProp: this.state.feedbackMirrorProp, componentMirrorValue: this.state.feedbackMirrorValue, colorRangeList: this.props.digitalColorRangeList, idx: this.props.idx, propId: "feedback_config", fwVersion: this.props.fwVersion }))) } } var Oa = Ba; a(397); const Ma = ["NONE", "Note", "CC", "PC #", "NRPN", "RPN", "Pitch Bend", "Keystroke"], Ra = f.a.range(1, 17), Da = ["NONE", "USB", "MIDI", "MIDI+USB"], Ta = ["NONE", "SPLIT"], La = ["NONE", "ALT", "CTRL/CMD", "SHIFT"], Ha = { port: ["Note", "CC", "PC #", "NRPN", "RPN", "Pitch Bend"], channel: ["Note", "CC", "PC #", "NRPN", "RPN", "Pitch Bend"], parameter: ["Note", "CC", "PC #"], split_mode: ["Note", "CC", "PC #", "NRPN", "RPN", "Pitch Bend"], parameter_min_max: ["Note", "CC", "PC #", "Pitch Bend"], parameter_bytes: ["NRPN", "RPN"], parameter_bytes_min_max: ["NRPN", "RPN"], modifier: ["Keystroke"], key: ["Keystroke"], comment: ["Note", "CC", "PC #", "NRPN", "RPN", "Pitch Bend", "Keystroke"] }; window.console; class Ua extends s.a.Component { constructor(e) { super(e), this.state = {}, this.updateProperty = this.updateProperty.bind(this) } updateProperty(e, t, a, n) { let s = this.props.messageConfig.message; 2 !== this.props.analogType && s >= 6 && (s -= 2); let r = Ma[s].toUpperCase(); if (2 !== this.props.analogType && "message" == n && a >= 4 && (a += 2, t += 2), ("parameter_min" === n || "parameter_max" === n) && "PITCH BEND" === r) { let a = 0, s = 0; return a = t + 8192 & 127, s = (t + 8192 & 16256) >> 7, void ("parameter_min" === n ? (this.props.handlePropertyUpdate(e, a, a, this.props.propId, "parameter_min_lsb", "analogs"), this.props.handlePropertyUpdate(e, s, s, this.props.propId, "parameter_min_msb", "analogs")) : "parameter_max" === n && (this.props.handlePropertyUpdate(e, a, a, this.props.propId, "parameter_max_lsb", "analogs"), this.props.handlePropertyUpdate(e, s, s, this.props.propId, "parameter_max_msb", "analogs"))) } this.props.handlePropertyUpdate(e, t, a, this.props.propId, n, "analogs") } canRender(e) { let t = this.props.messageConfig.message; 2 !== this.props.analogType && t >= 6 && (t -= 2); let a = Ma[t]; return "none" !== a.toLowerCase() && Ha[e].includes(a) } render() { let e = this.props.messageConfig, t = e.midi_port, a = e.message, n = e.channel, r = e.split_mode, i = e.parameter, o = e.parameter_lsb, l = e.parameter_msb, c = e.parameter_min, d = e.parameter_min_lsb, p = e.parameter_min_msb, m = e.parameter_max, h = e.parameter_max_lsb, u = e.parameter_max_msb, g = e.key, b = e.modifier, k = e.comment, E = { display: "none" }; var C = e => this.canRender(e) ? {} : E; 2 !== this.props.analogType && a >= 6 && (a -= 2); let y = f.a.range(0, 128), N = (f.a.range(0, 128), f.a.range(0, 128), f.a.range(0, 128)), w = f.a.range(0, 128), _ = "PITCH BEND" === Ma[a].toUpperCase(), x = _ ? p << 7 | d : c, A = _ ? u << 7 | h : m; return s.a.createElement("div", { id: "ytx-config-message_config", className: "ytx-config-container ytx-config-message_config-container" }, s.a.createElement("div", { className: "ytx-config-message_type-container config-input-element" }, s.a.createElement("span", null, "Message Type"), s.a.createElement("br", null), s.a.createElement(me, { options: Ma, placeHolder: Ma[a], selectItem: (e, t, a) => this.updateProperty(e, a, a, "message"), value: a, enabled: !0 })), S(0, 16, this.props.fwVersion) && s.a.createElement("div", { className: "ytx-config-split_mode-container config-input-element", style: C("split_mode") }, s.a.createElement("span", null, "Split mode"), v(), s.a.createElement("br", null), s.a.createElement(me, { options: Ta, placeHolder: Ta[r], selectItem: (e, t, a) => this.updateProperty(e, a, a, "split_mode"), value: Ta[r], enabled: !0 })), s.a.createElement("div", { className: "ytx-config-port-container config-input-element", style: C("port") }, s.a.createElement("span", null, "Port"), s.a.createElement("br", null), s.a.createElement(me, { options: Da, placeHolder: Da[t], selectItem: (e, t, a) => this.updateProperty(e, a, a, "midi_port"), value: Da[t], enabled: !0 })), s.a.createElement("div", { className: "ytx-config-midi_channel-container config-input-element", style: C("channel") }, s.a.createElement("span", null, "Midi CH"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: Ra, placeHolder: n + 1, selectItem: (e, t, a) => this.updateProperty(e, t - 1, t - 1, "channel"), min: Ra[0], max: Ra[15], value: n + 1, step: 1, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_msb-container config-input-element", style: C("parameter_bytes") }, s.a.createElement("span", null, "Parameter (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: N, placeHolder: l, min: 0, max: 127, step: 1, value: l, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb-container config-input-element", style: C("parameter_bytes") }, s.a.createElement("span", null, "Parameter (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: w, placeHolder: o, value: o, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_lsb") })), s.a.createElement("div", { className: "ytx-config-parameter-container config-input-element", style: C("parameter") }, s.a.createElement("span", null, "Parameter"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: y, placeHolder: i, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter"), min: 0, max: 127, step: 1, value: i, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_min-container config-input-element", style: C("parameter_min_max") }, s.a.createElement("span", null, "Min Val"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: _ ? x - 8192 : x, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min"), min: _ ? -8192 : 0, max: _ ? 8191 : 127, step: 1, value: _ ? x - 8192 : x, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_max-container config-input-element", style: C("parameter_min_max") }, s.a.createElement("span", null, "Max Val"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, placeHolder: _ ? A - 8192 : A, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max"), min: _ ? -8192 : 0, max: _ ? 8191 : 127, step: 1, value: _ ? A - 8192 : A, enabled: !0 })), s.a.createElement("div", { className: "ytx-config-parameter_msb_min-container config-input-element", style: C("parameter_bytes_min_max") }, s.a.createElement("span", null, "Min (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: N, placeHolder: p, value: p, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb_min-container config-input-element", style: C("parameter_bytes_min_max") }, s.a.createElement("span", null, "Min (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: w, placeHolder: d, value: d, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_min_lsb") })), s.a.createElement("div", { className: "ytx-config-parameter_msb_max-container config-input-element", style: C("parameter_bytes_min_max") }, s.a.createElement("span", null, "Max (MSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: N, placeHolder: u, value: u, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max_msb") })), s.a.createElement("div", { className: "ytx-config-parameter_lsb_max-container config-input-element", style: C("parameter_bytes_min_max") }, s.a.createElement("span", null, "Max (LSB)"), s.a.createElement("br", null), s.a.createElement(me, { inputNumber: !0, options: w, placeHolder: h, value: h, min: 0, max: 127, step: 1, enabled: !0, selectItem: (e, t, a) => this.updateProperty(e, t, a, "parameter_max_lsb") })), s.a.createElement("div", { className: "ytx-config-modifier_left-container config-input-element", style: C("modifier") }, s.a.createElement("span", null, "Modifier"), s.a.createElement("br", null), s.a.createElement(me, { options: La, placeHolder: La[b], selectItem: (e, t, a) => this.updateProperty(e, a, a, "modifier"), value: La[b], enabled: !0 })), s.a.createElement("div", { className: "ytx-config-key_left-container config-input-element", style: C("key") }, s.a.createElement("span", null, "Key"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: g, selectItem: (e, t, a) => this.updateProperty(e, t, a, "key"), maxLength: 1, ks: !0, enforce_ascii: !0 })), s.a.createElement("div", { className: "ytx-config-comment-container config-input-element", style: C("comment") }, s.a.createElement("span", null, "Comment"), s.a.createElement("br", null), s.a.createElement(tt, { placeHolder: k, selectItem: (e, t, a) => this.updateProperty(e, t, a, "comment"), maxLength: 8, comment: !0 }))) } } var Fa = Ua; a(398), window.console; class Va extends s.a.Component { constructor(e) { super(e), this.handlePropertyUpdate = (e, t, a, n, s, r) => { "message_config" === n && this.sharedProperties.hasOwnProperty(s) ? this.setState({ feedbackMirrorProp: this.sharedProperties[s], feedbackMirrorValue: a }) : this.setState({ feedbackMirrorProp: null, feedbackMirrorValue: null }), this.props.handlePropertyUpdate(e, t, a, n, s, r) }, this.state = { elementProps: e.elementProps, feedbackMirrorProp: null, feedbackMirrorValue: null }, this.handleCollapse = this.handleCollapse.bind(this), this.sharedProperties = { message: "message", parameter: "parameter", parameter_lsb: "parameter_lsb", parameter_msb: "parameter_msb", channel: "channel", midi_port: "source" } } handleCollapse(e) { let t = this.mcCollapsible.contains(e.target) ? this.mcCollapsible : this.fbCollapsible; t.classList.toggle("expanded"), t.classList.toggle("collapsed"), t.children[0].classList.toggle("downn"), t.children[0].classList.toggle("right"), t.nextSibling.classList.toggle("collapse") } render() { return s.a.createElement("div", { className: "ytx-component-config-container", id: "ytx-analog-config-container" }, s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible expanded collapsed", onClick: this.handleCollapse, ref: e => this.mcCollapsible = e }, "MESSAGE CONFIG ", s.a.createElement("i", { className: "chevron-arrow downn" })), s.a.createElement(Fa, { messageConfig: this.props.elementProps.message_config, handlePropertyUpdate: this.handlePropertyUpdate, idx: this.props.idx, propId: "message_config", analogType: this.props.elementProps.general_analog.analog_type, fwVersion: this.props.fwVersion }), this.props.elementProps.has_feedback && s.a.createElement("p", { className: "ytx-config-title config-collapsible collapsible", onClick: this.handleCollapse, ref: e => this.fbCollapsible = e }, "FEEDBACK CONFIG ", s.a.createElement("i", { className: "chevron-arrow right" })), this.props.elementProps.has_feedback && s.a.createElement(ka, { feedbackConfig: this.props.elementProps.feedback_config, analogFeedback: !0, handlePropertyUpdate: this.handlePropertyUpdate, componentMirrorProp: this.state.feedbackMirrorProp, componentMirrorValue: this.state.feedbackMirrorValue, colorRangeList: this.props.analogColorRangeList, idx: this.props.idx, propId: "feedback_config", fwVersion: this.props.fwVersion })) } } var ja = Va; window.console; class qa extends s.a.Component { render() { return s.a.createElement("div", { id: "config-panel", className: "hardware-config-panel" }, s.a.createElement("span", { className: "sidepanel-title" }, "CONFIGURATION    ", s.a.createElement("i", { className: "right" })), s.a.createElement("div", { className: "config-body" }, this.props.currentElement && "encoders" === this.props.currentElement.type ? s.a.createElement(Ca, { elementProps: this.props.currentElement.properties, handlePropertyUpdate: this.props.handlePropertyUpdate, maxBanksNumber: this.props.maxBanksNumber, banksNumber: this.props.banksNumber, switchColorRangeList: this.props.switchColorRangeList, currentBank: this.props.currentBank, idx: this.props.currentElement.idx, loading: this.props.loading, fwVersion: this.props.fwVersion }) : this.props.currentElement && "digitals" === this.props.currentElement.type ? s.a.createElement(Oa, { elementProps: this.props.currentElement.properties, handlePropertyUpdate: this.props.handlePropertyUpdate, digitalColorRangeList: this.props.digitalColorRangeList, idx: this.props.currentElement.idx, fwVersion: this.props.fwVersion }) : this.props.currentElement && "analogs" === this.props.currentElement.type ? s.a.createElement(ja, { elementProps: this.props.currentElement.properties, handlePropertyUpdate: this.props.handlePropertyUpdate, analogColorRangeList: this.props.analogColorRangeList, idx: this.props.currentElement.idx, fwVersion: this.props.fwVersion }) : s.a.createElement("div", null))) } } var Wa = qa; a(399), window.console; class Ka extends s.a.Component { constructor(e, t) { super(e, t), this.components = { config: Wa, banks: Ot } } render() { let e = this.components[this.props.drawerId]; return s.a.createElement("div", { className: "sidedrawer" }, s.a.createElement(e, { currentElement: this.props.currentElement, handlePropertyUpdate: this.props.handlePropertyUpdate, currentBank: this.props.currentBank, banks: this.props.banks, banksNumber: this.props.banksNumber, buttonOptions: this.props.bankButtonOptions, bankButtonSelect: this.props.bankButtonSelect, bankModeSelect: this.props.bankModeSelect, bankMidiChSelect: this.props.bankMidiChSelect, bankColorSelect: this.props.bankColorSelect, addBank: this.props.addBank, deleteBank: this.props.deleteBank, duplicateBank: this.props.duplicateBank, passDataToBank: this.props.passDataToBank, maxBanksNumber: this.props.maxBanksNumber, switchColorRangeList: this.props.switchColorRangeList, digitalColorRangeList: this.props.digitalColorRangeList, analogColorRangeList: this.props.analogColorRangeList, bankColorOptions: this.props.switchColorRangeList, loading: this.props.loading, fwVersion: this.props.fwVersion })) } } var Ga = Ka, Ja = a(173), Qa = a.n(Ja), Ya = a(174), Xa = a.n(Ya), Za = a(175), za = a.n(Za); a(400), window.console; var $a = e => (Object(n.useEffect)(() => { g.a.rebuild() }), s.a.createElement(s.a.Fragment, null, s.a.createElement("button", { id: "config", onClick: e.click, className: "config" === e.id ? e.className : void 0, "data-tip": "Configure component" }, s.a.createElement("img", { src: Qa.a, alt: "config-no-hover", id: "config-no-hover", width: "50px", height: "auto" }), s.a.createElement("img", { src: Xa.a, alt: "config-hover", id: "config-hover", width: "50px", height: "auto" })), s.a.createElement("button", { id: "banks", onClick: e.click, className: "banks" === e.id ? e.className : void 0, "data-tip": "Configure banks" }, s.a.createElement("img", { src: Pa.a, alt: "banks-no-hover", id: "banks-no-hover", width: "50px", height: "auto" }), s.a.createElement("img", { src: za.a, alt: "banks-hover", id: "banks-hover", width: "50px", height: "auto" })))), en = a(71), tn = a(152), an = a(444), nn = a(453), sn = a(452), rn = a(454), on = a(456), ln = a(451); a(401), window.console; let cn = Object(en.a)({ typography: { h6: { fontFamily: ["Karla", "sans-serif"].join(","), fontSize: "1.01rem", textAlign: "center" }, body1: { fontFamily: ["Karla", "sans-serif"].join(","), fontSize: "1em", marginBottom: "1em" } } }); cn = Object(tn.a)(cn); const dn = { paper: { backgroundColor: "#2e2e2e", color: "white", fontFamily: ["Karla", "sans-serif"].join(","), fontSize: "16px", minWidth: "40vw", minHeight: "35vh", maxHeight: "75vh", padding: "1em", overflow: "visible" } }; class pn extends s.a.Component { constructor(e) { super(e), this.handleSelect = (e, t, a) => { this.setState({ selection: t, selectionIdx: a }), this.props.updateInput(a) }, this.loadFromCtrl = e => { null !== this.state.selection ? this.props.onLoadFromCtrl(this.state.selection, this.state.selectionIdx) : this.props.enqueueSnackbar(H, { variant: "warning" }) }, this.loadFromAccount = e => { null !== this.state.selection ? this.props.onLoadFromAccount(this.state.selection, this.state.selectionIdx) : this.props.enqueueSnackbar(H, { variant: "warning" }) }, this.loadDefaultConfig = e => { null !== this.state.selection ? this.props.onLoadDefaultConfig(this.state.selection, this.state.selectionIdx) : this.props.enqueueSnackbar(H, { variant: "warning" }) }, this.loadFromFile = e => { null !== this.state.selection ? this.props.onLoadFromFile(this.state.selection, this.state.selectionIdx) : this.props.enqueueSnackbar(H, { variant: "warning" }) }, this.state = { selection: null } } render() { const e = this.props, t = e.classes, a = e.open, n = e.devices; return s.a.createElement(an.a, { theme: cn }, s.a.createElement(ve.a, { open: a, onClose: this.props.onClose, "aria-labelledby": "device-select-dialog", PaperProps: { classes: { root: t.paper } } }, s.a.createElement(ln.a, { id: "device-select-dialog", variant: "h6" }, "Yaeltex controller(s) found"), s.a.createElement(sn.a, { className: "", style: { overflowY: "visible" } }, s.a.createElement(ln.a, { variant: "body1" }, "To start configuring your controller, please select it from the dropdown below and then load its config from the controller (CTRL), the default config from server (DEFAULT) or file (FILE)"), s.a.createElement(me, { className: "dialog-devices-dropdown", options: n, hiddenIdxs: this.props.hiddenDevices, placeHolder: "----", selectItem: this.handleSelect, enabled: !0 })), s.a.createElement(nn.a, null, s.a.createElement(rn.a, { container: !0, justify: "center" }, s.a.createElement(on.a, { id: "load-from-ctrl-btn", className: "ytx-load-cfg-btn", onClick: this.loadFromCtrl }, s.a.createElement("span", null, "CTRL")), s.a.createElement(on.a, { id: "load-from-account-default-btn", className: "ytx-load-cfg-btn", onClick: this.loadDefaultConfig }, s.a.createElement("span", null, "DEFAULT")), s.a.createElement(on.a, { id: "load-from-desktop-btn", className: "ytx-load-cfg-btn", onClick: this.loadFromFile }, s.a.createElement("span", null, "FILE")))))) } } var mn = Object(o.a)(dn)(Object(l.withSnackbar)(pn)), hn = a(176), un = a.n(hn), gn = a(105), bn = a.n(gn); a(404), a(405); function fn(e) { return new Promise(t => setTimeout(t, e)) } var kn = window.console || { log: function () { } }; const En = [0, 0, 0], Cn = [66, 245, 224], Sn = [245, 66, 84], vn = new Uint8Array([240, 121, 116, 120, 1, 247]), yn = ["Momentary", "Toggle"], Nn = bn.a.tz.guess(); class wn extends n.Component { constructor(e) { var t; super(e), t = this, this.handleDetectDevices = () => { x(this.updateIO), this.backendWebSocket.onopen = null, this.backendPingInterval = setInterval(this.sendPingToBackend, 1e4) }, this.handleMidiMonitorData = (e, t, a, n) => { let s = (e => { let t = null; switch (e) { case 8: t = "Note Off"; break; case 9: t = "Note On"; break; case 11: t = "CC"; break; case 12: t = "PC"; break; case 14: t = "PB" }return t })(e), r = this.state.prevMidiParam, i = this.state.nrpnOnGoing, o = this.state.rpnOnGoing; if (kn.log(r), kn.log(i), kn.log(o), 11 === e) { if (M(a) && !M(r)) return void this.setState({ nrpnOnGoing: !0, prevMidiParam: a, nrpnMSBparam: n }); if (O(a) && M(r) && i) return void this.setState({ prevMidiParam: a, nrpnLSBparam: n }); if (L(a) && O(r) && i) return void this.setState({ prevMidiParam: a, nrpnMSBvalue: n }); if (T(a) && L(r) && i) a = this.state.nrpnMSBparam << 7 | this.state.nrpnLSBparam, n = this.state.nrpnMSBvalue << 7 | n, s = "NRPN", this.setState({ nrpnOnGoing: !1, prevMidiParam: null, nrpnMSBparam: 0, nrpnLSBparam: 0, nrpnLSBvalue: 0, nrpnMSBvalue: 0 }); else { if (D(a) && !D(r)) return void this.setState({ rpnOnGoing: !0, prevMidiParam: a, rpnMSBparam: n }); if (R(a) && D(r) && o) return void this.setState({ prevMidiParam: a, rpnLSBparam: n }); if (L(a) && R(r) && o) return void this.setState({ prevMidiParam: a, rpnMSBvalue: n }); T(a) && L(r) && o ? (a = this.state.rpnMSBparam << 7 | this.state.rpnLSBparam, n = this.state.rpnMSBvalue << 7 | n, s = "RPN", this.setState({ rpnOnGoing: !1, prevMidiParam: null, rpnMSBparam: 0, rpnLSBparam: 0, rpnLSBvalue: 0, rpnMSBvalue: 0 })) : this.setState({ rpnOnGoing: !1, nrpnOnGoing: !1, prevMidiParam: null }) } } else (e => 12 === e)(e) ? n = "-" : (e => 14 === e)(e) && (n = (n << 7 | a) - 8192, a = "-"); kn.log(s, t, a, n), this.setState(e => (19 === e.monitorData.length && e.monitorData.pop(), { monitorData: [{ timestamp: bn.a.utc().tz(Nn).format("HH:mm:ss.SSSS"), name: this.state.currentDeviceName, channel: t, type: s, param: a, value: n }].concat(e.monitorData) })) }, this.requestFwVersion = function () { var e = Object(u.a)(h.a.mark((function e(a, n) { var s, r; return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (s = j()(), r = n || 2e3, a || -1 !== t.state.inputSelected && (a = t.findOutputForCurrentDevice()), a) { e.next = 6; break } return t.props.enqueueSnackbar(F, { variant: "error" }), e.abrupt("return"); case 6: e.prev = 6, t.backendWebSocket.send(JSON.stringify({ message: { command: "special-requests", subcommand: "firmware_version", request_id: s } })), e.next = 14; break; case 10: return e.prev = 10, e.t0 = e.catch(6), kn.log("Could not send firmware version request to backend", e.t0), e.abrupt("return"); case 14: return e.next = 16, t.waitFor(2e3, s, !0); case 16: if (t.state[s]) { e.next = 19; break } return t.props.enqueueSnackbar("Could not send handshake request to device", { variant: "error" }), e.abrupt("return", !1); case 19: t.setState({ [s]: !1 }); try { t.sendSysexToDevice(t.state.fwVersionCommand, a) } catch (i) { kn.log("ERROR WHILE SENDING FIRMWARE VERSION REQUEST: ", i) } return e.next = 23, t.waitFor(r, a.id, !0); case 23: !0 === t.state[a.id], t.setState({ [a.id]: !1 }); case 25: case "end": return e.stop() } }), e, null, [[6, 10]]) }))); return function (t, a) { return e.apply(this, arguments) } }(), this.refreshPorts = () => { this.setState({ refreshing: !0 }, () => { x(this.updateIO) }) }, this.checkKMXDevice = function () { var e = Object(u.a)(h.a.mark((function e(a, n) { return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, t.initiateHandshakeWithDevice(a, n); case 2: return e.abrupt("return", e.sent); case 3: case "end": return e.stop() } }), e) }))); return function (t, a) { return e.apply(this, arguments) } }(), this.checkKMXVersions = function () { var e = Object(u.a)(h.a.mark((function e(a, n) { var s, r; return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, t.requestFwVersion(a, n); case 2: return s = e.sent, e.next = 5, t.requestHwVersion(a, n); case 5: return r = e.sent, e.abrupt("return", [s, r]); case 7: case "end": return e.stop() } }), e) }))); return function (t, a) { return e.apply(this, arguments) } }(), this.getOutputPort = () => { if (null === this.state.currentDeviceName) return void this.props.enqueueSnackbar(H, { variant: "error" }); let e = f.a.find(this.state.outputsAccess, e => e.name === this.state.currentDeviceName); if (e) return e; this.props.enqueueSnackbar(H, { variant: "error" }) }, this.validateHwConfig = e => { let t = e.usb_pid; Number.isInteger(t) || (t = parseInt(t, 16)), kn.log("usb pid", t); let a = e.device_name, n = e.usb_serial, s = !0; return isNaN(t) || t > 65535 ? (s = !1, this.props.enqueueSnackbar("Invalid PID, it must be a hex value between 0000 and 3fff", { variant: "error" })) : e.usb_pid = t, (!a || a.length > 15) && (s = !1, this.props.enqueueSnackbar("Device name must not be empty and it must be 15 characters long at most", { variant: "error" })), (!n || n.length > 9) && (s = !1, this.props.enqueueSnackbar("USB Serial must not be empty and it must be 9 characters long at most", { variant: "error" })), s }, this.drawerToggleClickHandler = e => { let t = e.currentTarget.id; this.setState(e => { let a = e.drawerOpen ? t !== e.drawerId : !e.drawerOpen; return { drawerOpen: a, drawerId: t, drawerClass: a ? "open" : "" } }) }, this.openConfigBox = () => { this.setState({ drawerOpen: !0, drawerId: "config", drawerClass: "open" }) }, this.handleElementBlink = (e, t, a) => { e && (kn.log(a, t), this.setState(e => (this.state.onCapture || e.drawerOpen && "banks" !== e.drawerId || (e.drawerOpen = !0, e.drawerId = "config", e.drawerClass = "open"), { blinkIdx: t, blinkType: a, drawerId: e.drawerId, drawerClass: e.drawerClass, drawerOpen: e.drawerOpen }))) }, this.setShiftersBankParams = e => { let t = e.button; "None" !== t && (t = parseInt(t)); let a = this.state.bankButtonsInUse, n = Object.keys(this.state.banks[0].encoders).length; f.a.forEach(a, a => { if (a === t) return !1; let s, r = a < n ? a : a - n, i = this.state.shifterIdColor[a]; a < n ? (s = e.encoders[r], s.switch_feedback.color_range_enable = 0, s.switch_feedback.color = i, s.switch_feedback.disabled = !0, s.switch_config.disabled = !0) : (s = e.digitals[r], s.feedback_config.color_range_enable = 0, s.feedback_config.color = i, s.disabled = !0, s.bank_num = this.state.shifterIdBank[a]) }) }, this.handleBankColorSelect = (e, t) => { let a = Object.keys(this.state.banks[0].encoders).length, n = this.state.bankButtonsInUse; this.setState(s => { let r = 0, i = s.banks[t], o = i.button; if ("None" !== o && (o = parseInt(o)), f.a.forEach(i.encoders, a => { let i = r.toString().padStart(2, "0"); a.rotation_feedback.color = e, r !== o && n.includes(r) || (s.shifterIdColor[o] = e, a.switch_feedback.color_range_enable = 0, a.switch_feedback.color = e); let l = parseInt(i) + this.state.componentsCount * t; s.outOfSync.includes(i) || s.outOfSync.push(i), s.outOfSyncInts.includes(l) || s.outOfSyncInts.push(l), r += 1 }), f.a.forEach(i.digitals, a => { let i = r.toString().padStart(2, "0"); r !== o && n.includes(r) || (s.shifterIdColor[o] = e, a.feedback_config.color_range_enable = 0, a.feedback_config.color = e); let l = parseInt(i) + this.state.componentsCount * t; s.outOfSync.includes(i) || s.outOfSync.push(i), s.outOfSyncInts.includes(l) || s.outOfSyncInts.push(l), r += 1 }), f.a.forEach(i.analogs, a => { let n = r.toString().padStart(2, "0"); r += 1, a.feedback_config.color_range_enable = 0, a.feedback_config.color = e; let i = parseInt(n) + this.state.componentsCount * t; s.outOfSync.includes(n) || s.outOfSync.push(n), s.outOfSyncInts.includes(i) || s.outOfSyncInts.push(i) }), i.color = e, "None" !== i.button) { let n = parseInt(i.button); f.a.forEach(s.banks, (r, i) => { if (kn.log(r, i), i === t) return; let o, l = n.toString().padStart(2, "0"), c = n + this.state.componentsCount * i; s.outOfSync.includes(l) || s.outOfSync.push(l), s.outOfSyncInts.includes(c) || s.outOfSyncInts.push(c), n < a ? (o = r.encoders[n], o.switch_feedback.color_range_enable = 0, o.switch_feedback.color = e) : (o = r.digitals[n - a], o.feedback_config.color_range_enable = 0, o.feedback_config.color = e) }) } return s }) }, this.closeLoadConfigModal = () => { this.setState({ selectAndLoadOpen: !1 }) }, this.handleLoadDefaultConfig = (e, a) => { if (kn.log("loading default config:", e, a), e) this.closeLoadConfigModal(); else { if (-1 === this.state.inputSelected) return void this.props.enqueueSnackbar(H, { variant: "error" }); e = this.state.inputs[this.state.inputSelected], a = this.state.inputSelected } this.state.loading || (this.setState({ currentDeviceName: e, inputSelected: a, onHardwareConfig: !1 }), this.backendWebSocket.readyState === this.backendWebSocket.OPEN ? this.setState({ loading: !0 }, Object(u.a)(h.a.mark((function n() { var s, r, i; return h.a.wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: return t.props.enqueueSnackbar("Loading default config from server, please wait...", { variant: "info" }), f.a.find(t.state.outputsAccess, (t, n) => t.name === e && (a = n, !0)), n.next = 4, t.getGeneralConfigBlock(a); case 4: if (!1 !== (s = n.sent)) { n.next = 8; break } return t.setState({ onHardwareConfig: !0, loading: !1, invalidHWConfig: !1 }), n.abrupt("return"); case 8: if (kn.log(">> GENERAL CONFIG:", s), null !== s && void 0 !== s) { n.next = 12; break } return t.setState({ loading: !1, currentDeviceName: null, inputSelected: -1 }, () => t.props.enqueueSnackbar("Could not get device BLOCK 0 to load config", { variant: "error" })), n.abrupt("return"); case 12: t.setState({ hwConfig: { fw_version_major: s.fw_version_major, fw_version_minor: s.fw_version_minor } }), r = s.device_name, i = s.usb_serial, t.backendWebSocket.send(JSON.stringify({ message: { command: "get-config", subcommand: "default", device_name: r, serial: i } })), kn.log(">> BACKEND MESSAGE SENT:", r, i); case 16: case "end": return n.stop() } }), n) })))) : this.props.enqueueSnackbar(U, { variant: "error" })) }, this.getCompleteConfigFromController = function () { var e = Object(u.a)(h.a.mark((function e(a, n) { var s, r, i; return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: s = Object(p.a)(n), e.prev = 1, s.s(); case 3: if ((r = s.n()).done) { e.next = 14; break } return i = r.value, e.next = 7, t.sendSysexToDevice(i); case 7: return e.next = 9, fn(10); case 9: return e.next = 11, t.waitFor(2e3, "validBlockReceived", !0); case 11: e.sent; case 12: e.next = 3; break; case 14: e.next = 19; break; case 16: e.prev = 16, e.t0 = e.catch(1), s.e(e.t0); case 19: return e.prev = 19, s.f(), e.finish(19); case 22: t.setState({ validBlockReceived: !1 }); case 23: case "end": return e.stop() } }), e, null, [[1, 16, 19, 22]]) }))); return function (t, a) { return e.apply(this, arguments) } }(), this.setInitialStateForController = Object(u.a)(h.a.mark((function e() { var a, n, s, r, i, o, l, c, d, p, m, u, g, b, k; return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: for (a = Object.keys(t.state.banks).length, n = t.state.hwconfig, s = [], r = {}, i = {}, o = Object.keys(t.state.banks[0].encoders).length, l = Object.keys(t.state.banks[0].digitals).length, c = Object.keys(t.state.banks[0].analogs).length, d = 0; d < a; d++)65535 !== (p = n.banksIds[d]) && (g = "encoders" === (m = p < o ? "encoders" : "digitals") ? p : p - o, b = "encoders" === m ? "switch_feedback" : "feedback_config", k = f.a.cloneDeep(t.state.banks[d][m][g][b].color), u = f.a.cloneDeep(t.state.banks[d][m][g][b].channel), s.push(p), r[p] = d, i[p] = k), t.state.banks[d].color = "encoders" === m ? f.a.isEqual(k, Cn) ? "None" : k : "digitals" === m ? f.a.isEqual(k, Sn) ? "None" : k : "None", t.state.banks[d].button = 65535 === p ? "None" : p.toString(), t.state.banks[d].mode = yn[n.banksModes[d]], t.state.banks[d].midi_ch = u ? (u + 1).toString() : "None", "encoders" === m ? t.assignBankToEncoderSwitch(g) : "digitals" === m && t.assignBankToDigital(g, d + 1); t.setState(e => ({ banksNumber: a, componentsCount: o + l + c, bankButtonsInUse: s, banksModes: n.banksModes, shifterIdBank: r, shifterIdColor: i, loading: !1, detectDevices: !1, configLoaded: !0, hwConfigDeviceName: n.device_name }), () => { t.props.enqueueSnackbar("Config loaded successfully", { variant: "success" }), y(n, t.props.enqueueSnackbar, t.props.closeSnackbar) }); case 10: case "end": return e.stop() } }), e) }))), this.setNewSection = (e, t, a, n) => { let s = this.state.expectedSections - 1; this.setState(r => { let i = r.banks; return i.hasOwnProperty(e) || (i[e] = {}, i[e].encoders = {}, i[e].digitals = {}, i[e].analogs = {}, i[e].feedbacks = {}), i[e].hasOwnProperty(t) || (i[e][t] = {}), i[e][t][a] = n, "analogs" === t && (i[e][t][a].has_feedback = this.state.analogsWithFeedback[a]), r.banks = i, r.validBlockReceived = !0, r.expectedSections = s, r }, () => { 0 === s && (kn.log("BANKS:", this.state.banks), kn.log("SETTING INITIAL STATE FOR CONTROLLER"), this.setInitialStateForController()) }) }, this.getGeneralConfigBlock = function () { var e = Object(u.a)(h.a.mark((function e(a) { var n, s; return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (t.backendWebSocket.readyState === t.backendWebSocket.OPEN) { e.next = 3; break } return t.setState({ loading: !1 }, () => t.props.enqueueSnackbar(U, { variant: "error" })), e.abrupt("return"); case 3: if (n = t.state.outputsAccess[a]) { e.next = 7; break } return t.setState({ loading: !1 }, () => t.props.enqueueSnackbar(H, { variant: "error" })), e.abrupt("return"); case 7: return t.backendWebSocket.send(JSON.stringify({ message: { command: "get-block", block: 0, output_id: n.id, random: j()() } })), e.next = 10, t.waitFor(5e3, "validBlockReceived", !0); case 10: return s = null, t.state.validBlockReceived && !0 === t.state.invalidHWConfig ? (t.props.enqueueSnackbar("Invalid HwConfig", { variant: "info" }), s = !1) : t.state.validBlockReceived && (s = t.state.generalConfig), t.setState({ validBlockReceived: !1 }), e.abrupt("return", s); case 14: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), this.onCapture = (e, t) => { e.persist(), this.state.capturing ? (this.setState({ capturing: !1, blinkIdx: -1, blinkType: "", lastBlinkIdx: -1, lastBlinkType: "" }), e.target.checked = !1) : this.setState({ capturing: !0 }), this.sendCaptureRequestToBackend(t) }, this.sendCaptureRequestToBackend = e => { this.backendWebSocket.readyState === this.backendWebSocket.OPEN ? this.backendWebSocket.send(JSON.stringify({ message: { command: "special-requests", subcommand: "capture", capture_on: e } })) : this.setState({ saving: !1 }, () => this.props.enqueueSnackbar(U, { variant: "error" })) }, this.requestCaptureToDevice = function () { var e = Object(u.a)(h.a.mark((function e(a, n) { var s, r, i; return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (s = n ? "On" : "Off", r = t.getOutputPort()) { e.next = 4; break } return e.abrupt("return"); case 4: return kn.log(r.id), t.sendSysexToDevice(a), e.next = 8, t.waitFor(2e3, r.id, !0); case 8: i = e.sent, kn.log(i), t.state[r.id] ? t.props.enqueueSnackbar("Capture Mode " + s, { variant: "success" }) : (t.setState({ capturing: !1 }), t.props.enqueueSnackbar("Did not receive Ack for Capture Mode", { variant: "error" })), t.setState({ [r.id]: !1 }); case 12: case "end": return e.stop() } }), e) }))); return function (t, a) { return e.apply(this, arguments) } }(), this.handleComponentCapture = (e, t, a) => { let n = e, s = Object.keys(this.state.banks[0].encoders).length, r = Object.keys(this.state.banks[0].digitals).length; t >= s && t < s + r ? t -= s : t >= s && (t = t - s - r), Object.keys(this.state.banks[this.state.currentBank][n]).length > t && this.handleElementBlink(!0, t, n) }, this.handleMidiMonitorToggle = () => { this.setState(e => ({ monitoring: !e.monitoring })) }, this.midiMonitorInterval = () => { this.handleMidiMonitorData(14, 1, Math.floor(127 * Math.random()) + 1, Math.floor(127 * Math.random()) + 1) }, this.handleTakeoverMode = e => { this.setState(t => ({ takeover: e, hwconfig: Object(d.a)(Object(d.a)({}, t.hwconfig), {}, { takeover: e }) })) }, this.handleRainbowToggle = () => { this.setState(e => ({ rainbow: !e.rainbow, hwconfig: Object(d.a)(Object(d.a)({}, e.hwconfig), {}, { rainbow: !e.rainbow }) })) }, this.handleRemoteBanksToggle = () => { this.setState(e => ({ remoteBanks: !e.remoteBanks, hwconfig: Object(d.a)(Object(d.a)({}, e.hwconfig), {}, { remoteBanks: !e.remoteBanks }) })) }, this.handleRememberStateToggle = () => { this.setState(e => ({ rememberState: !e.rememberState, hwconfig: Object(d.a)(Object(d.a)({}, e.hwconfig), {}, { rememberState: !e.rememberState }) })) }, this.handleDumpStateOnStartupToggle = () => { this.setState(e => ({ dumpStateOnStartup: !e.dumpStateOnStartup, hwconfig: Object(d.a)(Object(d.a)({}, e.hwconfig), {}, { dumpStateOnStartup: !e.dumpStateOnStartup }) })) }, this.resetEeprom = Object(u.a)(h.a.mark((function e() { var a; return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (a = j()(), t.backendWebSocket.readyState === t.backendWebSocket.OPEN) { e.next = 4; break } return t.setState({ saving: !1 }, () => t.props.enqueueSnackbar(U, { variant: "error" })), e.abrupt("return"); case 4: return t.backendWebSocket.send(JSON.stringify({ message: { command: "special-requests", subcommand: "reset", request_id: a } })), e.next = 7, t.waitFor(2e3, a, !0); case 7: e.sent && (t.props.enqueueSnackbar("Sending Reset Command to device", { variant: "info" }), t.sendSysexToDevice(t.state.resetCommand)); case 9: case "end": return e.stop() } }), e) }))), this.getNextShifterIdAvailable = () => { let e = Object.keys(this.state.banks[0].encoders).length, t = Object.keys(this.state.banks[0].digitals).length; for (let a = 0; a < e; a++)if (!this.state.bankButtonsInUse.includes(a)) return a; for (let a = e; a < e + t; a++)if (!this.state.bankButtonsInUse.includes(a)) return a; return "None" }, this.handleFirmwareUpdateBehaviour = (e, t) => { }; this.state = { webmidiEnabled: !1, midiAccess: null, inputs: [], outputs: [], hiddenDevices: [], kmxInputs: {}, kmxOutputs: {}, idsWithHandshakeSent: [], idsDisconnected: [], inputSelected: -1, outputSelected: -1, midiMergeOption: new Array(4).fill(0), filter: "encoder", showElementsOptions: ["Encoders", "Digitals", "Analogs", "Feedbacks"], drawerOpen: !1, drawerId: null, drawerClass: "", onHardwareConfig: !1, encoders: null, digitals: null, analogs: null, feedbacks: null, hwconfig: null, configuring: !1, invalidHWConfig: !1, configLoaded: !1, rebooting: !1, detectingDevices: !0, banksNumber: 1, currentBank: 0, banks: {}, maxBanksNumber: 8, defaultBank: null, componentsCount: 0, bankButtonsInUse: [], shifterIdColor: {}, shifterIdBank: {}, onCapture: !1, bank_capture: null, banksButtonsId: new Array(8).fill(0), banksModes: new Array(8).fill(0), currentElement: { type: null, properties: null }, currentElementType: "encoders", sysexValidRequest: !1, sysexEchoMessage: null, handshakeRequestReceived: {}, handshakeCommand: null, handshakeSuccessful: !1, successfulConfig: !1, inputsAccess: null, outputsAccess: null, wsCheckAttempts: 3, saving: !1, loading: !1, currentSerialNumber: null, currentDeviceName: null, firstConnection: !0, selectAndLoadOpen: !1, filter: { type: null, search: "" }, outOfSync: [], outOfSyncInts: [], partialUpdate: !0, monitoring: !1, monitorData: [{ timestamp: "-", name: "-", channel: "-", type: "-", param: "-", value: "-" }], blinkIdx: -1, blinkType: "", takeoverOptions: ["None", "Pick Up", "Value Scaling"], takeover: 0, rainbow: !0, fwVersion: null, remoteBanks: 0, factoryReset: 0, dumpStateOnStartup: 0, rememberState: 0, prevMidiParam: null, nrpnOnGoing: !1, rpnOnGoing: !1, nrpnLSBparam: 0, nrpnMSBparam: 0, rpnLSBparam: 0, rpnMSBparam: 0, nrpnLSBvalue: 0, nrpnMSBvalue: 0, rpnLSBvalue: 0, rpnMSBvalue: 0, introVideoOpen: !1, ctrlVersionCache: {}, encodersSelected: new Set, digitalsSelected: new Set, analogsSelected: new Set }, this.ws_scheme = "https:" === window.location.protocol ? "wss" : "ws", this.backendWebSocket = new WebSocket(this.ws_scheme + "://kw-api.yaeltex.com/ws/kilowhat/ytxuser/"), this.backendWebSocket.onopen = this.handleDetectDevices.bind(this), this.backendWebSocket.onmessage = this.handleBackendMessage.bind(this), this.backendWebSocket.onclose = this.handleBackendClose.bind(this), this.backendWebSocket.onerror = this.handleBackendError.bind(this), this.connectToBackend = this.connectToBackend.bind(this), this.sendPingToBackend = this.sendPingToBackend.bind(this), this.handleChange = this.handleChange.bind(this), this.handleShowChange = this.handleShowChange.bind(this), this.onExitHardwareConfig = this.onExitHardwareConfig.bind(this), this.onEnterHardwareConfig = this.onEnterHardwareConfig.bind(this), this.onConfigHardwareMapping = this.onConfigHardwareMapping.bind(this), this.handleElementSelected = this.handleElementSelected.bind(this), this.handlePropertyUpdate = this.handlePropertyUpdate.bind(this), this.handleLoadFromDesktop = this.handleLoadFromDesktop.bind(this), this.handleLoadFromAccount = this.handleLoadFromAccount.bind(this), this.handleLoadFromController = this.handleLoadFromController.bind(this), this.handleSaveToAccount = this.handleSaveToAccount.bind(this), this.handleSaveToDesktop = this.handleSaveToDesktop.bind(this), this.handleDesktopFile = this.handleDesktopFile.bind(this), this.validateConfig = this.validateConfig.bind(this), this.MOMENTARY = 0, this.TOGGLE = 1, this.getBankButtonOptions = this.getBankButtonOptions.bind(this), this.handleBankButtonSelect = this.handleBankButtonSelect.bind(this), this.assignBankToEncoderSwitch = this.assignBankToEncoderSwitch.bind(this), this.allowEncoderSwitchConfig = this.allowEncoderSwitchConfig.bind(this), this.assignBankToDigital = this.assignBankToDigital.bind(this), this.allowDigitalConfig = this.allowDigitalConfig.bind(this), this.handleBankModeSelect = this.handleBankModeSelect.bind(this), this.handleBankMidiChSelect = this.handleBankMidiChSelect.bind(this), this.handleAddBank = this.handleAddBank.bind(this), this.handleBankSelect = this.handleBankSelect.bind(this), this.handleBankDelete = this.handleBankDelete.bind(this), this.handleBankDuplicate = this.handleBankDuplicate.bind(this), this.handlePassDataToBank = this.handlePassDataToBank.bind(this), this.handleSendToDevice = this.handleSendToDevice.bind(this), this.updateIO = this.updateIO.bind(this), this.updateInput = this.updateInput.bind(this), this.updateOutput = this.updateOutput.bind(this), this.sendConfigToDevice = this.sendConfigToDevice.bind(this), this.onMIDIMessage = this.onMIDIMessage.bind(this), this.onMIDIStateChange = this.onMIDIStateChange.bind(this), this.sendSysexToBackend = this.sendSysexToBackend.bind(this), this.initiateHandshakeWithDevice = this.initiateHandshakeWithDevice.bind(this), this.updateMidiMerge = this.updateMidiMerge.bind(this), this.onFilterSelected = this.onFilterSelected.bind(this), this.onFilterSearch = this.onFilterSearch.bind(this), this.waitFor = this.waitFor.bind(this) } onMIDIMessage(e, t, a) { if (kn.log("MIDI MESSAGE RECEIVED:", e), 240 === e.data[0] && 247 === e.data[e.data.length - 1]) { if (kn.log(">> SYSEX RECEIVED from ", t, ": ", e.data), (this.state.configuring || this.state.loading) && f.a.isEqual(e.data, vn)) return void this.setState({ [a]: !0 }); this.sendSysexToBackend(e.data, a), window.performance.mark("sysexSendEnd") } else if ((e => { B.log("data:", e); let t = (e => (240 & e) >> 4)(e); return B.log("cmd:", t), t >= 8 && t <= 14 })(e.data[0]) && this.state.monitoring) { let t = { command: (240 & (n = e.data[0])) >> 4, channel: 1 + (15 & n) }, a = t.command, s = t.channel, r = e.data[1], i = e.data[2]; kn.log(">> MIDI MESSAGE ARRIVED:", e.data[0], e.data[1], e.data[2]), this.handleMidiMonitorData(a, s, r, i) } var n } sendSysexToBackend(e, t) { if (this.backendWebSocket.readyState !== this.backendWebSocket.OPEN) return this.setState({ configuring: !1 }), void this.props.enqueueSnackbar(U, { variant: "error" }); let a = JSON.stringify(e); try { this.backendWebSocket.send(JSON.stringify({ message: { sysex: a, command: "decode", output_id: t } })) } catch (n) { kn.log("Could not send sysex to backend", n) } } waitFor(e, t, a) { var n = this; return Object(u.a)(h.a.mark((function s() { var r; return h.a.wrap((function (s) { for (; ;)switch (s.prev = s.next) { case 0: r = 0; case 1: if (f.a.isEqual(n.state[t], a) || !(r < e)) { s.next = 7; break } return s.next = 4, fn(1); case 4: r += 10, s.next = 1; break; case 7: return s.abrupt("return", f.a.isEqual(n.state[t], a)); case 8: case "end": return s.stop() } }), s) })))() } initiateHandshakeWithDevice(e, t) { var a = this; return Object(u.a)(h.a.mark((function n() { var s, r, i; return h.a.wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: if (s = j()(), r = t || 2e3, e || -1 !== a.state.inputSelected && (e = a.findOutputForCurrentDevice()), e) { n.next = 6; break } return a.props.enqueueSnackbar(F, { variant: "error" }), n.abrupt("return"); case 6: n.prev = 6, a.backendWebSocket.send(JSON.stringify({ message: { command: "special-requests", subcommand: "handshake", request_id: s } })), n.next = 14; break; case 10: return n.prev = 10, n.t0 = n.catch(6), kn.log("Could not send handshake to backend", n.t0), n.abrupt("return"); case 14: return n.next = 16, a.waitFor(2e3, s, !0); case 16: if (a.state[s]) { n.next = 19; break } return a.props.enqueueSnackbar("Could not send handshake request to device", { variant: "error" }), n.abrupt("return", !1); case 19: a.setState({ [s]: !1 }); try { a.sendSysexToDevice(a.state.handshakeCommand, e) } catch (o) { kn.log("ERROR WHILE SENDING HANDSHAKE: ", o) } return n.next = 23, a.waitFor(r, e.id, !0); case 23: return i = !0 === a.state[e.id], a.setState({ [e.id]: !1 }), n.abrupt("return", i); case 26: case "end": return n.stop() } }), n, null, [[6, 10]]) })))() } updateIO(e, t, a) { let n = []; a.inputs.forEach(function (e, a) { kn.log(e); let s = f.a.find(t, t => t.name === e.name); if (!s) return n.push(a), void kn.log(">> No output find for input with name: ", e.name); let r = s.id; kn.log(r), e.onmidimessage = t => { this.onMIDIMessage(t, e.name, r) } }.bind(this)), this.state.refreshing && this.props.enqueueSnackbar("Ports refreshed", { variant: "success" }), this.setState(s => { let r = f.a.filter(t, (e, t) => !0), i = f.a.map(r, (e, t) => e.name), o = f.a.filter(e, (e, t) => !0), l = f.a.map(o, (e, t) => e.name); return null !== s.midiAccess && void 0 !== s.midiAccess && (s.midiAccess.onmidistatechange = null), { inputs: l, outputs: i, hiddenDevices: n, webmidiEnabled: !0, inputsAccess: o, outputsAccess: r, refreshing: !1, detectingDevices: !1, idsWithHandshakeSent: [], idsDisconnected: [], midiAccess: a } }, () => { a.onstatechange = this.onMIDIStateChange }) } onMIDIStateChange(e) { var t = this; return Object(u.a)(h.a.mark((function a() { var n, s, r, i, o, l, c, d, p, m, u, g; return h.a.wrap((function (a) { for (; ;)switch (a.prev = a.next) { case 0: if (n = e.port, s = n.id, r = n.state, i = n.name, n.manufacturer, o = n.type, n.connection, l = 2e3, kn.log("midi state change:", e), kn.log("midiAccess:", t.state.midiAccess), "input" !== o || "connected" !== r) { a.next = 27; break } if (void 0 !== (d = f.a.find(t.state.inputsAccess, (e, t) => e.id === s && (c = t, !0)))) { a.next = 10; break } return t.setState(e => { let t = e.inputsAccess, a = e.inputs; return { inputsAccess: t.concat(n), inputs: a.concat(i) } }), a.abrupt("return"); case 10: if (void 0 !== (m = f.a.find(t.state.outputsAccess, (e, t) => e.name === d.name && (p = t, !0)))) { a.next = 13; break } return a.abrupt("return"); case 13: if (!t.state.idsWithHandshakeSent.includes(m.id)) { a.next = 15; break } return a.abrupt("return"); case 15: if (t.state.idsDisconnected.includes(d.id) && (l = 5e3), void 0 === m) { a.next = 25; break } return kn.log(">> SENDING HANDSHAKE TO POTENTIAL KMX DEVICE:", m), u = !1, kn.log(">> OUTPUT PORT OPEN"), a.next = 22, t.checkKMXDevice(m, l); case 22: u = a.sent, kn.log(">> KMX?:", u, m, p), u ? (t.props.enqueueSnackbar("Kilomux device connected!", { variant: "info" }), g = !1, t.setState(e => (e.idsWithHandshakeSent.includes(m.id) || (e.idsWithHandshakeSent = e.idsWithHandshakeSent.concat(m.id)), !e.firstConnection && null !== t.state.currentDeviceName || t.state.rebooting || (e.firstConnection = !1, e.selectAndLoadOpen = !0), t.state.rebooting && m.name.includes(t.state.hwConfigDeviceName) && (e.rebooting = !1, e.currentDeviceName = m.name, e.inputSelected = p, g = e.capturing), e.idsDisconnected = f.a.filter(e.idsDisconnected, e => e !== d.id), e.hiddenDevices = f.a.filter(e.hiddenDevices, e => e !== c), { idsWithHandshakeSent: e.idsWithHandshakeSent, firstConnection: e.firstConnection, selectAndLoadOpen: e.selectAndLoadOpen, idsDisconnected: e.idsDisconnected, rebooting: e.rebooting, currentDeviceName: e.currentDeviceName, inputSelected: e.inputSelected }), () => g && t.sendCaptureRequestToBackend(!0))) : (m.close(), n.close(), t.setState(e => (e.hiddenDevices.includes(c) || (e.hiddenDevices = e.hiddenDevices.concat(c)), e.idsWithHandshakeSent.includes(m.id) || (e.idsWithHandshakeSent = e.idsWithHandshakeSent.concat(m.id)), { hiddenDevices: e.hiddenDevices, idsWithHandshakeSent: e.idsWithHandshakeSent }))); case 25: a.next = 61; break; case 27: if ("input" !== o || "disconnected" !== r) { a.next = 40; break } if (n.onmidistatechange = null, void 0 !== (d = f.a.find(t.state.inputsAccess, (e, t) => e.id === s && (c = t, !0)))) { a.next = 32; break } return a.abrupt("return"); case 32: (m = f.a.find(t.state.outputsAccess, (e, t) => e.name === d.name)).onmidistatechange = null, t.state.idsWithHandshakeSent.includes(m.id) && t.setState(e => (e.idsWithHandshakeSent = f.a.filter(e.idsWithHandshakeSent, e => e !== m.id), e)), t.state.inputSelected === c && t.setState({ inputSelected: -1, currentDeviceName: null, firstConnection: !0 }), t.state.idsDisconnected.includes(d.id) || t.setState(e => (e.idsDisconnected = e.idsDisconnected.concat(d.id), e)), t.state.hiddenDevices.includes(c) || t.setState(e => (e.hiddenDevices = e.hiddenDevices.concat(c), e)), a.next = 61; break; case 40: if ("output" !== o || "connected" !== r) { a.next = 61; break } if (!t.state.idsWithHandshakeSent.includes(s)) { a.next = 43; break } return a.abrupt("return"); case 43: if (void 0 !== (m = f.a.find(t.state.outputsAccess, (e, t) => e.id === s && (p = t, !0)))) { a.next = 61; break } if (t.setState(e => { let t = e.outputsAccess; return p = t.length, e.idsWithHandshakeSent = e.idsWithHandshakeSent.concat(s), { outputsAccess: t.concat(n) } }), void 0 !== (d = f.a.find(t.state.inputsAccess, (e, t) => e.name === n.name && (c = t, !0)))) { a.next = 50; break } return kn.log(">> Did not find input matching output name: ", n.name), a.abrupt("return"); case 50: return l = 5e3, m = n, d.onmidimessage = e => { t.onMIDIMessage(e, d.name, s) }, kn.log(">> SENDING HANDSHAKE TO POTENTIAL KMX DEVICE:", m), u = !1, kn.log(">> OUTPUT PORT OPEN"), a.next = 58, t.checkKMXDevice(m, l); case 58: u = a.sent, kn.log(">> KMX?:", u, m, p), u ? (t.props.enqueueSnackbar("Kilomux device connected!", { variant: "info" }), g = !1, t.setState(e => (e.idsWithHandshakeSent.includes(m.id) || (e.idsWithHandshakeSent = e.idsWithHandshakeSent.concat(m.id)), !e.firstConnection && null !== t.state.currentDeviceName || t.state.rebooting || (e.firstConnection = !1, e.selectAndLoadOpen = !0), t.state.rebooting && m.name.includes(t.state.hwConfigDeviceName) && (e.rebooting = !1, e.currentDeviceName = m.name, e.inputSelected = p, g = e.capturing), e.idsDisconnected = f.a.filter(e.idsDisconnected, e => e !== d.id), e.hiddenDevices = f.a.filter(e.hiddenDevices, e => e !== c), { idsWithHandshakeSent: e.idsWithHandshakeSent, firstConnection: e.firstConnection, selectAndLoadOpen: e.selectAndLoadOpen, idsDisconnected: e.idsDisconnected, rebooting: e.rebooting, currentDeviceName: e.currentDeviceName, inputSelected: e.inputSelected }), () => g && t.sendCaptureRequestToBackend(!0))) : (m.close(), d.close(), t.setState(e => (e.hiddenDevices.includes(c) || (e.hiddenDevices = e.hiddenDevices.concat(c)), e.idsWithHandshakeSent.includes(m.id) || (e.idsWithHandshakeSent = e.idsWithHandshakeSent.concat(m.id)), { hiddenDevices: e.hiddenDevices, idsWithHandshakeSent: e.idsWithHandshakeSent }))); case 61: case "end": return a.stop() } }), a) })))() } updateInput(e) { let t = null; -1 !== e && (t = this.state.inputs[e]), f.a.forEach(this.state.inputsAccess, (t, a) => { if (a === e) return !1; t.close(), this.state.outputsAccess.length > a && this.state.outputsAccess[a].close() }), -1 !== e && (this.state.inputsAccess[e].open(), this.state.outputsAccess.length > e && this.state.outputsAccess[e].open()); let a = !1; this.setState(n => (a = n.capturing, { inputSelected: e, currentDeviceName: t }), () => a && this.sendCaptureRequestToBackend(!0)) } updateOutput(e) { this.setState({ outputSelected: e }) } updateMidiMerge(e) { let t = 0 === this.state.midiMergeOption[e] ? 1 : 0; this.setState(a => { let n = a.midiMergeOption; return n[e] = t, { midiMergeOption: n, hwconfig: Object(d.a)(Object(d.a)({}, a.hwconfig), {}, { midiMergeOption: n }) } }) } sysexStringIntoByteArray(e) { let t = unescape(encodeURIComponent(e)), a = [240]; for (var n = 0; n < t.length; n++)a.push(t.charCodeAt(n)); return a.push(247), a } findOutputForCurrentDevice() { return f.a.find(this.state.outputsAccess, e => e.name === this.state.currentDeviceName) } sendSysexToDevice(e, t) { var a = this; return Object(u.a)(h.a.mark((function n() { var s, r, i, o, l; return h.a.wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: if (s = a.sysexStringIntoByteArray(e), window.performance.mark("sysexSendStart"), kn.log("SYSEX_ARR", s), t) { n.next = 17; break } if (null !== a.state.currentDeviceName) { n.next = 7; break } return a.props.enqueueSnackbar(H, { variant: "error" }), n.abrupt("return"); case 7: if (kn.log(">> device name:", a.state.currentDeviceName), kn.log(">> outputs access:", a.state.outputsAccess), r = a.findOutputForCurrentDevice()) { n.next = 13; break } return a.props.enqueueSnackbar(H, { variant: "error" }), n.abrupt("return"); case 13: return n.next = 15, r.send(s); case 15: n.next = 34; break; case 17: n.next = 32; break; case 24: return n.next = 26, t.send(i); case 26: return n.next = 28, t.send(o); case 28: return n.next = 30, t.send(l); case 30: n.next = 34; break; case 32: return n.next = 34, t.send(s); case 34: kn.log(">> SYSEX SENT:", s, t); case 35: case "end": return n.stop() } }), n) })))() } sendConfigToDevice(e, t, a) { var n = this; return Object(u.a)(h.a.mark((function a() { var s, r, i, o, l, c, d, m, u, g, b, f; return h.a.wrap((function (a) { for (; ;)switch (a.prev = a.next) { case 0: n.setState({ [t]: !1 }), s = 0, r = !1, o = Object(p.a)(e.sysex), a.prev = 4, o.s(); case 6: if ((l = o.n()).done) { a.next = 58; break } c = l.value, d = Object(p.a)(c), a.prev = 9, d.s(); case 11: if ((m = d.n()).done) { a.next = 48; break } u = m.value, g = Object(p.a)(u), a.prev = 14, g.s(); case 16: if ((b = g.n()).done) { a.next = 38; break } f = b.value, i = 0; case 19: if (r || !(i < 3)) { a.next = 31; break } return i += 1, a.next = 23, n.sendSysexToDevice(f); case 23: return a.next = 25, fn(10); case 25: return a.next = 27, n.waitFor(2e3, t, !0); case 27: r = a.sent, n.setState({ [t]: !1 }), a.next = 19; break; case 31: if (r) { a.next = 34; break } return n.props.enqueueSnackbar("Did not received ACK from device on time. Config cancelled...", { variant: "error" }), a.abrupt("return"); case 34: r = !1, s += 1; case 36: a.next = 16; break; case 38: a.next = 43; break; case 40: a.prev = 40, a.t0 = a.catch(14), g.e(a.t0); case 43: return a.prev = 43, g.f(), a.finish(43); case 46: a.next = 11; break; case 48: a.next = 53; break; case 50: a.prev = 50, a.t1 = a.catch(9), d.e(a.t1); case 53: return a.prev = 53, d.f(), a.finish(53); case 56: a.next = 6; break; case 58: a.next = 63; break; case 60: a.prev = 60, a.t2 = a.catch(4), o.e(a.t2); case 63: return a.prev = 63, o.f(), a.finish(63); case 66: return n.setState({ rebooting: !0, outputId: !1 }, () => n.sendSysexToDevice(e["reboot-sysex"])), a.next = 69, n.waitFor(2e3, t, !0); case 69: kn.log("valid reboot?", n.state[t]), n.setState({ [t]: !1 }), kn.log("blocks_sent: ", s), window.performance.measure("sysexSends", "sysexSendStart", "sysexSendEnd"), n.setState({ successfulConfig: !0 }); case 74: case "end": return a.stop() } }), a, null, [[4, 60, 63, 66], [9, 50, 53, 56], [14, 40, 43, 46]]) })))() } handleSendToDevice() { var e = this; return Object(u.a)(h.a.mark((function t() { var a, n, s, r; return h.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (null !== e.state.currentDeviceName && -1 !== e.state.inputSelected) { t.next = 3; break } return e.props.enqueueSnackbar(H, { variant: "error" }), t.abrupt("return"); case 3: if (e.setState(() => ({ configuring: !0 })), a = JSON.stringify(e.state.banks), n = JSON.stringify(e.state.hwconfig), s = e.state.partialUpdate ? e.state.outOfSyncInts : [], t.prev = 7, e.backendWebSocket.readyState === e.backendWebSocket.OPEN) { t.next = 12; break } return e.setState({ configuring: !1 }), e.props.enqueueSnackbar(U, { variant: "error" }), t.abrupt("return"); case 12: if (r = e.findOutputForCurrentDevice()) { t.next = 16; break } return e.props.enqueueSnackbar(H, { variant: "error" }), t.abrupt("return"); case 16: e.backendWebSocket.send(JSON.stringify({ message: { hwconfig: n, config: a, command: "set-config", subcommand: "new", output_id: r.id, hidsOutOfSync: s, device_name: e.state.currentDeviceName } })), t.next = 22; break; case 19: t.prev = 19, t.t0 = t.catch(7), kn.log("Could not send data to backend for encoding", t.t0); case 22: case "end": return t.stop() } }), t, null, [[7, 19]]) })))() } validateConfig(e) { this.setState({ validating: !0, loading: !0 }); try { if (this.backendWebSocket.readyState !== this.backendWebSocket.OPEN) return this.setState({ validating: !1, loading: !1 }), void this.props.enqueueSnackbar(U, { variant: "error" }); this.backendWebSocket.send(JSON.stringify({ message: { command: "validate-config", config: e, hwconfig: this.state.hwconfig, device_name: this.state.currentDeviceName } })) } catch (t) { kn.log("Could not send data to backend for validating config", t) } } onExitHardwareConfig(e) { this.setState({ onHardwareConfig: !1 }) } onEnterHardwareConfig(e) { this.setState({ onHardwareConfig: !0 }) } onConfigHardwareMapping(e, t) { if (null === this.state.currentDeviceName || -1 === this.state.inputSelected) return void this.props.enqueueSnackbar(H, { variant: "error" }); if (!this.validateHwConfig(t)) return; this.setState(() => ({ configuring: !0 })), t.midiMergeOption = this.state.midiMergeOption, t.banksNumber = 1, t.banksModes = new Array(8).fill(this.TOGGLE), t.banksIds = new Array(8).fill(0), t.takeover = this.state.takeover, t.rainbow = this.state.rainbow, t.remoteBanks = this.state.remoteBanks, t.factoryReset = this.state.factoryReset, t.dumpStateOnStartup = this.state.dumpStateOnStartup, t.rememberState = this.state.rememberState; let a = JSON.stringify(t); try { if (this.backendWebSocket.readyState !== this.backendWebSocket.OPEN) return this.setState({ configuring: !1 }), void this.props.enqueueSnackbar(U, { variant: "error" }); let e = this.findOutputForCurrentDevice(); if (!e) return void this.props.enqueueSnackbar(H, { variant: "error" }); this.backendWebSocket.send(JSON.stringify({ message: { config: a, command: "set-config", subcommand: "initial", output_id: e.id } })) } catch (n) { kn.log("Could not send initial hw mapping to backend", n) } } handleChange(e) { this.setState({ filter: e.target.value }) } handleShowChange(e) { e.target.classList.toggle("select-selected") } handleElementSelected(e, t, a, n, s) { if (t += "s", s) { let n = e.values().next().value; this.setState(e => ({ currentElement: { type: t, idx: n, properties: e.banks[e.currentBank][t][n], hid: a }, lastBlinkIdx: e.blinkIdx, lastBlinkType: e.blinkType, currentElementType: t })), this.state.onCapture && (a = parseInt(a).toString(), this.handleBankButtonSelect(a, this.state.bank_capture)) } this.setState(a => { let n = a.currentElementType + "Selected", r = t + "Selected"; return (t !== a.currentElementType || s) && (a[n] = new Set, a.currentElementType = t), a[r] = new Set(e), a }) } handlePropertyUpdate(e, t, a, n, s, r) { this.setState(e => { let a = e.currentBank, i = e[r + "Selected"]; kn.log(i); var o, l = Object(p.a)(i.entries()); try { for (l.s(); !(o = l.n()).done;) { let i = Object(c.a)(o.value, 2), l = (i[0], i[1]); kn.log("idx:", l); let d = N(r, e.banks[a], l); kn.log("hid:", d); let p = parseInt(d) + this.state.componentsCount * a; e.banks[a][r][l][n][s] = t, e.outOfSync.includes(d) || e.outOfSync.push(d), e.outOfSyncInts.includes(p) || e.outOfSyncInts.push(p) } } catch (d) { l.e(d) } finally { l.f() } return e }) } handleBackendMessage(e) { var t = this; return Object(u.a)(h.a.mark((function a() { var n, s, r, i, o, l, c, d, p, m, g, b, E, C, S, v, N, w, _, x, A, I, B, O, M, R; return h.a.wrap((function (a) { for (; ;)switch (a.prev = a.next) { case 0: if (n = JSON.parse(e.data), s = n.message, r = n.command, i = n.subcommand, o = n.request_id, l = n.errors, c = n.debug_output, d = n.output_id, "ping" !== r && kn.log("message from backend: ", n), "" !== c && kn.log(c), "set-config" !== r) { a.next = 50; break } if ("initial" !== i) { a.next = 33; break } if (t.setState(() => ({ banksNumber: Object.keys(s.config.inputs).length, banks: s.config.inputs, hwConfigDeviceName: s.config.hwconfig.device_name })), window.performance.mark("sendConfigToDeviceStart"), null !== t.state.midiAccess) { a.next = 17; break } return t.props.enqueueSnackbar(H, { variant: "error" }), a.abrupt("return"); case 17: return a.next = 19, t.sendConfigToDevice(s, d, !0); case 19: if (t.state.successfulConfig) { a.next = 23; break } return t.props.enqueueSnackbar("Failed initial config!", { variant: "error" }), t.setState({ configuring: !1 }), a.abrupt("return"); case 23: window.performance.mark("sendConfigToDeviceEnd"), window.performance.measure("sendConfigToDevice", "sendConfigToDeviceStart", "sendConfigToDeviceEnd"), kn.log(window.performance.getEntriesByType("measure")), kn.log("midiMergeOption", s.config.hwconfig.midiMergeOption), p = s.config.default_bank, m = Object.keys(p.encoders).length + Object.keys(p.analogs).length + Object.keys(p.digitals).length, kn.log(">> COMPONENTS COUNT:", m), t.setState(() => { let e = k(s.config.hwconfig, [], {}, {}, s.config.default_bank, m, Object.keys(s.config.inputs).length, s.config.inputs, 0); return e.configuring = !1, e.successfulConfig = !1, e.outOfSync = [], e.outOfSyncInts = [], e }), a.next = 48; break; case 33: if ("new" !== i) { a.next = 48; break } if (!l) { a.next = 37; break } return t.setState({ configuring: !1 }, () => t.props.enqueueSnackbar("Error packaging new config for device: " + l, { variant: "error" })), a.abrupt("return"); case 37: return window.performance.mark("sendConfigToDeviceStart"), a.next = 40, t.sendConfigToDevice(s, d, !1); case 40: if (t.state.successfulConfig) { a.next = 44; break } return t.props.enqueueSnackbar("Failed sending config!", { variant: "error" }), t.setState({ configuring: !1 }), a.abrupt("return"); case 44: window.performance.mark("sendConfigToDeviceEnd"), window.performance.measure("sendConfigToDevice", "sendConfigToDeviceStart", "sendConfigToDeviceEnd"), kn.log(window.performance.getEntriesByType("measure")), t.setState(() => ({ configuring: !1, onHardwareConfig: !1, successfulConfig: !1, outOfSync: [], outOfSyncInts: [], configLoaded: !0 })); case 48: a.next = 114; break; case 50: if ("decode" !== r) { a.next = 55; break } kn.log("Decode message: ", s), "" === s.error_message ? "valid_request" === s.type ? t.setState({ [o]: !0, sysexEchoMessage: s.debug, [d]: !0 }) : "handshake" === s.type ? t.setState({ [o]: !0, handshakeSuccessful: !0 }) : "capture" === s.type ? (g = s.block, b = s.section, E = s.new_value, t.setState({ blinkIdx: -1, blinkType: "", lastBlinkIdx: -1, lastBlinkType: "" }), t.handleComponentCapture(g, b, E)) : "config-block" === s.type ? (C = s.bank, g = s.block, b = s.section, n = s.data, S = s.ackMessage, "general" === g ? (kn.log(">> RECEIVED VALID BLOCK"), t.setState({ validBlockReceived: !0, invalidHWConfig: !1, generalConfig: n, ackMessage: S })) : t.setNewSection(C, g, b, n)) : "fw-version" === s.type ? (v = s.fw_version_major, N = s.fw_version_minor, w = t.state.hwConfig, w = f.a.merge(w, { fw_version_major: v, fw_version_minor: N }), t.setState({ [o]: !0, hwConfig: w })) : "echo" === s.type && t.setState({ sysexEchoMessage: s.debug }) : !0 === s.invalid_hwconfig ? (kn.log("INVALID HWCONFIG"), kn.log(">> ERROR MESSAGE:", s.error_message), kn.log(">> DEBUG (received sysex):", s.debug), t.setState({ sysexValidRequest: !1, validBlockReceived: !0, invalidHWConfig: !0 })) : (kn.log("SYSEX ERROR"), kn.log(">> MESSAGE TYPE: ", s.type), kn.log(">> STATUS:", s.status), kn.log(">> ERROR MESSAGE:", s.error_message), kn.log(">> DEBUG (received sysex):", s.debug), t.setState({ sysexValidRequest: !1 })), a.next = 114; break; case 55: if ("special-requests" !== r) { a.next = 62; break } if (!l) { a.next = 59; break } return t.props.enqueueSnackbar("Error while asking for: " + i + " | " + l, { variant: "error" }), a.abrupt("return"); case 59: "handshake" === i ? t.setState({ [o]: !0, handshakeCommand: s.handshake, handshakeRequestReceived: !0 }) : "capture" === i ? (t.setState({ capturing: s.capture_on }, () => t.requestCaptureToDevice(s["capture-cmd"], s.capture_on)), t.props.enqueueSnackbar("Sending capture request to controller", { variant: "info" })) : "reset" === i ? t.setState({ [o]: !0, resetCommand: s["reset-cmd"] }) : "firmware_version" === i && t.setState({ [o]: !0, fwVersionCommand: s["fw-version-cmd"] }), a.next = 114; break; case 62: if ("save-config" !== r) { a.next = 78; break } if (!l) { a.next = 67; break } return t.setState({ saving: !1 }), t.props.enqueueSnackbar("Error saving config", { variant: "error" }), a.abrupt("return"); case 67: if (!s["only-to-account"]) { a.next = 72; break } return t.setState({ saving: !1 }), t.props.enqueueSnackbar("Config saved to account", { variant: "success" }), a.abrupt("return"); case 72: t.props.enqueueSnackbar("Config ready to save", { variant: "success" }), D = s.config, P(new Blob([D], { type: "application/json" }), s.filename), t.setState({ saving: !1 }), a.next = 114; break; case 78: if ("get-block" !== r) { a.next = 87; break } if (!l) { a.next = 83; break } return t.setState({ loading: !1 }), t.props.enqueueSnackbar("Error while getting config block: " + l, { variant: "error" }), a.abrupt("return"); case 83: _ = s.get_command, t.sendSysexToDevice(_), a.next = 114; break; case 87: if ("get-config" !== r) { a.next = 95; break } if (!l) { a.next = 92; break } return t.setState({ loading: !1 }), t.props.enqueueSnackbar("Error while loading config: " + l, { variant: "error" }), a.abrupt("return"); case 92: "account" === i ? (x = s.config, A = Object.keys(x.banks).length, I = f.a.map(f.a.filter(x.banks, e => "None" !== e.button), e => parseInt(e.button)), B = {}, O = {}, f.a.forEach(x.banks, (e, t) => { let a = e.button; "None" !== a && (a = parseInt(a), B[a] = parseInt(t), O[a] = "None" === e.color ? En : e.color) }), kn.log(">> ids in use", I), kn.log(">> midi merge options:", x.hwconfig.midiMergeOption), kn.log(">> shifter id bank:", B), kn.log(">> shifter id color:", O), p = s.default_bank, m = Object.keys(p.encoders).length + Object.keys(p.analogs).length + Object.keys(p.digitals).length, kn.log(">> COMPONENTS COUNT:", m), t.setState(k(x.hwconfig, I, B, O, s.default_bank, m, A, x.banks, 0), () => { t.props.enqueueSnackbar("Config loaded successfully", { variant: "success" }), y(x.hwconfig, t.props.enqueueSnackbar, t.props.closeSnackbar) })) : "ctrl" === i ? s.valid_config ? (M = s["get-cmds-array"], R = s["controller-layout"], t.setState({ loading: !0, configLoaded: !1, banks: {}, analogsWithFeedback: R.analogsWithFeedback, defaultBank: f.a.cloneDeep(s.default_bank), expectedSections: M.length }, Object(u.a)(h.a.mark((function e() { return h.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, t.getCompleteConfigFromController(R, M); case 2: return e.abrupt("return", e.sent); case 3: case "end": return e.stop() } }), e) }))))) : (t.props.enqueueSnackbar("Controller has not a valid config. Opening Hardware Config...", { variant: "info" }), t.setState({ onHardwareConfig: !0 })) : "default" === i && (x = s.config, A = Object.keys(x.banks).length, I = f.a.map(f.a.filter(x.banks, e => "None" !== e.button), e => parseInt(e.button)), B = {}, O = {}, f.a.forEach(x.banks, (e, t) => { let a = e.button; "None" !== a && (a = parseInt(a), B[a] = parseInt(t), O[a] = "None" === e.color ? En : e.color) }), p = s.default_bank, m = Object.keys(p.encoders).length + Object.keys(p.analogs).length + Object.keys(p.digitals).length, kn.log(">> COMPONENTS COUNT:", m), kn.log("Overriding fw version from default config (".concat(x.hwconfig.fw_version_minor, ") with the one from controller (").concat(t.state.hwConfig.fw_version_minor, ")")), x.hwconfig.fw_version_major = t.state.hwConfig.fw_version_major, x.hwconfig.fw_version_minor = t.state.hwConfig.fw_version_minor, t.setState(k(x.hwconfig, I, B, O, s.default_bank, m, A, x.banks, 0), () => { t.props.enqueueSnackbar("Config loaded successfully", { variant: "success" }), y(x.hwconfig, t.props.enqueueSnackbar, t.props.closeSnackbar) })), a.next = 114; break; case 95: if ("validate-config" !== r) { a.next = 114; break } if (!l) { a.next = 99; break } return t.setState({ validating: !1, loading: !1 }, () => t.props.enqueueSnackbar("Config is not valid: " + l, { variant: "error" })), a.abrupt("return"); case 99: if (x = JSON.parse(s.config), I = f.a.map(f.a.filter(x.banks, e => "None" !== e.button), e => parseInt(e.button)), B = {}, O = {}, f.a.forEach(x.banks, (e, t) => { let a = e.button; "None" !== a && (a = parseInt(a), B[a] = parseInt(t), O[a] = "None" === e.color ? En : e.color) }), p = s.default_bank, m = Object.keys(p.encoders).length + Object.keys(p.analogs).length + Object.keys(p.digitals).length, kn.log(">> COMPONENTS COUNT:", m), -1 === t.state.inputSelected || !t.findOutputForCurrentDevice()) { a.next = 113; break } return a.next = 110, t.requestFwVersion(); case 110: kn.log("Overriding fw version from file config (".concat(x.hwconfig.fw_version_minor, ") with the one from controller (").concat(t.state.hwConfig.fw_version_minor, ")")), x.hwconfig.fw_version_major = t.state.hwConfig.fw_version_major, x.hwconfig.fw_version_minor = t.state.hwConfig.fw_version_minor; case 113: t.setState(e => { let t = e.currentElement; null !== t.type && (t.properties = x.banks[e.currentBank][t.type][t.idx]); let a = Object.keys(x.banks).length, n = k(x.hwconfig, I, B, O, s.default_bank, m, a, x.banks, e.currentBank); return n.onHardwareConfig = !1, n.currentElement = t, n.validating = !1, n.outOfSync = [], n.outOfSyncInts = [], n }, () => { t.props.enqueueSnackbar("Config loaded successfully", { variant: "success" }), y(x.hwconfig, t.props.enqueueSnackbar, t.props.closeSnackbar) }); case 114: case "end": return a.stop() }var D }), a) })))() } handleBackendClose(e) { this.state.reconnecting || this.props.enqueueSnackbar(U, { variant: "error" }), this.setState(() => ({ configuring: !1 })), kn.log(">> CONECTION WITH BACKEND DOWN"), this.backendConnInterval = setInterval(this.connectToBackend, 3e3) } handleBackendError(e) { kn.log("Backend Websocket error:", e), this.setState(() => ({ configuring: !1 })), clearInterval(this.backendConnInterval), clearInterval(this.backendPingInterval), this.backendWebSocket.readyState !== this.backendWebSocket.CLOSED && (kn.log(">> Closing connection with Backend"), this.backendWebSocket.close()) } handleBackendOpen() { this.backendWebSocket.onmessage = this.handleBackendMessage.bind(this), this.setState({ reconnecting: !1 }), this.props.enqueueSnackbar("Connection with Server restablished!", { variant: "success" }), clearInterval(this.backendConnInterval), this.backendPingInterval = setInterval(this.sendPingToBackend, 1e4) } connectToBackend() { this.setState({ reconnecting: !0 }), this.backendWebSocket = new WebSocket(this.ws_scheme + "://kw-api.yaeltex.com/ws/kilowhat/ytxuser/"), this.backendWebSocket.onopen = this.handleBackendOpen.bind(this), this.backendWebSocket.onclose = this.handleBackendClose.bind(this), this.backendWebSocket.onerror = this.handleBackendError.bind(this) } sendPingToBackend() { if (this.backendWebSocket.readyState === this.backendWebSocket.OPEN) try { this.backendWebSocket.send(JSON.stringify({ message: { command: "ping" } })) } catch (e) { kn.log("Could not send ping to backend", e) } } getBankButtonOptions() { let e = [{ category: "button", value: "None" }, { category: "divider", value: "" }, { category: "capture", value: "Capture" }, { category: "divider", value: "" }, { category: "buttonType", value: "Enc. Switch" }], t = Object.keys(this.state.banks[0].encoders).length; for (let a = 0; a < t; a++)this.state.bankButtonsInUse.includes(a) || e.push({ category: "button", value: a.toString() }); e.push({ category: "divider", value: "" }), e.push({ category: "buttonType", value: "Digitals" }); for (let a = t; a < t + Object.keys(this.state.banks[0].digitals).length; a++)this.state.bankButtonsInUse.includes(a) || e.push({ category: "button", value: a.toString() }); return e } handleBankButtonSelect(e, t) { if (this.state.onCapture) { let t = parseInt(e); if (this.state.bankButtonsInUse.includes(t)) { let e = Object.keys(this.state.banksButtonsId).findIndex(e => this.state.banksButtonsId[e] === t); return void this.props.enqueueSnackbar(t + " id is already in use by bank " + (e + 1) + ". Please select another one.", { variant: "info" }) } this.setState({ onCapture: !1, bank_capture: null }) } if ("Capture" === e) return void this.setState({ onCapture: !0, bank_capture: t }, () => this.props.enqueueSnackbar("Please click on a switch encoder or digital card on the screen.", { variant: "info" })); let a = this.state.banks[t].button; if ("None" === a && "None" === e) return; let n = Object.keys(this.state.banks[0].encoders).length, s = parseInt(a), r = this.state.bankButtonsInUse; "None" !== a && (s < n ? this.allowEncoderSwitchConfig(s.toString()) : (kn.log(s - n), this.allowDigitalConfig((s - n).toString())), r = r.filter(e => e !== s)); let i = "None"; "None" !== e && (i = parseInt(e), i < n ? this.assignBankToEncoderSwitch(i.toString()) : this.assignBankToDigital((i - n).toString(), t + 1), r = r.concat(i)), this.setState(o => { let l, c = !1, p = "None" !== i, m = i < n ? i : i - n; if ("None" !== a && (c = !0, delete o.shifterIdColor[s], delete o.shifterIdBank[s], l = s < n ? s : s - n), (c || p) && f.a.forEach(o.banks, e => { if (c) if (s < n) { let t = "None" === e.color ? Cn : e.color; e.encoders[l].switch_feedback.color = t } else { let t = "None" === e.color ? Sn : e.color; e.digitals[l].feedback_config.color = t } if (p) if (i < n) { let a = "None" === o.banks[t].color ? o.banks[t].encoders[m].switch_feedback.color : o.banks[t].color; e.encoders[m].switch_feedback.color = a } else { let a = "None" === o.banks[t].color ? o.banks[t].digitals[m].feedback_config.color : o.banks[t].color; e.digitals[m].feedback_config.color = a } }), "None" !== i) { let e; o.shifterIdBank[i] = t + 1, e = i < n ? "None" === o.banks[t].color ? o.banks[t].encoders[i].switch_feedback.color : o.banks[t].color : "None" === o.banks[t].color ? o.banks[t].digitals[i - n].feedback_config.color : o.banks[t].color, o.shifterIdColor[i] = e } return { banks: Object(d.a)(Object(d.a)({}, o.banks), {}, { [t]: Object(d.a)(Object(d.a)({}, o.banks[t]), {}, { button: e }) }), shifterIdBank: o.shifterIdBank, shifterIdColor: o.shifterIdColor, bankButtonsInUse: r, banksButtonsId: Object(d.a)(Object(d.a)({}, o.banksButtonsId), {}, { [t]: "None" === i ? 65535 : i }), hwconfig: Object(d.a)(Object(d.a)({}, o.hwconfig), {}, { banksIds: Object(d.a)(Object(d.a)({}, o.hwconfig.banksIds), {}, { [t]: "None" === i ? 65535 : i }) }) } }) } assignBankToEncoderSwitch(e) { f.a.forEach(this.state.banks, t => { t.encoders[e].switch_config.disabled = !0, t.encoders[e].switch_feedback.disabled = !0 }) } allowEncoderSwitchConfig(e) { f.a.forEach(this.state.banks, t => { t.encoders[e].switch_config.disabled = !1, t.encoders[e].switch_feedback.disabled = !1 }) } allowDigitalConfig(e) { f.a.forEach(this.state.banks, t => { t.digitals[e].disabled = !1 }) } assignBankToDigital(e, t) { f.a.forEach(this.state.banks, a => { a.digitals[e].disabled = !0, a.digitals[e].bank_num = t }) } handleBankModeSelect(e, t, a) { if (this.setState(n => (kn.log(e, t, a), { banks: Object(d.a)(Object(d.a)({}, n.banks), {}, { [a]: Object(d.a)(Object(d.a)({}, n.banks[a]), {}, { mode: e }) }), banksModes: Object(d.a)(Object(d.a)({}, n.banksModes), {}, { [a]: t }), hwconfig: Object(d.a)(Object(d.a)({}, n.hwconfig), {}, { banksModes: Object(d.a)(Object(d.a)({}, n.hwconfig.banksModes), {}, { [a]: t }) }) })), 0 === t) return; let n = this.state.banks[a], s = n.encoders, r = n.digitals; f.a.forEach(s, e => { e.switch_config.mode = t - 1 }), f.a.forEach(r, e => { e.action_config.toggle_momentary = t - 1 }) } handleBankMidiChSelect(e, t, a) { if (this.setState(t => ({ banks: Object(d.a)(Object(d.a)({}, t.banks), {}, { [a]: Object(d.a)(Object(d.a)({}, t.banks[a]), {}, { midi_ch: e }) }) })), 0 === t) return; let n = this.state.banks[a], s = n.encoders, r = n.digitals, i = n.analogs, o = n.feedbacks; f.a.forEach(s, e => { e.rotary_config.channel = t - 1, e.switch_config.channel = t - 1, e.rotation_feedback.channel = t - 1, e.switch_feedback.channel = t - 1 }), f.a.forEach(r, e => { e.action_config.channel = t - 1, e.feedback_config.channel = t - 1 }), f.a.forEach(i, e => { e.message_config.channel = t - 1, e.feedback_config.channel = t - 1 }), f.a.forEach(o, e => { e.feedback_config.channel = t - 1 }) } handleAddBank() { this.setState(e => { let t = Object.keys(e.banks).length, a = f.a.cloneDeep(e.defaultBank), n = Object.keys(this.state.banks[0].encoders).length, s = Object.keys(this.state.banks[0].digitals).length, r = this.state.componentsCount, i = this.state.bankButtonsInUse, o = this.state.shifterIdColor, l = e.outOfSync, c = e.outOfSyncInts; for (var p = 0; p < r; p++) { let e = toString().padStart(2, "0"), a = p + r * t; l.includes(e) || l.push(e), c.includes(a) || c.push(a) } a.feedbacks = {}; let m = this.getNextShifterIdAvailable(); if (a.button = "None" !== m ? m.toString() : m, "None" !== m) if (i.push(m), m < n) this.assignBankToEncoderSwitch(m), o[m] = Cn, a.encoders[m].switch_config.disabled = !0, a.encoders[m].switch_feedback.disabled = !0; else if (m < n + s) { let e = m - n; o[m] = Sn, this.assignBankToDigital(e, t + 1), a.digitals[e].disabled = !0, a.digitals[e].bank_num = t + 1 } this.setShiftersBankParams(a), kn.log(a); let h = "None" === m ? 65535 : m; return { banks: Object(d.a)(Object(d.a)({}, e.banks), {}, { [t]: a }), banksNumber: t + 1, bankButtonsInUse: i, shifterIdColor: o, hwconfig: Object(d.a)(Object(d.a)({}, e.hwconfig), {}, { banksNumber: t + 1, banksIds: Object(d.a)(Object(d.a)({}, e.hwconfig.banksIds), {}, { [t]: h }) }) } }) } handleBankSelect(e) { let t = this.state.currentElement; null !== t.properties && (t.properties = this.state.banks[parseInt(e)][t.type][t.idx]), this.setState({ currentBank: parseInt(e), currentElement: t }) } handleBankDelete(e) { const t = {}; let a = new Array(8).fill(65535), n = new Array(8).fill(this.TOGGLE); e -= 1; let s = this.state.banks[e].button, r = Object.keys(this.state.banks[0].encoders).length; "None" !== s && (s = parseInt(s)), f.a.forEach(this.state.banks, (i, o) => { if (o !== e) if ("None" !== s && s < r) { let e = "None" === i.color ? Cn : i.color; i.encoders[s].switch_config.disabled = !1, i.encoders[s].switch_feedback.disabled = !1, i.encoders[s].switch_feedback.color = e } else if ("None" !== s) { let e = "None" === i.color ? Sn : i.color; i.digitals[s - r].disabled = !1, i.digitals[s - r].feedback_config.color = e } o < e ? (a[o] = "None" === i.button ? 65535 : parseInt(i.button), n[o] = "Momentary" === i.mode ? this.MOMENTARY : this.TOGGLE, t[o] = f.a.cloneDeep(i)) : o > e && (a[o - 1] = "None" === i.button ? 65535 : parseInt(i.button), n[o - 1] = "Momentary" === i.mode ? this.MOMENTARY : this.TOGGLE, t[o - 1] = f.a.cloneDeep(i)) }); let i = Object.keys(t).length; this.setState(r => (kn.log(r.currentBank), kn.log(e), "None" !== s && (r.bankButtonsInUse = f.a.filter(r.bankButtonsInUse, e => e !== s), r.shifterIdBank = f.a.filter(r.shifterIdBank, e => e !== s), r.shifterIdColor = f.a.filter(r.shifterIdColor, e => e !== s)), e === r.currentBank && (r.currentBank = 0), { banks: t, banksNumber: i, currentBank: r.currentBank, banksButtonsId: a, banksModes: n, bankButtonsInUse: r.bankButtonsInUse, shifterIdBank: r.shifterIdBank, shifterIdColor: r.shifterIdColor, hwconfig: Object(d.a)(Object(d.a)({}, r.hwconfig), {}, { banksNumber: i, banksModes: n, banksIds: a }) })) } handleBankDuplicate(e) { e -= 1; let t = Object.keys(this.state.banks).length, a = f.a.cloneDeep(this.state.banks[e]), n = this.state.bankButtonsInUse, s = this.state.banksButtonsId, r = this.state.banksModes, i = this.state.shifterIdColor, o = this.state.shifterIdBank, l = Object.keys(this.state.banks[0].encoders).length; if (a.button = this.getNextShifterIdAvailable(), "None" !== a.button) { let e = parseInt(a.button), c = e < l ? "encoder" : "digital", d = "encoder" === c ? e : e - l; "encoder" === c ? (this.assignBankToEncoderSwitch(d), a.encoders[d].switch_config.disabled = !0, a.encoders[d].switch_feedback.disabled = !0) : (this.assignBankToDigital(d, t + 1), a.digitals[d].disabled = !0, a.digitals[d].bank_num = t + 1), n.push(e), s[t] = e, r[t] = "Momentary" === a.mode ? this.MOMENTARY : this.TOGGLE; let p = e < l ? Cn : Sn; i[e] = "None" === a.color ? p : a.color, o[e] = t } this.setState(e => { if ("None" !== a.button && "None" !== a.color) { let n = parseInt(a.button); f.a.forEach(e.banks, e => { let s = n < l ? n : n - l; n < l ? (e.encoders[s].switch_config.disabled = !0, e.encoders[s].switch_feedback.disabled = !0, e.encoders[s].switch_feedback.color_range_enable = 0, e.encoders[s].switch_feedback.color = a.color) : (e.digitals[s].disabled = !0, e.digitals[s].bank_num = t + 1, e.digitals[s].feedback_config.color_range_enable = 0, e.digitals[s].feedback_config.color = a.color) }) } return { banks: Object(d.a)(Object(d.a)({}, e.banks), {}, { [t]: a }), banksNumber: t + 1, banksModes: r, banksButtonsId: s, bankButtonsInUse: n, shifterIdBank: o, shifterIdColor: i, hwconfig: Object(d.a)(Object(d.a)({}, e.hwconfig), {}, { banksNumber: t + 1, banksModes: r, banksIds: s }) } }) } handlePassDataToBank(e, t) { let a = this.state.banks[t].button, n = f.a.cloneDeep(this.state.banks[e]), s = this.state.shifterIdColor, r = this.state.banksModes; if (r[t] = "Momentary" === n.mode ? this.MOMENTARY : this.TOGGLE, n.button = a, "None" !== a) { let e = parseInt(a), t = e < Object.keys(this.state.banks[0].encoders).length ? Cn : Sn; s[e] = "None" === n.color ? t : n.color } this.setState(e => ({ banks: Object(d.a)(Object(d.a)({}, e.banks), {}, { [t]: n }), banksModes: r, shifterIdColor: s, hwconfig: Object(d.a)(Object(d.a)({}, e.hwconfig), {}, { banksModes: r }) })) } handleDesktopFile(e) { let t = e.target, a = new FileReader; a.onload = function () { let e = JSON.stringify(a.result); this.validateConfig(e) }.bind(this), a.readAsText(t.files[0]) } handleLoadFromDesktop(e, t) { e && (this.closeLoadConfigModal(), this.setState({ currentDeviceName: e, inputSelected: t })), function (e) { const t = document.createElement("input"); t.type = "file", t.accept = ".ytx", t.style = "display:none", t.addEventListener("change", e, !1), t.click() }(this.handleDesktopFile) } handleLoadFromAccount(e, t) { } handleLoadFromController(e, t) { var a = this; if (e) this.closeLoadConfigModal(); else { if (-1 === this.state.inputSelected) return void this.props.enqueueSnackbar(H, { variant: "error" }); e = this.state.inputs[this.state.inputSelected], t = this.state.inputSelected } this.setState({ currentDeviceName: e, inputSelected: t }), this.state.loading || (this.backendWebSocket.readyState === this.backendWebSocket.OPEN ? this.setState({ loading: !0 }, Object(u.a)(h.a.mark((function n() { var s, r, i, o, l, c; return h.a.wrap((function (n) { for (; ;)switch (n.prev = n.next) { case 0: return a.props.enqueueSnackbar("Loading config from controller, please wait...", { variant: "info" }), f.a.find(a.state.outputsAccess, (a, n) => a.name === e && (t = n, !0)), n.next = 4, a.getGeneralConfigBlock(t); case 4: if (!1 !== (s = n.sent)) { n.next = 8; break } return a.setState({ onHardwareConfig: !0, loading: !1, invalidHWConfig: !1 }), n.abrupt("return"); case 8: if (kn.log(">> GENERAL CONFIG:", s), null !== s && void 0 !== s) { n.next = 12; break } return a.setState({ loading: !1 }, () => a.props.enqueueSnackbar("Could not get device BLOCK 0 to load config", { variant: "error" })), n.abrupt("return"); case 12: r = s.device_name, i = s.usb_serial, o = s.signature, l = s.banksNumber, c = s.remoteBanks, kn.log("SIGNATURE:", o), a.setState({ hwconfig: f.a.cloneDeep(s), generalConfig: void 0, banksButtonsId: s.banksIds, rainbow: s.rainbow, takeover: s.takeover, dumpStateOnStartup: s.dumpStateOnStartup, rememberState: s.rememberState, midiMergeOption: s.midiMergeOption, fwVersion: [s.fw_version_major, s.fw_version_minor], hwVersion: [s.hw_version_major, s.hw_version_minor], currentSerialNumber: i, remoteBanks: c }, () => a.backendWebSocket.send(JSON.stringify({ message: { command: "get-config", subcommand: "ctrl", device_name: r, serial: i, signature: o, banks_number: l } }))); case 15: case "end": return n.stop() } }), n) })))) : this.props.enqueueSnackbar(U, { variant: "error" })) } handleSaveToAccount() { } handleSaveToDesktop() { this.state.saving || this.setState({ saving: !0 }, () => this.saveToAccount(!0)) } saveToAccount(e = !1) { this.props.enqueueSnackbar("Verifying and saving config, wait a moment please...", { variant: "info" }); let t = {}; if (t.hwconfig = this.state.hwconfig, t.banks = this.state.banks, this.backendWebSocket.readyState !== this.backendWebSocket.OPEN) return void this.setState({ saving: !1 }, () => this.props.enqueueSnackbar(U, { variant: "error" })); let a = !e; this.backendWebSocket.send(JSON.stringify({ message: { config: JSON.stringify(t), command: "save-config", "only-to-account": a } })) } onFilterSelected(e) { kn.log("FILTER:", e), this.setState(t => ({ filter: Object(d.a)(Object(d.a)({}, t.filter), {}, { type: e }) })) } onFilterSearch(e) { kn.log("SEARCH:", e), this.setState(t => ({ filter: Object(d.a)(Object(d.a)({}, t.filter), {}, { search: e }) })) } render() { return s.a.createElement(I.a, { active: this.state.configuring || this.state.detectingDevices || this.state.loading, spinner: !0, text: this.state.configuring ? "Configuring your device..." : this.state.loading ? "Loading Config... " : "Detecting devices..." }, s.a.createElement("div", { className: "App" }, s.a.createElement(g.a, { delayShow: 200, place: "left", effect: "solid", backgroundColor: "rgb(46, 46, 46)", borderColor: "#43ABDC" }), s.a.createElement(un.a, { channel: "youtube", isOpen: this.state.introVideoOpen, onClose: () => this.setState({ introVideoOpen: !1 }), videoId: "GGhA-gHK5p0" }), s.a.createElement(mn, { open: this.state.selectAndLoadOpen, devices: this.state.inputs, hiddenDevices: this.state.hiddenDevices, onClose: this.closeLoadConfigModal, onLoadFromCtrl: this.handleLoadFromController, onLoadDefaultConfig: this.handleLoadDefaultConfig, onLoadFromFile: this.handleLoadFromDesktop, updateInput: this.updateInput }), s.a.createElement(Pe, { fwVersion: this.state.fwVersion, hwVersion: this.state.hwVersion, onFilterChange: this.handleChange, onShowElementsChange: this.handleShowChange, filter: this.state.filter, showElementsOptions: this.state.showElementsOptions, clickHardwareConfig: this.onEnterHardwareConfig, inputs: this.state.inputs, hiddenDevices: this.state.hiddenDevices, outputs: this.state.outputs, updateInput: this.updateInput, selectedDevice: this.state.currentDeviceName, midiMergeOption: this.state.midiMergeOption, takeoverMode: this.state.takeover, rainbow: this.state.rainbow, remoteBanks: this.state.remoteBanks, rememberState: this.state.rememberState, onRememberStateToggle: this.handleRememberStateToggle, dumpStateOnStartup: this.state.dumpStateOnStartup, onDumpStateOnStartupToggle: this.handleDumpStateOnStartupToggle, updateOutput: this.updateOutput, refreshPorts: this.refreshPorts, updateMidiMerge: this.updateMidiMerge, onCapture: this.onCapture, onMidiMonitorToggle: this.handleMidiMonitorToggle, onTakeoverSelect: this.handleTakeoverMode, onRainbowToggle: this.handleRainbowToggle, onRemoteBanksToggle: this.handleRemoteBanksToggle, loadFromDesktop: this.handleLoadFromDesktop, loadFromController: this.handleLoadFromController, loadDefaultConfig: this.handleLoadDefaultConfig, saveToDesktop: this.handleSaveToDesktop, takeoverOptions: this.state.takeoverOptions, resetEeprom: this.resetEeprom, onShowIntroVideo: () => this.setState({ introVideoOpen: !0 }) }), s.a.createElement("main", null, s.a.createElement("div", { className: "main__container_one" }, !this.state.configLoaded && !this.state.onHardwareConfig && s.a.createElement(G, { onClick: this.handleLoadFromDesktop }) || this.state.onHardwareConfig && s.a.createElement(st, { isActive: this.state.configuring, click: this.onExitHardwareConfig, configHW: this.onConfigHardwareMapping }) || !this.state.onHardwareConfig && this.state.configLoaded && s.a.createElement(vt, { isActive: this.state.configuring, banks: this.state.banks, selectBank: this.handleBankSelect, banksNumber: Object.keys(this.state.banks).length, currentBank: this.state.currentBank, maxBanksNumber: this.state.maxBanksNumber, elementSelected: this.handleElementSelected, onChange: this.onFilterSelected, onSearch: this.onFilterSearch, filter: this.state.filter, outOfSync: this.state.outOfSync, blinkIdx: this.state.blinkIdx, blinkType: this.state.blinkType, lastBlinkIdx: this.state.lastBlinkIdx, lastBlinkType: this.state.lastBlinkType, loading: this.state.loading })), !this.state.onHardwareConfig && this.state.configLoaded && s.a.createElement("div", { className: "main__container-two" }, s.a.createElement($a, { click: this.drawerToggleClickHandler, className: this.state.drawerClass, id: this.state.drawerId })), !this.state.onHardwareConfig && this.state.drawerOpen && this.state.configLoaded && s.a.createElement("div", { className: "main__container-three" }, s.a.createElement(Ga, { drawerId: this.state.drawerId, currentElement: this.state.currentElement, handlePropertyUpdate: this.handlePropertyUpdate, currentBank: this.state.currentBank, banks: this.state.banks, banksNumber: Object.keys(this.state.banks).length, bankButtonOptions: this.getBankButtonOptions(), bankButtonSelect: this.handleBankButtonSelect, bankModeSelect: this.handleBankModeSelect, bankMidiChSelect: this.handleBankMidiChSelect, bankColorSelect: this.handleBankColorSelect, addBank: this.handleAddBank, deleteBank: this.handleBankDelete, duplicateBank: this.handleBankDuplicate, passDataToBank: this.handlePassDataToBank, maxBanksNumber: this.state.maxBanksNumber, switchColorRangeList: this.state.hwconfig.switchFeedbackColorList, digitalColorRangeList: this.state.hwconfig.digitalFeedbackColorList, analogColorRangeList: this.state.hwconfig.analogFeedbackColorList, loading: this.state.loading, fwVersion: this.state.fwVersion }))), s.a.createElement(Ze, { sendToDevice: this.handleSendToDevice, monitorData: this.state.monitorData, deviceLinked: null !== this.state.currentDeviceName, configInSync: null !== this.state.currentDeviceName && f.a.isEmpty(this.state.outOfSync) }))) } } var _n = Object(l.withSnackbar)(wn); Boolean("localhost" === window.location.hostname || "[::1]" === window.location.hostname || window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)); const xn = Object(o.a)({ root: { fontFamily: ["Karla", "sans-serif"].join(","), fontSize: "0.1em" }, variantSuccess: { fontSize: "5em" }, variantError: { fontSize: "5em" }, variantInfo: { fontSize: "5em" }, variantWarning: { fontSize: "5em" } })(l.SnackbarProvider); i.a.render(s.a.createElement(xn, { maxSnack: 3, anchorOrigin: { vertical: "top", horizontal: "center" } }, s.a.createElement(_n, null)), document.getElementById("root")), "serviceWorker" in navigator && navigator.serviceWorker.ready.then(e => { e.unregister() }) }, 79: function (e, t, a) { e.exports = a.p + "static/media/banks.d4704102.svg" } }, [[184, 1, 2]]]);
//# sourceMappingURL=main.7be4e3e3.chunk.js.map